# TOTETAXI FRONTEND EXPORT
# Generated: 2025-09-19 18:18:55.185587
# Files: 67

# ==== next-env.d.ts ====

```
/// <reference types="next" />
/// <reference types="next/image-types/global" />
/// <reference path="./.next/types/routes.d.ts" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.

```

# ==== next.config.ts ====

```
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;

```

# ==== package.json ====

```
{
  "name": "frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@headlessui/react": "^2.2.7",
    "@heroicons/react": "^2.2.0",
    "@hookform/resolvers": "^3.10.0",
    "@tanstack/react-query": "^5.87.1",
    "@tanstack/react-query-devtools": "^5.87.1",
    "axios": "^1.11.0",
    "clsx": "^2.1.1",
    "next": "15.5.0",
    "react": "19.1.0",
    "react-dom": "19.1.0",
    "react-hook-form": "^7.62.0",
    "tailwind-merge": "^2.6.0",
    "zod": "^3.25.76",
    "zustand": "^4.5.7"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^3",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "autoprefixer": "^10.4.21",
    "eslint": "^9",
    "eslint-config-next": "15.5.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.17",
    "typescript": "^5"
  }
}

```

# ==== postcss.config.js ====

```
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

```

# ==== src/app/about/page.tsx ====

```
// frontend/src/app/about/page.tsx - Real Tote Taxi story
import { MainLayout } from '@/components/layout/main-layout';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Link from 'next/link';

export default function AboutPage() {
  return (
    <MainLayout>
      <div className="container mx-auto px-4 py-16">
        {/* Hero Section */}
        <div className="text-center mb-16">
          <h1 className="text-4xl md:text-5xl font-serif font-bold text-navy-900 mb-6">
            Welcome to Tote Taxi
          </h1>
          <p className="text-xl text-navy-700 max-w-3xl mx-auto">
            A door-to-door delivery, storage, courier, and mini moving service serving the Hamptons, 
            NYC, all major NY airports, Connecticut, and South Florida.
          </p>
        </div>

        {/* What We Do */}
        <section className="mb-20">
          <Card variant="luxury">
            <CardHeader>
              <h2 className="text-3xl font-serif font-bold text-navy-900 text-center">
                What We Do + Where We Go
              </h2>
            </CardHeader>
            <CardContent>
              <div className="space-y-6">
                <p className="text-navy-700 text-lg">
                  Tote Taxi offers a luxury <strong>multi-arm delivery service</strong> with additional{' '}
                  <strong>custom service offerings</strong> for people traveling to and from{' '}
                  <strong>New York</strong>, <strong>the Hamptons</strong>, <strong>South Florida</strong>{' '}
                  (Palm Beach, Boca Raton, Miami, Jupiter, Fort Lauderdale, and more), and{' '}
                  <strong>all major NYC airports</strong> (JFK, LGA, and EWR).
                </p>
                
                <div className="bg-gold-50 border border-gold-200 rounded-lg p-6">
                  <h3 className="font-medium text-navy-900 mb-3">We Carry It All</h3>
                  <p className="text-navy-700">
                    Same-day, door-to-door service for <strong>luggage, golf clubs, shopping bags, bikes, 
                    exercise equipment, baby gear, pet supplies, clothing, forgotten items, small furniture, 
                    accessories, and so much more.</strong>
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
        </section>

        {/* Our Philosophy */}
        <section className="mb-20">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div>
              <h2 className="text-3xl font-serif font-bold text-navy-900 mb-6">
                We Are Hands-On... So You Can Be Hands-Off
              </h2>
              <div className="space-y-4 text-navy-700">
                <p>
                  <strong>Convenience is a luxury.</strong> Don't want to take everything back with you? 
                  We offer day, weekend, and seasonal storage options â€“ whether it's for a short trip 
                  or winter storage for your summer gear and essentials.
                </p>
                <p>
                  Every family needs a <strong>Mini Move</strong>. Tote Taxi offers the ability to pack 
                  whatever you need and get it quickly to your summer home and back to the city at the 
                  end of the season.
                </p>
                <p>
                  Do you need help packing? We are happy to recommend any one of our packing partners 
                  to ensure a clutter-free summer vacation. We truly tote it all â€“ treating your items 
                  as if they were our own.
                </p>
              </div>
            </div>
            
            <Card variant="elevated">
              <CardContent>
                <div className="text-center">
                  <h3 className="text-xl font-medium text-navy-900 mb-4">
                    A Trusted Luxury Delivery Service
                  </h3>
                  <p className="text-navy-700 mb-6">
                    Our professional same-day luxe courier service is perfect for forgotten or 
                    last-minute items. We also offer an array of <strong>custom services upon request</strong>.
                  </p>
                  <p className="text-navy-600 text-sm">
                    Providing seamless assistance and expert guidance, Tote Taxi elevates the travel experience â€“ the haute courier.
                  </p>
                </div>
              </CardContent>
            </Card>
          </div>
        </section>

        {/* Founder Story */}
        <section className="mb-20">
          <Card variant="luxury">
            <CardHeader>
              <h2 className="text-3xl font-serif font-bold text-navy-900 text-center">
                About Our Founder
              </h2>
            </CardHeader>
            <CardContent>
              <div className="max-w-3xl mx-auto">
                <h3 className="text-xl font-medium text-navy-900 mb-4 text-center">
                  Meet Danielle!
                </h3>
                
                <div className="space-y-4 text-navy-700">
                  <p>
                    Hello! It's a pleasure to meet you.
                  </p>
                  <p>
                    I started this business because I wanted a seamless way to get my suitcase 
                    (which was packed with too many shoes) to and from the Hamptons and NYC.
                  </p>
                  <p>
                    Are you flying with BLADE and need your golf bags waiting for you at Sebonack? 
                    Are you spending a Sunday at Surf Lodge and need a place to store your luggage 
                    for the day? Or, maybe you are spending the summer in the Hamptons and want to 
                    bring your Peloton?
                  </p>
                  <p>
                    Are you in the Hamptons and need a dress delivered to you for an event from 
                    Bergdorf Goodman last minute? Did you leave something small, but absolutely 
                    essential in the city? Let us help!
                  </p>
                  <p>
                    Whatever the case may be, we are here to help get your things where they need 
                    to go and with the utmost professional care.
                  </p>
                  <p className="text-center font-medium text-navy-900">
                    Thank you for the opportunity to serve you â€“ see you at the beach!
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
        </section>

        {/* Company Timeline */}
        <section className="mb-20">
          <h2 className="text-3xl font-serif font-bold text-navy-900 text-center mb-12">
            Our Journey
          </h2>
          <div className="space-y-8">
            <Card variant="elevated">
              <CardContent>
                <div className="flex items-center">
                  <div className="w-16 h-16 bg-navy-900 text-white rounded-full flex items-center justify-center text-xl font-bold mr-6">
                    2016
                  </div>
                  <div>
                    <h3 className="text-lg font-medium text-navy-900">Founded</h3>
                    <p className="text-navy-700">Danielle Candela founded Tote Taxi to solve the stress of traveling with cumbersome luggage between Manhattan and the Hamptons.</p>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card variant="elevated">
              <CardContent>
                <div className="flex items-center">
                  <div className="w-16 h-16 bg-navy-900 text-white rounded-full flex items-center justify-center text-xl font-bold mr-6">
                    2018
                  </div>
                  <div>
                    <h3 className="text-lg font-medium text-navy-900">Official Launch</h3>
                    <p className="text-navy-700">Tote Taxi officially launched operations, focusing on convenience, style, and peace of mind for luxury travelers.</p>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card variant="elevated">
              <CardContent>
                <div className="flex items-center">
                  <div className="w-16 h-16 bg-navy-900 text-white rounded-full flex items-center justify-center text-xl font-bold mr-6">
                    2024
                  </div>
                  <div>
                    <h3 className="text-lg font-medium text-navy-900">Expanded Service</h3>
                    <p className="text-navy-700">Now serving NYC, Hamptons, Connecticut, South Florida, and all major NYC airports with partnerships including BLADE and Cultured Magazine.</p>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        </section>

        {/* CTA */}
        <div className="text-center">
          <h2 className="text-2xl font-serif font-bold text-navy-900 mb-4">
            Ready to Experience Hands-Free Travel?
          </h2>
          <p className="text-navy-700 mb-8 max-w-2xl mx-auto">
            Join thousands of satisfied clients who trust Tote Taxi for seamless delivery service. 
            From forgotten essentials to seasonal moves, we handle it all with professional care.
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <Link href="/book">
              <Button variant="primary" size="lg">
                Book Your Move
              </Button>
            </Link>
            <Link href="/contact">
              <Button variant="outline" size="lg">
                Contact Our Team
              </Button>
            </Link>
          </div>
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/book/page.tsx ====

```
'use client';

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { BookingWizard } from '@/components/booking';
import { MainLayout } from '@/components/layout/main-layout';
import { Modal } from '@/components/ui/modal';

export default function BookPage() {
  const [showBookingWizard, setShowBookingWizard] = useState(false);
  const router = useRouter();

  // Auto-open modal when page loads
  useEffect(() => {
    setShowBookingWizard(true);
  }, []);

  const closeBookingWizard = () => {
    setShowBookingWizard(false);
    // Redirect to home when modal closes
    router.push('/');
  };

  return (
    <MainLayout>
      <div className="min-h-screen bg-gradient-to-br from-cream-50 to-cream-100 flex items-center justify-center">
        <div className="text-center">
          <h1 className="text-3xl font-serif font-bold text-navy-900 mb-4">
            Book Your Luxury Move
          </h1>
          <p className="text-navy-700">Loading booking wizard...</p>
        </div>
      </div>

      {/* Booking Wizard Modal */}
      <Modal
        isOpen={showBookingWizard}
        onClose={closeBookingWizard}
        size="xl"
        showCloseButton={true}
        className="max-h-[90vh] overflow-y-auto"
      >
        <div className="bg-gradient-to-br from-cream-50 to-cream-100 min-h-full">
          <BookingWizard onComplete={closeBookingWizard} />
        </div>
      </Modal>
    </MainLayout>
  );
}
```

# ==== src/app/contact/page.tsx ====

```
// frontend/src/app/contact/page.tsx - Real Tote Taxi contact info
'use client';

import { useState } from 'react';
import { MainLayout } from '@/components/layout/main-layout';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import Link from 'next/link';

export default function ContactPage() {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    phone: '',
    service: '',
    message: '',
  });

  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitted, setSubmitted] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    // Simulate form submission
    await new Promise(resolve => setTimeout(resolve, 1000));
    
    setSubmitted(true);
    setIsSubmitting(false);
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  if (submitted) {
    return (
      <MainLayout>
        <div className="container mx-auto px-4 py-16">
          <div className="max-w-2xl mx-auto text-center">
            <div className="text-6xl mb-6">ðŸ“¦</div>
            <h1 className="text-3xl font-serif font-bold text-navy-900 mb-6">
              We'll Get Back to You ASAP!
            </h1>
            <Card variant="luxury">
              <CardContent>
                <p className="text-navy-700 mb-6">
                  Your message has been received. Our team will respond as quickly as possible 
                  to help with your delivery needs.
                </p>
                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                  <Link href="/book">
                    <Button variant="primary">
                      Book a Delivery
                    </Button>
                  </Link>
                  <Link href="/">
                    <Button variant="outline">
                      Return Home
                    </Button>
                  </Link>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>
      </MainLayout>
    );
  }

  return (
    <MainLayout>
      <div className="container mx-auto px-4 py-16">
        {/* Hero Section */}
        <div className="text-center mb-16">
          <h1 className="text-4xl md:text-5xl font-serif font-bold text-navy-900 mb-6">
            Contact Us Now
          </h1>
          <p className="text-xl text-navy-700 max-w-3xl mx-auto mb-4">
            Can't find what you are looking for? Our Customer Service Team is available to help with any questions.
          </p>
          <p className="text-lg text-navy-600">
            Be sure to check out our <Link href="/faq" className="text-navy-900 hover:underline">FAQ here</Link>.
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
          {/* Contact Form */}
          <div>
            <Card variant="elevated">
              <CardHeader>
                <h2 className="text-2xl font-serif font-bold text-navy-900">
                  Get Started Here
                </h2>
                <p className="text-navy-700">
                  Please fill out our <strong>brief survey</strong> and we'll get back to you ASAP.
                </p>
              </CardHeader>
              <CardContent>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <Input
                      label="Full Name"
                      name="name"
                      value={formData.name}
                      onChange={handleChange}
                      required
                      placeholder="Your Name"
                    />
                    <Input
                      label="Email Address"
                      name="email"
                      type="email"
                      value={formData.email}
                      onChange={handleChange}
                      required
                      placeholder="you@email.com"
                    />
                  </div>

                  <Input
                    label="Phone Number"
                    name="phone"
                    type="tel"
                    value={formData.phone}
                    onChange={handleChange}
                    placeholder="(555) 123-4567"
                  />

                  <div>
                    <label className="block text-sm font-medium text-navy-900 mb-1">
                      Service Needed <span className="text-red-500">*</span>
                    </label>
                    <select
                      name="service"
                      value={formData.service}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-3 text-base border border-gray-300 rounded-md shadow-sm focus:border-navy-500 focus:ring-navy-500 text-gray-900 bg-white"
                    >
                      <option value="">Select a service</option>
                      <option value="mini-move">Mini Move</option>
                      <option value="standard-delivery">Standard Delivery</option>
                      <option value="blade-luggage">BLADE Luggage</option>
                      <option value="storage">Storage</option>
                      <option value="south-florida">South Florida Delivery</option>
                      <option value="custom">Custom Service</option>
                      <option value="other">Other</option>
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-navy-900 mb-1">
                      Tell Us About Your Needs <span className="text-red-500">*</span>
                    </label>
                    <textarea
                      name="message"
                      value={formData.message}
                      onChange={handleChange}
                      required
                      rows={5}
                      placeholder="Describe what you need delivered, pickup/delivery locations, dates, etc."
                      className="w-full px-4 py-3 text-base border border-gray-300 rounded-md shadow-sm focus:border-navy-500 focus:ring-navy-500 text-gray-900 bg-white resize-vertical"
                    />
                  </div>

                  <Button
                    type="submit"
                    variant="primary"
                    size="lg"
                    disabled={isSubmitting}
                    className="w-full"
                  >
                    {isSubmitting ? 'Sending...' : 'Send Message'}
                  </Button>
                </form>
              </CardContent>
            </Card>
          </div>

          {/* Contact Information */}
          <div className="space-y-8">
            {/* Direct Contact */}
            <Card variant="luxury">
              <CardHeader>
                <h3 className="text-xl font-serif font-bold text-navy-900">
                  Get in Touch Directly
                </h3>
              </CardHeader>
              <CardContent>
                <div className="space-y-6">
                  <div>
                    <h4 className="font-medium text-navy-900 mb-2">Email</h4>
                    <p className="text-navy-700">
                      <a href="mailto:info@totetaxi.com" className="hover:underline text-lg">
                        info@totetaxi.com
                      </a>
                    </p>
                  </div>

                  <div>
                    <h4 className="font-medium text-navy-900 mb-2">Phone</h4>
                    <p className="text-navy-700">
                      <a href="tel:631-595-5100" className="hover:underline text-lg">
                        631-595-5100
                      </a>
                    </p>
                    <p className="text-sm text-navy-600 mt-1">
                      <em>For Courier Service â€“ Priority Delivery, please call us.</em>
                    </p>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Service Areas */}
            <Card variant="elevated">
              <CardHeader>
                <h3 className="text-xl font-serif font-bold text-navy-900">
                  Our Service Areas
                </h3>
              </CardHeader>
              <CardContent>
                <p className="text-navy-700 mb-4">
                  <strong>Tote Taxi is a same-day door-to-door delivery service</strong> covering:
                </p>
                <ul className="space-y-2 text-navy-700">
                  <li>â€¢ <strong>The Hamptons</strong> (all areas)</li>
                  <li>â€¢ <strong>NYC</strong> (Manhattan, Brooklyn, and more)</li>
                  <li>â€¢ <strong>All Major NY Airports</strong> (JFK, LGA, EWR)</li>
                  <li>â€¢ <strong>Connecticut</strong></li>
                  <li>â€¢ <strong>South Florida</strong> (Palm Beach, Miami, Boca Raton, Jupiter, Fort Lauderdale)</li>
                </ul>
                <p className="text-sm text-navy-600 mt-4">
                  <strong>Custom deliveries and services are available upon request.</strong>
                </p>
              </CardContent>
            </Card>

            {/* Special Inquiries */}
            <Card variant="default" className="border-gold-200 bg-gold-50">
              <CardContent>
                <div className="text-center">
                  <h3 className="text-lg font-medium text-navy-900 mb-3">
                    Marketing & PR Inquiries
                  </h3>
                  <p className="text-navy-700 text-sm mb-4">
                    For partnership opportunities and media inquiries, please contact us directly.
                  </p>
                  <Link href="mailto:info@totetaxi.com?subject=Marketing%20Inquiry">
                    <Button variant="outline" size="sm">
                      Contact for Partnerships
                    </Button>
                  </Link>
                </div>
              </CardContent>
            </Card>

            {/* Quick Booking CTA */}
            <Card variant="luxury">
              <CardContent>
                <div className="text-center">
                  <h3 className="text-lg font-medium text-navy-900 mb-3">
                    Ready to Book?
                  </h3>
                  <p className="text-navy-700 text-sm mb-4">
                    Skip the contact form and start your delivery booking directly.
                  </p>
                  <Link href="/book">
                    <Button variant="primary" className="w-full">
                      Book Now
                    </Button>
                  </Link>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/dashboard/bookings/page.tsx ====

```
// frontend/src/app/dashboard/bookings/page.tsx
'use client';

import { useEffect } from 'react';
import { useAuthStore } from '@/stores/auth-store';
import { useRouter } from 'next/navigation';
import { MainLayout } from '@/components/layout/main-layout';
import { BookingHistory } from '@/components/dashboard/booking-history';
import { Button } from '@/components/ui/button';
import { ArrowLeftIcon } from '@heroicons/react/24/outline';

export default function BookingHistoryPage() {
  const { isAuthenticated } = useAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isAuthenticated) {
      router.push('/login');
    }
  }, [isAuthenticated, router]);

  if (!isAuthenticated) {
    return null;
  }

  return (
    <MainLayout>
      <div className="min-h-screen bg-gradient-to-br from-cream-50 to-cream-100 py-8">
        <div className="container mx-auto px-4 max-w-6xl">
          {/* Back Button */}
          <Button
            variant="ghost"
            onClick={() => router.push('/dashboard')}
            className="mb-6"
          >
            <ArrowLeftIcon className="h-4 w-4 mr-2" />
            Back to Dashboard
          </Button>

          <BookingHistory />
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/dashboard/page.tsx ====

```
// frontend/src/app/dashboard/page.tsx  
'use client';

import { useEffect } from 'react';
import { useAuthStore } from '@/stores/auth-store';
import { useRouter, useSearchParams } from 'next/navigation';
import { MainLayout } from '@/components/layout/main-layout';
import { DashboardOverview } from '@/components/dashboard/dashboard-overview';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

export default function DashboardPage() {
  const { user, isAuthenticated, clearAuth } = useAuthStore();
  const router = useRouter();
  const searchParams = useSearchParams();
  const isWelcome = searchParams.get('welcome') === 'true';

  useEffect(() => {
    if (!isAuthenticated) {
      router.push('/login');
    }
  }, [isAuthenticated, router]);

  if (!isAuthenticated || !user) {
    return (
      <MainLayout>
        <div className="min-h-screen bg-gradient-to-br from-cream-50 to-cream-100 flex items-center justify-center">
          <div className="text-navy-700">Loading...</div>
        </div>
      </MainLayout>
    );
  }

  return (
    <MainLayout>
      <div className="min-h-screen bg-gradient-to-br from-cream-50 to-cream-100 py-8">
        <div className="container mx-auto px-4 max-w-6xl">
          {/* Welcome Message for New Users */}
          {isWelcome && (
            <Card variant="luxury" className="mb-8 border-gold-200 bg-gold-50">
              <CardContent className="p-6 text-center">
                <h2 className="text-xl font-serif font-bold text-navy-900 mb-2">
                  Welcome to ToteTaxi, {user.first_name}!
                </h2>
                <p className="text-navy-700 mb-4">
                  Your account has been created successfully. Ready to book your first luxury move?
                </p>
                <Button variant="primary" onClick={() => router.push('/book')}>
                  Book Your First Move
                </Button>
              </CardContent>
            </Card>
          )}

          {/* Header */}
          <div className="text-center mb-8">
            <h1 className="text-3xl font-serif font-bold text-navy-900 mb-2">
              Welcome back, {user.first_name}!
            </h1>
            <p className="text-navy-700">
              Your ToteTaxi account dashboard
            </p>
          </div>

          {/* Dashboard Content */}
          <DashboardOverview />

          {/* Quick Actions */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
            <Card>
              <CardContent className="p-6 text-center">
                <h3 className="text-lg font-medium text-navy-900 mb-4">Book a Move</h3>
                <p className="text-sm text-navy-700 mb-4">
                  Schedule your next ToteTaxi delivery or move
                </p>
                <Button 
                  variant="primary" 
                  onClick={() => router.push('/book')}
                  className="w-full"
                >
                  Book Now
                </Button>
              </CardContent>
            </Card>

            <Card>
              <CardContent className="p-6 text-center">
                <h3 className="text-lg font-medium text-navy-900 mb-4">Manage Addresses</h3>
                <p className="text-sm text-navy-700 mb-4">
                  Save addresses for faster future bookings
                </p>
                <Button 
                  variant="outline" 
                  className="w-full"
                  onClick={() => alert('Address management coming soon!')}
                >
                  Manage Addresses
                </Button>
              </CardContent>
            </Card>
          </div>
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/faq/page.tsx ====

```
// frontend/src/app/faq/page.tsx - Real Tote Taxi FAQ content
'use client';

import { useState } from 'react';
import { MainLayout } from '@/components/layout/main-layout';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Link from 'next/link';

interface FAQItem {
  question: string;
  answer: string;
  category: 'general' | 'service' | 'mini-moves' | 'booking';
}

const faqData: FAQItem[] = [
  // General
  {
    category: 'general',
    question: 'What areas do you currently service?',
    answer: 'We currently service the Hamptons, NYC and surrounding areas (by zipcode), and South Florida (by zipcode). If you don\'t see your zipcode or location listed as an option, you can always contact us for a custom quote. Certain zip codes surrounding our service areas may be an additional fee.'
  },
  {
    category: 'general',
    question: 'Do you handle airport baggage transportation?',
    answer: 'Yes. We deliver to JFK, LGA, EWR & Westchester FBO\'s. Please contact us for specific arrangements.'
  },
  {
    category: 'general',
    question: 'What about insurance coverage?',
    answer: 'Our total liability for items lost or damaged is half the purchase price of each item up to $150. For additional coverage, $100 extra covers your order for $1,000. TOTE TAXI assumes no responsibility for: money, negotiable papers, securities, business documents, irreplaceable books, manuscripts, photographic or electronic equipment, computers, jewelry, watches, eyeglasses, silverware, china, precious metals, heirlooms, furs, tobacco products, antiques, artifacts, paintings and other works of art, medicines, human organs, commercial items, cosmetics, samples, or any similar valuable or fragile items.'
  },
  {
    category: 'general',
    question: 'Do I need to tip the driver?',
    answer: 'Tipping is not required, but is greatly appreciated by the drivers.'
  },
  {
    category: 'general',
    question: 'Do you offer any discounts?',
    answer: 'We can offer a discount if you are paying via bank transfer, cash, or if you refer someone who books Tote Taxi. Please call or email for more information.'
  },
  {
    category: 'general',
    question: 'Do you offer daily luggage storage?',
    answer: 'Yes, this service is offered at 395 County Road, 39A. It\'s $20/day. Please call or email us to schedule.'
  },
  
  // Service Details
  {
    category: 'service',
    question: 'What happens if I\'m late to give my bag? How long will you wait?',
    answer: 'If there is a problem we will call/text you directly. Tote Taxi will wait up to 10 minutes to receive the bag. If the delivery is missed you will be charged an additional $20.'
  },
  {
    category: 'service',
    question: 'Can I leave my bag outside my door if I\'m not home?',
    answer: 'Yes. If you are not home, please leave the items in a safe place. Use the instruction form to inform us of pickup/delivery instructions.'
  },
  {
    category: 'service',
    question: 'I\'m staying in a hotel - where should I leave my bag?',
    answer: 'Go ahead and leave it at the front desk â€“ the hotel will give you a claim ticket. Please respond to your confirmation email with a photo of the claim ticket.'
  },
  {
    category: 'service',
    question: 'Do you have a drop-off or pick-up location?',
    answer: 'Everything is delivered door-to-door. If you need this option, our office is at 395 County Road 39A, Southampton, NY 11968. Contact us for details.'
  },
  {
    category: 'service',
    question: 'Where will the driver meet me?',
    answer: 'Please have the person handing us the bag meet us on the first floor. We will contact you directly when we have arrived at your address.'
  },
  {
    category: 'service',
    question: 'Do I have to label my bag?',
    answer: 'Yes, please label the bag with the name on the order. We also highly recommend that you number your pieces (example: #3 of 5 pieces). Labels are available upon request.'
  },
  {
    category: 'service',
    question: 'When will my bag arrive in NYC/The Hamptons?',
    answer: 'Items are picked up in the mornings between 8am-11:30am and delivered before 6pm. When the driver is headed to your pickup/drop-off you will receive tracking information.'
  },
  {
    category: 'service',
    question: 'Do you offer local Hamptons service from retail stores?',
    answer: 'As a traditional courier, we can pick up and deliver items for you around the Hamptons.'
  },
  
  // Mini Moves
  {
    category: 'mini-moves',
    question: 'What is a mini move?',
    answer: 'A mini-move is a luxurious and worry-free solution for transporting a larger amount of luggage and other small items in a carefree way â€” to and from your destination in NYC, the Hamptons, and South Florida.'
  },
  {
    category: 'mini-moves',
    question: 'What is the difference between a Mini Move, Petite Move, and a Full Move?',
    answer: 'We suggest move types based on the number of individuals in a family: â€¢ Petite Move: Ideal for a family of 3- with 8-15 pieces â€¢ Mini Move (Standard): Our most popular option, ideal for a family of 5- with 15-30 pieces â€¢ Full Move: For larger families of 6+ with 50-60 pieces. Note: mini move packages do not include Peloton transport.'
  },
  {
    category: 'mini-moves',
    question: 'What do I need to know about transporting a Peloton?',
    answer: 'We ask that you please remove the screen from the bike before transport.'
  },
  {
    category: 'mini-moves',
    question: 'I have an item that is not listed on the website - how do I know how much it will cost?',
    answer: 'If you have a custom order please email us at info@totetaxi.com or call 631-595-5100. We work on custom orders and can provide a quote based on your specific needs.'
  },
  {
    category: 'mini-moves',
    question: 'Are there any additional fees with the Mini Move?',
    answer: 'There can be additional fees: if you give us more items than originally stated, if your items are not ready for pickup and/or drivers are required to wait more than 30 minutes (on either end) an hourly rate will accrue and be added to the Mini Move.'
  },
  {
    category: 'mini-moves',
    question: 'Can you provide us with a COI (Certificate of Insurance)?',
    answer: 'Yes, please send a sample COI for the building to info@totetaxi.com. It is $50 extra. We need to know when the pickup is scheduled if the building requires a COI.'
  },
  
  // Booking
  {
    category: 'booking',
    question: 'If I want to add a bag last minute can I?',
    answer: 'Tote Taxi can take as many bags as needed/requested by the client. Please inform the messenger of the change - we\'ll be able to properly document the delivery request in our system. The card on file will be billed for any additional items.'
  },
  {
    category: 'booking',
    question: 'What is your cancellation policy?',
    answer: 'You must cancel within 48 hours of booking for a full refund. This does not apply for holiday weekends or sold-out dates. Credit will be issued for any cancellations.'
  },
  {
    category: 'booking',
    question: 'How do I edit my order?',
    answer: 'Please email us at orders@totetaxi.com. We will gladly assist you with any changes.'
  }
];

const categories = {
  general: 'General Information',
  service: 'Service Details',
  'mini-moves': 'Mini Moves',
  booking: 'Booking & Orders'
};

export default function FAQPage() {
  const [activeCategory, setActiveCategory] = useState<string>('general');
  const [openQuestions, setOpenQuestions] = useState<Set<number>>(new Set());

  const toggleQuestion = (index: number) => {
    const newOpenQuestions = new Set(openQuestions);
    if (newOpenQuestions.has(index)) {
      newOpenQuestions.delete(index);
    } else {
      newOpenQuestions.add(index);
    }
    setOpenQuestions(newOpenQuestions);
  };

  const filteredFAQs = faqData.filter(faq => faq.category === activeCategory);

  return (
    <MainLayout>
      <div className="container mx-auto px-4 py-16">
        {/* Hero Section */}
        <div className="text-center mb-16">
          <h1 className="text-4xl md:text-5xl font-serif font-bold text-navy-900 mb-6">
            Frequently Asked Questions
          </h1>
          <p className="text-xl text-navy-700 max-w-3xl mx-auto mb-4">
            Everything you need to know about Tote Taxi's delivery service.
          </p>
          <p className="text-lg text-navy-600">
            Can't find what you're looking for? <Link href="/contact" className="text-navy-900 hover:underline">Contact us</Link> for personalized assistance.
          </p>
        </div>

        {/* Category Filter */}
        <div className="flex flex-wrap justify-center gap-4 mb-12">
          {Object.entries(categories).map(([key, label]) => (
            <button
              key={key}
              onClick={() => setActiveCategory(key)}
              className={`px-6 py-3 rounded-lg font-medium transition-all ${
                activeCategory === key
                  ? 'bg-navy-900 text-white'
                  : 'bg-white text-navy-700 border border-gray-200 hover:border-navy-300'
              }`}
            >
              {label}
            </button>
          ))}
        </div>

        {/* FAQ Content */}
        <div className="max-w-4xl mx-auto mb-16">
          <div className="space-y-4">
            {filteredFAQs.map((faq, index) => (
              <Card key={index} variant="elevated">
                <CardContent>
                  <button
                    onClick={() => toggleQuestion(index)}
                    className="w-full text-left py-4 flex justify-between items-start"
                  >
                    <h3 className="text-lg font-medium text-navy-900 pr-4">
                      {faq.question}
                    </h3>
                    <span className={`text-navy-900 transition-transform flex-shrink-0 ${
                      openQuestions.has(index) ? 'rotate-180' : ''
                    }`}>
                      â†“
                    </span>
                  </button>
                  {openQuestions.has(index) && (
                    <div className="pb-4 pt-2 border-t border-gray-100">
                      <div className="text-navy-700 leading-relaxed whitespace-pre-line">
                        {faq.answer}
                      </div>
                    </div>
                  )}
                </CardContent>
              </Card>
            ))}
          </div>
        </div>

        {/* Important Notes */}
        <section className="mb-16">
          <h2 className="text-2xl font-serif font-bold text-navy-900 text-center mb-8">
            Important Information
          </h2>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
            <Card variant="default" className="border-red-200 bg-red-50">
              <CardContent>
                <h3 className="font-medium text-navy-900 mb-3">Liability Limitations</h3>
                <p className="text-navy-700 text-sm leading-relaxed">
                  In consideration of the rate charged, it is agreed that the value of shipments 
                  is not greater than $150.00 unless a greater value is declared and insurance 
                  purchased at the time the order is placed. All claims for loss or damage must 
                  be submitted verbally within 24 hours and in writing by certified mail within 
                  30 days of pickup or delivery.
                </p>
              </CardContent>
            </Card>

            <Card variant="default" className="border-gold-200 bg-gold-50">
              <CardContent>
                <h3 className="font-medium text-navy-900 mb-3">Office Location</h3>
                <div className="text-navy-700 text-sm">
                  <p className="mb-2"><strong>395 County Road 39A</strong></p>
                  <p className="mb-2">Southampton, NY 11968</p>
                  <p className="mb-2">Daily luggage storage available: $20/day</p>
                  <p>Contact us to arrange pickup/drop-off</p>
                </div>
              </CardContent>
            </Card>
          </div>
        </section>

        {/* Items We Cannot Transport */}
        <section className="mb-16">
          <Card variant="elevated">
            <CardContent>
              <h2 className="text-2xl font-serif font-bold text-navy-900 mb-6 text-center">
                Items We Cannot Transport
              </h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <h3 className="font-medium text-navy-900 mb-3">Prohibited Items Include:</h3>
                  <ul className="space-y-1 text-navy-700 text-sm">
                    <li>â€¢ Dangerous goods or hazardous materials</li>
                    <li>â€¢ Explosives, fireworks, flammable goods</li>
                    <li>â€¢ Cash, coins, currency, negotiable instruments</li>
                    <li>â€¢ Human or animal remains</li>
                    <li>â€¢ Lottery tickets and gambling devices</li>
                    <li>â€¢ Pornographic materials</li>
                    <li>â€¢ Tobacco products and cigarettes</li>
                    <li>â€¢ Prescription drugs (with limited exceptions)</li>
                  </ul>
                </div>
                <div>
                  <h3 className="font-medium text-navy-900 mb-3">Additional Restrictions:</h3>
                  <ul className="space-y-1 text-navy-700 text-sm">
                    <li>â€¢ Perishable foods requiring refrigeration</li>
                    <li>â€¢ Live plants and cut flowers</li>
                    <li>â€¢ Containers of liquids over 8 gallons</li>
                    <li>â€¢ Used gasoline tanks or gasoline-powered devices</li>
                    <li>â€¢ Packages that are wet, leaking, or emit odors</li>
                    <li>â€¢ Items requiring special licenses or permits</li>
                    <li>â€¢ Merchandise from sanctioned countries</li>
                    <li>â€¢ Switchblades and certain knives</li>
                  </ul>
                </div>
              </div>
              <p className="text-center text-navy-600 text-sm mt-6">
                If you're unsure about an item, please contact us before booking.
              </p>
            </CardContent>
          </Card>
        </section>

        {/* Still Have Questions */}
        <div className="text-center">
          <Card variant="luxury">
            <CardContent>
              <h2 className="text-2xl font-serif font-bold text-navy-900 mb-4">
                Still Have Questions?
              </h2>
              <p className="text-navy-700 mb-6 max-w-2xl mx-auto">
                Our Customer Service Team is available to help with any questions. 
                We're here to make your delivery experience seamless.
              </p>
              <div className="flex flex-col sm:flex-row gap-4 justify-center">
                <Link href="/contact">
                  <Button variant="primary" size="lg">
                    Contact Us
                  </Button>
                </Link>
                <Link href="mailto:info@totetaxi.com">
                  <Button variant="outline" size="lg">
                    Email: info@totetaxi.com
                  </Button>
                </Link>
                <Link href="tel:631-595-5100">
                  <Button variant="outline" size="lg">
                    Call: 631-595-5100
                  </Button>
                </Link>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/globals.css ====

```
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-inter), Arial, Helvetica, sans-serif;
}

/* Custom utility classes for luxury design */
@layer components {
  .luxury-card-shadow {
    @apply shadow-lg shadow-navy-900/10 hover:shadow-xl hover:shadow-navy-900/20 transition-shadow duration-300;
  }
  
  .gradient-gold {
    @apply bg-gradient-to-r from-gold-400 to-gold-600;
  }
}
```

# ==== src/app/layout.tsx ====

```
// frontend/src/app/layout.tsx
import type { Metadata } from "next";
import { Inter, Playfair_Display } from "next/font/google";
import "./globals.css";
import { QueryProvider } from "@/components/providers/query-provider";

const inter = Inter({ subsets: ["latin"], variable: '--font-inter' });
const playfair = Playfair_Display({ subsets: ["latin"], variable: '--font-playfair' });

export const metadata: Metadata = {
  title: "ToteTaxi - Luxury Delivery to the Hamptons",
  description: "Premium delivery service for Manhattan to Hamptons transport. From suitcases to surfboards, we handle your seasonal relocation with luxury and care.",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" className={`${inter.variable} ${playfair.variable}`}>
      <body className={inter.className}>
        <QueryProvider>
          {children}
        </QueryProvider>
      </body>
    </html>
  );
}
```

# ==== src/app/login/page.tsx ====

```
// frontend/src/app/login/page.tsx
import { MainLayout } from '@/components/layout/main-layout';
import { LoginForm } from '@/components/auth/login-form';

export default function LoginPage() {
  return (
    <MainLayout>
      <div className="min-h-screen bg-gradient-to-br from-cream-50 to-cream-100 py-16">
        <div className="container mx-auto px-4">
          <LoginForm />
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/page.tsx ====

```
// frontend/src/app/page.tsx - Using real ToteTaxi information
'use client';

import { useState } from 'react';
import { MainLayout } from '@/components/layout/main-layout';
import { ServiceShowcase } from '@/components/marketing/service-showcase';
import { TestAPIConnection } from '@/components/test-api-connection';
import { BookingWizard } from '@/components/booking';
import { Button } from '@/components/ui/button';
import { Modal } from '@/components/ui/modal';
import { Card, CardContent } from '@/components/ui/card';
import Link from 'next/link';

export default function Home() {
  const [showBookingWizard, setShowBookingWizard] = useState(false);

  const openBookingWizard = () => {
    setShowBookingWizard(true);
  };

  const closeBookingWizard = () => {
    setShowBookingWizard(false);
  };

  return (
    <>
      <MainLayout onBookNowClick={openBookingWizard}>
        {/* Hero Section */}
        <section className="py-24 bg-gradient-to-br from-cream-50 to-cream-100">
          <div className="container mx-auto px-4 text-center">
            <h1 className="text-5xl md:text-6xl font-serif font-bold text-navy-900 mb-6">
              Door-to-Door Delivery Service
            </h1>
            <p className="text-xl text-navy-700 mb-4 max-w-3xl mx-auto">
              Tote Taxi will deliver your luggage to and from the city stress-free.
            </p>
            <p className="text-lg text-navy-600 mb-8 max-w-2xl mx-auto">
              From suitcases to surfboards, Pelotons to pop-up props â€” we handle it all between 
              NYC, the Hamptons, South Florida, and all major airports.
            </p>
            <div className="flex flex-col sm:flex-row gap-4 justify-center">
              <Button variant="primary" size="lg" onClick={openBookingWizard}>
                Book Now
              </Button>
              <Link href="/services">
                <Button variant="outline" size="lg">
                  View Services & Pricing
                </Button>
              </Link>
            </div>
          </div>
        </section>

        {/* How It Works - Simple 3 Step */}
        <section className="py-16 bg-white">
          <div className="container mx-auto px-4">
            <h2 className="text-3xl font-serif font-bold text-navy-900 text-center mb-12">
              Same Day Delivery Made Stress-Free
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              <Card variant="elevated">
                <CardContent>
                  <div className="text-center">
                    <div className="text-4xl mb-4">ðŸ“±</div>
                    <h3 className="text-xl font-medium text-navy-900 mb-3">Pickup</h3>
                    <p className="text-navy-700">Schedule a pickup and we'll come to you.</p>
                  </div>
                </CardContent>
              </Card>
              <Card variant="elevated">
                <CardContent>
                  <div className="text-center">
                    <div className="text-4xl mb-4">âœˆï¸</div>
                    <h3 className="text-xl font-medium text-navy-900 mb-3">Travel</h3>
                    <p className="text-navy-700">You travel hands-free. TrÃ¨s chic!</p>
                  </div>
                </CardContent>
              </Card>
              <Card variant="elevated">
                <CardContent>
                  <div className="text-center">
                    <div className="text-4xl mb-4">ðŸšš</div>
                    <h3 className="text-xl font-medium text-navy-900 mb-3">Delivery</h3>
                    <p className="text-navy-700">We'll deliver to your desired destination.</p>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        </section>

        {/* API Connection Status - Remove this in production */}
        <div className="container mx-auto px-4 py-8">
          <TestAPIConnection />
        </div>

        {/* Service Showcase */}
        <ServiceShowcase />

        {/* Customer Testimonials */}
        <section className="py-16 bg-cream-50">
          <div className="container mx-auto px-4">
            <h2 className="text-3xl font-serif font-bold text-navy-900 text-center mb-12">
              What Our Customers Say
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <Card variant="elevated">
                <CardContent>
                  <p className="text-navy-700 text-sm mb-4">
                    "I've heard amazing things about Tote Taxi for awhile now and finally used it for 
                    the first time today when I took Blade from JFK to Manhattan and LOVED it! 
                    It was so easy and seamless!"
                  </p>
                  <p className="font-medium text-navy-900">- Natalie M.</p>
                </CardContent>
              </Card>
              
              <Card variant="elevated">
                <CardContent>
                  <p className="text-navy-700 text-sm mb-4">
                    "We have been using Tote Taxi for the last three years when we come out to 
                    East Hampton and when we head back to the city. They've always been wonderful! 
                    Makes moving bikes and extras easy and stress free!"
                  </p>
                  <p className="font-medium text-navy-900">- Kimberly R.</p>
                </CardContent>
              </Card>
              
              <Card variant="elevated">
                <CardContent>
                  <p className="text-navy-700 text-sm mb-4">
                    "Tote Taxi was a lifesaver! They were so easy to coordinate with, showed up 
                    exactly on time, communicated well. I highly recommend their services."
                  </p>
                  <p className="font-medium text-navy-900">- Robyn M.</p>
                </CardContent>
              </Card>
            </div>
          </div>
        </section>

        {/* Service Areas */}
        <section className="py-16 bg-white">
          <div className="container mx-auto px-4">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-serif font-bold text-navy-900 mb-4">
                Where We Deliver
              </h2>
              <p className="text-lg text-navy-700">
                Comprehensive delivery service across multiple locations
              </p>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
              <div className="text-center">
                <div className="text-4xl mb-4">ðŸ™ï¸</div>
                <h3 className="font-medium text-navy-900 mb-2">NYC</h3>
                <p className="text-navy-600 text-sm">Manhattan, Brooklyn, and surrounding areas</p>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-4">ðŸ–ï¸</div>
                <h3 className="font-medium text-navy-900 mb-2">The Hamptons</h3>
                <p className="text-navy-600 text-sm">East Hampton, Southampton, Montauk, and more</p>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-4">âœˆï¸</div>
                <h3 className="font-medium text-navy-900 mb-2">NYC Airports</h3>
                <p className="text-navy-600 text-sm">JFK, LaGuardia, Newark</p>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-4">ðŸŒ´</div>
                <h3 className="font-medium text-navy-900 mb-2">South Florida</h3>
                <p className="text-navy-600 text-sm">Palm Beach, Miami, Boca Raton, Jupiter</p>
              </div>
            </div>
          </div>
        </section>

        {/* Partnerships */}
        <section className="py-16 bg-cream-50">
          <div className="container mx-auto px-4">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-serif font-bold text-navy-900 mb-4">
                Trusted Partners
              </h2>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              <div className="text-center">
                <div className="text-4xl mb-4">ðŸš</div>
                <h3 className="font-medium text-navy-900 mb-2">BLADE</h3>
                <p className="text-navy-600 text-sm">Official luggage delivery partner for helicopter transfers</p>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-4">ðŸ“š</div>
                <h3 className="font-medium text-navy-900 mb-2">Cultured Magazine</h3>
                <p className="text-navy-600 text-sm">Trusted delivery partner</p>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-4">ðŸ§³</div>
                <h3 className="font-medium text-navy-900 mb-2">Luggage Free</h3>
                <p className="text-navy-600 text-sm">Partner in luggage logistics</p>
              </div>
            </div>
          </div>
        </section>

        {/* Call-to-Action Section */}
        <section className="py-16 bg-navy-900 text-white">
          <div className="container mx-auto px-4 text-center">
            <h2 className="text-3xl font-serif font-bold mb-4">
              Ready to Travel Hands-Free?
            </h2>
            <p className="text-xl text-navy-200 mb-8 max-w-2xl mx-auto">
              Join thousands of satisfied customers who trust Tote Taxi for stress-free delivery service.
            </p>
            <Button 
              variant="secondary" 
              size="lg"
              onClick={openBookingWizard}
            >
              Book Now
            </Button>
          </div>
        </section>
      </MainLayout>

      {/* Booking Wizard Modal */}
      <Modal
        isOpen={showBookingWizard}
        onClose={closeBookingWizard}
        size="full"
        className="max-w-6xl"
        showCloseButton={true}
      >
        <BookingWizard />
      </Modal>
    </>
  );
}
```

# ==== src/app/register/page.tsx ====

```
// frontend/src/app/register/page.tsx
import { MainLayout } from '@/components/layout/main-layout';
import { RegisterForm } from '@/components/auth/register-form';

export default function RegisterPage() {
  return (
    <MainLayout>
      <div className="min-h-screen bg-gradient-to-br from-cream-50 to-cream-100 py-16">
        <div className="container mx-auto px-4">
          <RegisterForm />
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/services/page.tsx ====

```
// frontend/src/app/services/page.tsx
'use client';

import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { MainLayout } from '@/components/layout/main-layout';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Link from 'next/link';
import type { ServiceCatalog } from '@/types';

export default function ServicesPage() {
  const { data: services, isLoading } = useQuery({
    queryKey: ['services', 'catalog'],
    queryFn: async (): Promise<ServiceCatalog> => {
      const response = await apiClient.get('/api/public/services/');
      return response.data;
    }
  });

  if (isLoading) {
    return (
      <MainLayout>
        <div className="container mx-auto px-4 py-16">
          <div className="animate-pulse space-y-8">
            <div className="h-12 bg-navy-200 rounded w-1/2 mx-auto"></div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              {[1, 2, 3].map(i => (
                <div key={i} className="h-64 bg-navy-200 rounded"></div>
              ))}
            </div>
          </div>
        </div>
      </MainLayout>
    );
  }

  return (
    <MainLayout>
      <div className="container mx-auto px-4 py-16">
        {/* Hero Section */}
        <div className="text-center mb-16">
          <h1 className="text-4xl md:text-5xl font-serif font-bold text-navy-900 mb-6">
            Our Luxury Services
          </h1>
          <p className="text-xl text-navy-700 max-w-3xl mx-auto">
            From weekend essentials to full seasonal relocations, we provide white-glove service 
            tailored to your Manhattan-to-Hamptons lifestyle.
          </p>
        </div>

        {/* Mini Moves - Featured Section */}
        <section className="mb-20">
          <div className="text-center mb-12">
            <h2 className="text-3xl font-serif font-bold text-navy-900 mb-4">Mini Moves</h2>
            <p className="text-lg text-navy-700 max-w-2xl mx-auto">
              Complete packages designed for seasonal relocation. Everything you need for your Hamptons move, 
              professionally handled from door to door.
            </p>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            {services?.mini_move_packages?.map((pkg) => (
              <Card 
                key={pkg.id} 
                variant={pkg.is_most_popular ? "luxury" : "elevated"}
                className="relative"
              >
                {pkg.is_most_popular && (
                  <div className="absolute -top-3 left-1/2 transform -translate-x-1/2">
                    <span className="bg-gold-500 text-navy-900 px-4 py-1 rounded-full text-sm font-medium">
                      Most Popular
                    </span>
                  </div>
                )}
                
                <CardHeader>
                  <div className="text-center">
                    <h3 className="text-2xl font-serif font-bold text-navy-900 mb-2">
                      {pkg.name}
                    </h3>
                    <div className="text-4xl font-bold text-navy-900 mb-4">
                      ${pkg.base_price_dollars}
                    </div>
                    {pkg.max_items && (
                      <p className="text-navy-600">Up to {pkg.max_items} items</p>
                    )}
                  </div>
                </CardHeader>
                
                <CardContent>
                  <p className="text-navy-700 mb-6">{pkg.description}</p>
                  
                  <div className="space-y-3 mb-8">
                    <h4 className="font-medium text-navy-900">What's Included:</h4>
                    <ul className="space-y-2">
                      <li className="flex items-center text-sm text-navy-700">
                        <span className="text-green-500 mr-3">âœ“</span>
                        Door-to-door pickup and delivery
                      </li>
                      <li className="flex items-center text-sm text-navy-700">
                        <span className="text-green-500 mr-3">âœ“</span>
                        Professional handling and care
                      </li>
                      {pkg.protective_wrapping && (
                        <li className="flex items-center text-sm text-navy-700">
                          <span className="text-green-500 mr-3">âœ“</span>
                          Premium protective wrapping
                        </li>
                      )}
                      {pkg.coi_included && (
                        <li className="flex items-center text-sm text-navy-700">
                          <span className="text-green-500 mr-3">âœ“</span>
                          Certificate of Insurance included
                        </li>
                      )}
                      {pkg.priority_scheduling && (
                        <li className="flex items-center text-sm text-navy-700">
                          <span className="text-green-500 mr-3">âœ“</span>
                          Priority scheduling
                        </li>
                      )}
                    </ul>
                  </div>
                  
                  <Link href="/book">
                    <Button 
                      variant={pkg.is_most_popular ? "primary" : "outline"} 
                      className="w-full"
                    >
                      Select {pkg.name}
                    </Button>
                  </Link>
                </CardContent>
              </Card>
            ))}
          </div>

          {/* Organizing Services Add-On */}
          <Card variant="luxury" className="mb-8">
            <CardHeader>
              <h3 className="text-xl font-serif font-bold text-navy-900 text-center">
                Professional Organizing Services
              </h3>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h4 className="font-medium text-navy-900 mb-3">Professional Packing</h4>
                  <p className="text-navy-700 text-sm mb-4">
                    Our expert team carefully packs your belongings at your Manhattan location 
                    using premium materials and techniques to ensure everything arrives pristine.
                  </p>
                  <ul className="space-y-1 text-sm text-navy-600">
                    <li>â€¢ Premium packing materials included</li>
                    <li>â€¢ Careful handling of delicate items</li>
                    <li>â€¢ Efficient space optimization</li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-medium text-navy-900 mb-3">Professional Unpacking</h4>
                  <p className="text-navy-700 text-sm mb-4">
                    Arrive to your Hamptons home with everything unpacked and organized exactly 
                    how you want it. We handle the setup so you can start enjoying your retreat.
                  </p>
                  <ul className="space-y-1 text-sm text-navy-600">
                    <li>â€¢ Complete unpacking and setup</li>
                    <li>â€¢ Organized placement of belongings</li>
                    <li>â€¢ Removal of all packing materials</li>
                  </ul>
                </div>
              </div>
            </CardContent>
          </Card>
        </section>

        {/* Standard Delivery */}
        {services?.standard_delivery && (
          <section className="mb-20">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-serif font-bold text-navy-900 mb-4">Standard Delivery</h2>
              <p className="text-lg text-navy-700 max-w-2xl mx-auto">
                Individual item delivery for when you need specific items transported quickly and safely.
              </p>
            </div>

            <div className="max-w-4xl mx-auto">
              <Card variant="elevated">
                <CardContent>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                      <div className="text-3xl font-bold text-navy-900 mb-2">
                        ${services.standard_delivery.price_per_item_dollars} per item
                      </div>
                      <p className="text-navy-600 mb-4">
                        Minimum {services.standard_delivery.minimum_items} items â€¢ 
                        ${services.standard_delivery.minimum_charge_dollars} minimum charge
                      </p>
                      
                      <div className="space-y-3">
                        <h4 className="font-medium text-navy-900">Perfect for:</h4>
                        <ul className="space-y-2 text-sm text-navy-700">
                          <li>â€¢ Individual clothing items</li>
                          <li>â€¢ Documents and files</li>
                          <li>â€¢ Small electronics</li>
                          <li>â€¢ Seasonal items under {services.standard_delivery.max_weight_per_item_lbs} lbs</li>
                        </ul>
                      </div>
                    </div>
                    
                    <div>
                      <div className="bg-gold-50 border border-gold-200 rounded-lg p-6">
                        <h4 className="font-medium text-navy-900 mb-3">Same-Day Delivery</h4>
                        <div className="text-2xl font-bold text-navy-900 mb-2">
                          ${services.standard_delivery.same_day_flat_rate_dollars}
                        </div>
                        <p className="text-sm text-navy-700 mb-4">
                          Need it today? We offer same-day delivery for urgent items.
                        </p>
                        <ul className="space-y-1 text-xs text-navy-600">
                          <li>â€¢ Order by 10 AM for same-day delivery</li>
                          <li>â€¢ Available Thursday through Monday</li>
                          <li>â€¢ Subject to availability</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>
          </section>
        )}

        {/* Specialty Items */}
        {services?.specialty_items && services.specialty_items.length > 0 && (
          <section className="mb-20">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-serif font-bold text-navy-900 mb-4">Specialty Items</h2>
              <p className="text-lg text-navy-700 max-w-2xl mx-auto">
                Premium handling for your most valuable and unique items. Each specialty item receives 
                custom care and attention.
              </p>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {services.specialty_items.map((item) => (
                <Card key={item.id} variant="default">
                  <CardContent>
                    <div className="text-center">
                      <h4 className="text-lg font-medium text-navy-900 mb-2">{item.name}</h4>
                      <div className="text-2xl font-bold text-navy-900 mb-3">
                        ${item.price_dollars}
                      </div>
                      <p className="text-navy-600 text-sm mb-4">{item.description}</p>
                      
                      {item.special_handling && (
                        <div className="mb-4">
                          <span className="inline-block bg-gold-100 text-gold-800 text-xs px-3 py-1 rounded-full">
                            Special Handling Included
                          </span>
                        </div>
                      )}
                      
                      {item.requires_van_schedule && (
                        <p className="text-xs text-navy-500">
                          * Requires scheduled van delivery
                        </p>
                      )}
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </section>
        )}

        {/* Service Areas */}
        <section className="mb-20">
          <Card variant="elevated">
            <CardHeader>
              <h2 className="text-2xl font-serif font-bold text-navy-900 text-center">Service Areas</h2>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h3 className="font-medium text-navy-900 mb-3">Pickup Locations</h3>
                  <ul className="space-y-2 text-navy-700">
                    <li>â€¢ Manhattan (All neighborhoods)</li>
                    <li>â€¢ Brooklyn (Select areas)</li>
                    <li>â€¢ Long Island City</li>
                    <li>â€¢ Hoboken & Jersey City</li>
                  </ul>
                </div>
                <div>
                  <h3 className="font-medium text-navy-900 mb-3">Delivery Destinations</h3>
                  <ul className="space-y-2 text-navy-700">
                    <li>â€¢ East Hampton</li>
                    <li>â€¢ Southampton & Water Mill</li>
                    <li>â€¢ Bridgehampton & Sagaponack</li>
                    <li>â€¢ Westhampton Beach</li>
                    <li>â€¢ Sag Harbor & North Haven</li>
                    <li>â€¢ Montauk</li>
                  </ul>
                </div>
              </div>
              <div className="text-center mt-6">
                <p className="text-sm text-navy-600">
                  Don't see your location? <Link href="/contact" className="text-navy-900 hover:underline">Contact us</Link> for custom service options.
                </p>
              </div>
            </CardContent>
          </Card>
        </section>

        {/* CTA Section */}
        <div className="text-center">
          <h2 className="text-2xl font-serif font-bold text-navy-900 mb-4">
            Ready to Experience White-Glove Service?
          </h2>
          <p className="text-navy-700 mb-8 max-w-2xl mx-auto">
            Book your luxury move today and discover why discerning clients trust ToteTaxi 
            for their Manhattan-to-Hamptons transport needs.
          </p>
          <Link href="/book">
            <Button variant="primary" size="lg">
              Start Your Booking
            </Button>
          </Link>
        </div>
      </div>
    </MainLayout>
  );
}
```

# ==== src/app/staff/bookings/page.tsx ====

```
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { StaffLayout } from '@/components/staff/staff-layout';
import { BookingManagement } from '@/components/staff/booking-management';

export default function StaffBookingsPage() {
  const { isAuthenticated, isLoading } = useStaffAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push('/staff/login');
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading || !isAuthenticated) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <StaffLayout>
      <BookingManagement />
    </StaffLayout>
  );
}
```

# ==== src/app/staff/calendar/page.tsx ====

```
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { StaffLayout } from '@/components/staff/staff-layout';
import { Card, CardContent } from '@/components/ui/card';

export default function StaffCalendarPage() {
  const { isAuthenticated, isLoading } = useStaffAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push('/staff/login');
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading || !isAuthenticated) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <StaffLayout>
      <div className="space-y-6">
        <h1 className="text-2xl font-serif font-bold text-navy-900">
          Booking Calendar
        </h1>
        <Card>
          <CardContent className="p-6">
            <p className="text-navy-600">
              Calendar functionality will be implemented here. This page should now load without logging you out.
            </p>
          </CardContent>
        </Card>
      </div>
    </StaffLayout>
  );
}
```

# ==== src/app/staff/customers/page.tsx ====

```
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { StaffLayout } from '@/components/staff/staff-layout';
import { CustomerManagement } from '@/components/staff/customer-management';

export default function StaffCustomersPage() {
  const { isAuthenticated, isLoading } = useStaffAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push('/staff/login');
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading || !isAuthenticated) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <StaffLayout>
      <CustomerManagement />
    </StaffLayout>
  );
}
```

# ==== src/app/staff/dashboard/page.tsx ====

```
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { StaffLayout } from '@/components/staff/staff-layout';
import { StaffDashboardOverview } from '@/components/staff/staff-dashboard-overview';

export default function StaffDashboardPage() {
  const { isAuthenticated, isLoading } = useStaffAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push('/staff/login');
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading || !isAuthenticated) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <StaffLayout>
      <StaffDashboardOverview />
    </StaffLayout>
  );
}
```

# ==== src/app/staff/login/page.tsx ====

```
import { StaffLoginForm } from '@/components/staff/staff-login-form';

export default function StaffLoginPage() {
  return <StaffLoginForm />;
}
```

# ==== src/app/staff/logistics/page.tsx ====

```
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { StaffLayout } from '@/components/staff/staff-layout';
import { Card, CardContent } from '@/components/ui/card';

export default function StaffLogisticsPage() {
  const { isAuthenticated, isLoading } = useStaffAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push('/staff/login');
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading || !isAuthenticated) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <StaffLayout>
      <div className="space-y-6">
        <h1 className="text-2xl font-serif font-bold text-navy-900">
          Logistics Management
        </h1>
        <Card>
          <CardContent className="p-6">
            <p className="text-navy-600">
              Logistics and delivery coordination will be implemented here.
            </p>
          </CardContent>
        </Card>
      </div>
    </StaffLayout>
  );
}
```

# ==== src/app/staff/reports/page.tsx ====

```
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { StaffLayout } from '@/components/staff/staff-layout';
import { Card, CardContent } from '@/components/ui/card';

export default function StaffReportsPage() {
  const { isAuthenticated, isLoading } = useStaffAuthStore();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push('/staff/login');
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading || !isAuthenticated) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <StaffLayout>
      <div className="space-y-6">
        <h1 className="text-2xl font-serif font-bold text-navy-900">
          Reports & Analytics
        </h1>
        <Card>
          <CardContent className="p-6">
            <p className="text-navy-600">
              Business reports and analytics will be implemented here.
            </p>
          </CardContent>
        </Card>
      </div>
    </StaffLayout>
  );
}
```

# ==== src/app/terms/page.tsx ====

```
import { MainLayout } from '@/components/layout/main-layout';
import { Card, CardContent, CardHeader } from '@/components/ui/card';

export default function TermsPage() {
  return (
    <MainLayout>
      <div className="container mx-auto px-4 py-12 max-w-4xl">
        <div className="text-center mb-8">
          <h1 className="text-3xl font-serif font-bold text-navy-900 mb-4">
            Terms of Service
          </h1>
          <p className="text-navy-600">
            Effective Date: January 2024 â€¢ Last Updated: January 2024
          </p>
        </div>

        <Card variant="elevated">
          <CardContent className="space-y-6 text-navy-700">
            
            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">General Terms</h2>
              <p className="mb-4">
                <strong>PLEASE READ THESE TERMS AND CONDITIONS (THE "TERMS AND CONDITIONS") CAREFULLY.</strong> 
                By using Tote Taxi and/or the Tote Taxi Website, you are agreeing to be bound by these Terms and Conditions. 
                If you do not agree to the Terms and Conditions, do not use Tote Taxi's services or the Tote Taxi Website.
              </p>
              
              <p className="mb-4">
                Tote Taxi LLC ("Tote Taxi") may revise and update these Terms and Conditions at any time without notice. 
                Your continued usage of the Tote Taxi Website after any such change or update will mean you accept those changes or updates.
              </p>
              
              <p className="mb-4">
                Any aspect of the Tote Taxi Website may be changed, supplemented, deleted or updated without notice at the sole discretion of Tote Taxi.
              </p>
            </section>

            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">Service Limitations</h2>
              <p className="mb-4">
                <strong>Tote Taxi will not accept for transport luggage or packages in excess of $150.00 in value.</strong> 
                Tote Taxi's inadvertent acceptance of any luggage or package in excess of $150.00 shall not negate 
                Tote Taxi's limitation of liability stated herein.
              </p>
              
              <p className="mb-4">
                By delivering luggage or package to, or causing luggage or package to be delivered to, Tote Taxi for transport, 
                you represent that the luggage or package does not contain any illegal substances, any liquids, or any hazardous materials, 
                and does not exceed $150.00 in value.
              </p>
              
              <p className="mb-4">
                Tote Taxi reserves the right to reject any luggage or packages that are damaged or are improperly packed.
              </p>
            </section>

            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">Limitation of Liability</h2>
              <p className="mb-4">
                TO THE EXTENT NOT PROHIBITED BY APPLICABLE LAW, IN NO EVENT SHALL TOTE TAXI BE LIABLE FOR PERSONAL INJURY, 
                OR ANY INCIDENTAL, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES WHATSOEVER, REGARDLESS OF THE THEORY OF LIABILITY 
                (CONTRACT, TORT OR OTHERWISE) EVEN IF Tote Taxi HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
              </p>
              
              <p className="mb-4">
                In no event shall Tote Taxi's total liability to you for all damages (other than as may be required by applicable law 
                in cases involving personal injury) exceed $150.00.
              </p>
            </section>

            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">Intellectual Property</h2>
              <p className="mb-4">
                Any and all intellectual property rights associated with Tote Taxi and with the Tote Taxi Website and its contents 
                are the sole property of Tote Taxi, its affiliates or third parties.
              </p>
              
              <p className="mb-4">
                The Tote Taxi Website is protected by copyright and other laws in both the United States and other countries. 
                Elements of the Tote Taxi Website are also protected by trade dress, trade secret, unfair competition, 
                and other laws and may not be copied or imitated in whole or in part.
              </p>
            </section>

            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">Privacy</h2>
              <p className="mb-4">
                At all times your information will be treated in accordance with Tote Taxi's Privacy Policy, 
                which is incorporated by reference into these Terms and Conditions.
              </p>
              
              <p className="mb-4">
                You agree that Tote Taxi and its agents may collect, maintain, process and use diagnostic, technical, 
                usage and related information, that is gathered periodically to facilitate the provision of updates, 
                product support and other services to you related to Tote Taxi.
              </p>
            </section>

            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">Governing Law</h2>
              <p className="mb-4">
                Regardless of its place of negotiation, execution, or performance, you agree that these Terms and Conditions 
                are governed by and shall be construed in accordance with the internal substantive laws of the State of New York.
              </p>
              
              <p className="mb-4">
                Each party agrees to the exclusive jurisdiction of the state and federal courts in and for Suffolk County, 
                New York for any litigation or other dispute resolution relating in any way to these Terms and Conditions.
              </p>
            </section>

            <section>
              <h2 className="text-xl font-bold text-navy-900 mb-3">Contact Information</h2>
              <p className="mb-4">
                If you have any questions about these Terms of Service, please contact us at:
              </p>
              <div className="bg-cream-50 p-4 rounded-lg">
                <p className="font-medium text-navy-900">Tote Taxi LLC</p>
                <p>Email: legal@totetaxi.com</p>
                <p>Phone: (555) TOTE-TAXI</p>
              </div>
            </section>

          </CardContent>
        </Card>
      </div>
    </MainLayout>
  );
}
```

# ==== src/components/auth/index.ts ====

```

```

# ==== src/components/auth/login-form.tsx ====

```
// frontend/src/components/auth/login-form.tsx
'use client';

import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { useMutation } from '@tanstack/react-query';
import { useRouter } from 'next/navigation';
import { apiClient } from '@/lib/api-client';
import { useAuthStore } from '@/stores/auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import type { DjangoUser, CustomerProfile } from '@/types';

const loginSchema = z.object({
  email: z.string().email('Please enter a valid email address'),
  password: z.string().min(6, 'Password must be at least 6 characters'),
});

type LoginFormData = z.infer<typeof loginSchema>;

interface LoginResponse {
  message: string;
  user: DjangoUser;
  customer_profile: CustomerProfile;
  csrf_token: string;
}

export function LoginForm() {
  const router = useRouter();
  const { setAuth, setLoading } = useAuthStore();
  const [apiError, setApiError] = useState<string>('');
  const [debugInfo, setDebugInfo] = useState<any>(null);

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<LoginFormData>({
    resolver: zodResolver(loginSchema),
  });

  const loginMutation = useMutation({
    mutationFn: async (data: LoginFormData): Promise<LoginResponse> => {
      console.log('ðŸ” SENDING LOGIN REQUEST');
      console.log('ðŸ“¤ Request data:', data);
      console.log('ðŸŒ API Base URL:', apiClient.defaults.baseURL);
      console.log('ðŸª Request config:', {
        withCredentials: apiClient.defaults.withCredentials,
        headers: apiClient.defaults.headers
      });
      
      const response = await apiClient.post('/api/customer/auth/login/', data);
      
      console.log('ðŸ“¥ RAW RESPONSE:', {
        status: response.status,
        statusText: response.statusText,
        headers: response.headers,
        data: response.data
      });
      
      return response.data;
    },
    onSuccess: (data) => {
      console.log('ðŸŽ‰ LOGIN SUCCESS!');
      console.log('âœ… Response data:', JSON.stringify(data, null, 2));
      console.log('ðŸ‘¤ User data:', data.user);
      console.log('ðŸ“‹ Profile data:', data.customer_profile);
      
      setDebugInfo({
        success: true,
        response: data,
        timestamp: new Date().toISOString()
      });
      
      try {
        // Set auth with correct types
        setAuth(data.user, data.customer_profile);
        console.log('âœ… Auth state updated successfully');
        
        // Try to navigate
        console.log('ðŸš€ Attempting to navigate to dashboard...');
        router.push('/dashboard');
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : 'Unknown error in success handler';
        console.error('âŒ Error in onSuccess handler:', err);
        setApiError(`Success handler error: ${errorMessage}`);
      }
    },
    onError: (error: any) => {
      console.log('âŒ LOGIN ERROR');
      console.log('ðŸ“Š Error details:', {
        name: error.name,
        message: error.message,
        status: error.response?.status,
        statusText: error.response?.statusText,
        data: error.response?.data,
        headers: error.response?.headers,
        config: {
          url: error.config?.url,
          method: error.config?.method,
          data: error.config?.data
        }
      });
      
      setDebugInfo({
        success: false,
        error: {
          status: error.response?.status,
          data: error.response?.data,
          message: error.message
        },
        timestamp: new Date().toISOString()
      });
      
      const errorMessage = error.response?.data?.error || 
                          error.response?.data?.detail || 
                          error.response?.data?.message ||
                          'Login failed. Please check your credentials.';
      setApiError(errorMessage);
      setLoading(false);
    },
  });

  const onSubmit = async (data: LoginFormData) => {
    console.log('ðŸš€ FORM SUBMITTED');
    console.log('ðŸ“ Form data:', data);
    
    setApiError('');
    setDebugInfo(null);
    setLoading(true);
    
    try {
      loginMutation.mutate(data);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : 'Unknown submit error';
      console.error('âŒ Submit error:', err);
      setApiError(`Submit error: ${errorMessage}`);
      setLoading(false);
    }
  };

  return (
    <div className="w-full max-w-md mx-auto space-y-4">
      <Card variant="luxury">
        <CardHeader>
          <h2 className="text-2xl font-serif font-bold text-navy-900 text-center">
            Welcome Back
          </h2>
          <p className="text-navy-700 text-center">
            Sign in to your ToteTaxi account
          </p>
        </CardHeader>

        <CardContent>
          <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
            {/* Email Field */}
            <div>
              <label htmlFor="email" className="block text-sm font-medium text-navy-900 mb-1">
                Email Address
              </label>
              <Input
                id="email"
                type="email"
                {...register('email')}
                placeholder="your@email.com"
                className={errors.email ? 'border-red-500' : ''}
              />
              {errors.email && (
                <p className="text-red-600 text-sm mt-1">{errors.email.message}</p>
              )}
            </div>

            {/* Password Field */}
            <div>
              <label htmlFor="password" className="block text-sm font-medium text-navy-900 mb-1">
                Password
              </label>
              <Input
                id="password"
                type="password"
                {...register('password')}
                placeholder="Enter your password"
                className={errors.password ? 'border-red-500' : ''}
              />
              {errors.password && (
                <p className="text-red-600 text-sm mt-1">{errors.password.message}</p>
              )}
            </div>

            {/* API Error Display */}
            {apiError && (
              <div className="bg-red-50 border border-red-200 rounded-md p-3">
                <p className="text-red-700 text-sm">{apiError}</p>
              </div>
            )}

            {/* Submit Button */}
            <Button
              type="submit"
              variant="primary"
              size="lg"
              className="w-full"
              disabled={isSubmitting || loginMutation.isPending}
            >
              {isSubmitting || loginMutation.isPending ? 'Signing In...' : 'Sign In'}
            </Button>

            {/* Register Link */}
            <div className="text-center pt-4 border-t border-cream-200">
              <p className="text-sm text-navy-600">
                Don't have an account?{' '}
                <button
                  type="button"
                  onClick={() => router.push('/register')}
                  className="text-navy-900 hover:underline font-medium"
                >
                  Create Account
                </button>
              </p>
            </div>

            {/* Forgot Password */}
            <div className="text-center">
              <button
                type="button"
                className="text-sm text-navy-600 hover:text-navy-900 hover:underline"
                onClick={() => {
                  alert('Forgot password functionality coming soon!');
                }}
              >
                Forgot your password?
              </button>
            </div>
          </form>
        </CardContent>
      </Card>

      {/* Debug Information Panel */}
      {debugInfo && (
        <Card>
          <CardHeader>
            <h3 className="text-lg font-medium">Debug Information</h3>
          </CardHeader>
          <CardContent>
            <pre className="text-xs bg-gray-100 p-3 rounded overflow-auto max-h-64">
              {JSON.stringify(debugInfo, null, 2)}
            </pre>
          </CardContent>
        </Card>
      )}

      {/* Test Credentials Helper */}
      <Card>
        <CardContent>
          <p className="text-sm text-gray-600 text-center">
            Test with: mnraynor90@gmail.com / Dun3R0ad455@$$
          </p>
        </CardContent>
      </Card>
    </div>
  );
}
```

# ==== src/components/auth/register-form.tsx ====

```
// frontend/src/components/auth/register-form.tsx
'use client';

import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { useMutation } from '@tanstack/react-query';
import { useRouter } from 'next/navigation';
import { apiClient } from '@/lib/api-client';
import { useAuthStore } from '@/stores/auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import type { DjangoUser, CustomerProfile } from '@/types';

const registerSchema = z.object({
  first_name: z.string().min(1, 'First name is required').max(150, 'First name too long'),
  last_name: z.string().min(1, 'Last name is required').max(150, 'Last name too long'),
  email: z.string().email('Please enter a valid email address'),
  phone: z.string().optional(),
  password: z.string()
    .min(8, 'Password must be at least 8 characters')
    .regex(/[A-Z]/, 'Password must contain at least one uppercase letter')
    .regex(/[a-z]/, 'Password must contain at least one lowercase letter')
    .regex(/[0-9]/, 'Password must contain at least one number'),
  password_confirm: z.string().min(1, 'Please confirm your password'),
}).refine((data) => data.password === data.password_confirm, {
  message: "Passwords don't match",
  path: ["password_confirm"],
});

type RegisterFormData = z.infer<typeof registerSchema>;

interface RegisterResponse {
  message: string;
  user: DjangoUser;
  customer_profile: CustomerProfile;
  csrf_token: string;
}

export function RegisterForm() {
  const router = useRouter();
  const { setAuth, setLoading } = useAuthStore();
  const [apiError, setApiError] = useState<string>('');

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<RegisterFormData>({
    resolver: zodResolver(registerSchema),
  });

  const registerMutation = useMutation({
    mutationFn: async (data: RegisterFormData): Promise<RegisterResponse> => {
      console.log('ðŸ” SENDING REGISTRATION REQUEST');
      console.log('ðŸ“¤ Request data:', { ...data, password: '[HIDDEN]', password_confirm: '[HIDDEN]' });
      
      const response = await apiClient.post('/api/customer/auth/register/', data);
      
      console.log('ðŸ“¥ Registration response:', {
        status: response.status,
        message: response.data.message
      });
      
      return response.data;
    },
    onSuccess: (data) => {
      console.log('ðŸŽ‰ REGISTRATION SUCCESS!');
      console.log('ðŸ‘¤ New user:', data.user);
      
      try {
        setAuth(data.user, data.customer_profile);
        console.log('âœ… Auth state updated successfully');
        router.push('/dashboard?welcome=true');
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : 'Unknown error in success handler';
        console.error('âŒ Error in onSuccess handler:', err);
        setApiError(`Registration succeeded but login failed: ${errorMessage}`);
      }
    },
    onError: (error: any) => {
      console.log('âŒ REGISTRATION ERROR');
      console.log('ðŸ“Š Error details:', error.response?.data);
      
      let errorMessage = 'Registration failed. Please try again.';
      
      if (error.response?.data) {
        const errorData = error.response.data;
        
        // Handle field-specific errors
        if (typeof errorData === 'string') {
          errorMessage = errorData;
        } else if (errorData.email) {
          errorMessage = Array.isArray(errorData.email) 
            ? errorData.email[0] 
            : errorData.email;
        } else if (errorData.error) {
          errorMessage = errorData.error;
        } else if (errorData.detail) {
          errorMessage = errorData.detail;
        }
      }
      
      setApiError(errorMessage);
      setLoading(false);
    },
  });

  const onSubmit = async (data: RegisterFormData) => {
    console.log('ðŸš€ REGISTRATION FORM SUBMITTED');
    setApiError('');
    setLoading(true);
    
    try {
      registerMutation.mutate(data);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : 'Unknown submit error';
      console.error('âŒ Submit error:', err);
      setApiError(`Submit error: ${errorMessage}`);
      setLoading(false);
    }
  };

  return (
    <Card variant="luxury" className="w-full max-w-md mx-auto">
      <CardHeader>
        <h2 className="text-2xl font-serif font-bold text-navy-900 text-center">
          Create Your Account
        </h2>
        <p className="text-navy-700 text-center">
          Join ToteTaxi for faster booking and VIP benefits
        </p>
      </CardHeader>

      <CardContent>
        <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
          {/* First Name & Last Name Row */}
          <div className="grid grid-cols-2 gap-4">
            <div>
              <label htmlFor="first_name" className="block text-sm font-medium text-navy-900 mb-1">
                First Name *
              </label>
              <Input
                id="first_name"
                {...register('first_name')}
                placeholder="John"
                className={errors.first_name ? 'border-red-500' : ''}
              />
              {errors.first_name && (
                <p className="text-red-600 text-sm mt-1">{errors.first_name.message}</p>
              )}
            </div>
            
            <div>
              <label htmlFor="last_name" className="block text-sm font-medium text-navy-900 mb-1">
                Last Name *
              </label>
              <Input
                id="last_name"
                {...register('last_name')}
                placeholder="Smith"
                className={errors.last_name ? 'border-red-500' : ''}
              />
              {errors.last_name && (
                <p className="text-red-600 text-sm mt-1">{errors.last_name.message}</p>
              )}
            </div>
          </div>

          {/* Email Field */}
          <div>
            <label htmlFor="email" className="block text-sm font-medium text-navy-900 mb-1">
              Email Address *
            </label>
            <Input
              id="email"
              type="email"
              {...register('email')}
              placeholder="john@example.com"
              className={errors.email ? 'border-red-500' : ''}
            />
            {errors.email && (
              <p className="text-red-600 text-sm mt-1">{errors.email.message}</p>
            )}
          </div>

          {/* Phone Field */}
          <div>
            <label htmlFor="phone" className="block text-sm font-medium text-navy-900 mb-1">
              Phone Number
            </label>
            <Input
              id="phone"
              type="tel"
              {...register('phone')}
              placeholder="(555) 123-4567"
              className={errors.phone ? 'border-red-500' : ''}
            />
            {errors.phone && (
              <p className="text-red-600 text-sm mt-1">{errors.phone.message}</p>
            )}
            <p className="text-xs text-navy-600 mt-1">Optional - for booking updates</p>
          </div>

          {/* Password Field */}
          <div>
            <label htmlFor="password" className="block text-sm font-medium text-navy-900 mb-1">
              Password *
            </label>
            <Input
              id="password"
              type="password"
              {...register('password')}
              placeholder="Create a strong password"
              className={errors.password ? 'border-red-500' : ''}
            />
            {errors.password && (
              <p className="text-red-600 text-sm mt-1">{errors.password.message}</p>
            )}
          </div>

          {/* Confirm Password Field */}
          <div>
            <label htmlFor="password_confirm" className="block text-sm font-medium text-navy-900 mb-1">
              Confirm Password *
            </label>
            <Input
              id="password_confirm"
              type="password"
              {...register('password_confirm')}
              placeholder="Repeat your password"
              className={errors.password_confirm ? 'border-red-500' : ''}
            />
            {errors.password_confirm && (
              <p className="text-red-600 text-sm mt-1">{errors.password_confirm.message}</p>
            )}
          </div>

          {/* API Error Display */}
          {apiError && (
            <div className="bg-red-50 border border-red-200 rounded-md p-3">
              <p className="text-red-700 text-sm">{apiError}</p>
            </div>
          )}

          {/* Submit Button */}
          <Button
            type="submit"
            variant="primary"
            size="lg"
            className="w-full"
            disabled={isSubmitting || registerMutation.isPending}
          >
            {isSubmitting || registerMutation.isPending ? 'Creating Account...' : 'Create Account'}
          </Button>

          {/* Login Link */}
          <div className="text-center pt-4 border-t border-cream-200">
            <p className="text-sm text-navy-600">
              Already have an account?{' '}
              <button
                type="button"
                onClick={() => router.push('/login')}
                className="text-navy-900 hover:underline font-medium"
              >
                Sign In
              </button>
            </p>
          </div>

          {/* Terms Notice */}
          <div className="text-center">
            <p className="text-xs text-navy-600">
              By creating an account, you agree to our{' '}
              <a href="/terms" className="underline hover:text-navy-900">Terms of Service</a>
              {' '}and{' '}
              <a href="/privacy" className="underline hover:text-navy-900">Privacy Policy</a>
            </p>
          </div>
        </form>
      </CardContent>
    </Card>
  );
}
```

# ==== src/components/auth/user-menu.tsx ====

```
'use client';

import { useState, useRef } from 'react';
import { useRouter } from 'next/navigation';
import { useAuthStore } from '@/stores/auth-store';
import { useClickAway } from '@/hooks/use-click-away';
import { apiClient } from '@/lib/api-client';
import { 
  ChevronDownIcon, 
  UserIcon, 
  Cog6ToothIcon, 
  ArrowRightOnRectangleIcon,
  PlusIcon,
  BookOpenIcon
} from '@heroicons/react/24/outline';

interface UserMenuProps {
  variant?: 'header' | 'mobile';
}

export function UserMenu({ variant = 'header' }: UserMenuProps) {
  const { user, customerProfile, clearAuth } = useAuthStore();
  const [isOpen, setIsOpen] = useState(false);
  const router = useRouter();
  const dropdownRef = useRef<HTMLDivElement>(null);

  // Close dropdown when clicking outside
  useClickAway(dropdownRef, () => setIsOpen(false));

  const handleLogout = async () => {
    try {
      await apiClient.post('/api/customer/auth/logout/');
      clearAuth();
      router.push('/');
      setIsOpen(false);
    } catch (error) {
      console.error('Logout error:', error);
      clearAuth();
      router.push('/');
    }
  };

  const menuItems = [
    {
      label: 'Book a Move',
      icon: PlusIcon,
      onClick: () => {
        router.push('/book');
        setIsOpen(false);
      },
      primary: true
    },
    {
      label: 'Dashboard',
      icon: UserIcon,
      onClick: () => {
        router.push('/dashboard');
        setIsOpen(false);
      }
    },
    {
      label: 'Booking History',
      icon: BookOpenIcon,
      onClick: () => {
        router.push('/dashboard/bookings');
        setIsOpen(false);
      }
    },
    {
      label: 'Account Settings',
      icon: Cog6ToothIcon,
      onClick: () => {
        alert('Account settings coming soon!');
        setIsOpen(false);
      }
    },
    {
      label: 'Sign Out',
      icon: ArrowRightOnRectangleIcon,
      onClick: handleLogout,
      danger: true
    }
  ];

  if (!user) return null;

  if (variant === 'mobile') {
    return (
      <div className="space-y-2 pt-4 border-t border-gray-200">
        {/* User Info */}
        <div className="px-4 py-3 bg-gray-50 rounded-lg mx-4">
          <p className="font-medium text-navy-900">{user.first_name} {user.last_name}</p>
          <p className="text-sm text-navy-600">{user.email}</p>
          <div className="flex items-center gap-2 mt-2">
            {customerProfile?.is_vip && (
              <span className="inline-block px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full">
                VIP
              </span>
            )}
            {customerProfile && customerProfile.total_bookings > 0 && (
              <span className="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">
                {customerProfile.total_bookings} bookings
              </span>
            )}
          </div>
        </div>

        {/* Menu Items */}
        {menuItems.map((item) => {
          const Icon = item.icon;
          return (
            <button
              key={item.label}
              onClick={item.onClick}
              className={`w-full flex items-center px-4 py-3 text-left hover:bg-gray-50 transition-colors ${
                item.primary 
                  ? 'text-blue-600 hover:text-blue-700 font-medium' 
                  : item.danger 
                  ? 'text-red-600 hover:text-red-700' 
                  : 'text-navy-700 hover:text-navy-900'
              }`}
            >
              <Icon className="h-5 w-5 mr-3" />
              {item.label}
            </button>
          );
        })}
      </div>
    );
  }

  return (
    <div className="relative" ref={dropdownRef}>
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="flex items-center space-x-2 text-navy-700 hover:text-navy-900 transition-colors py-2 px-3 rounded-lg hover:bg-gray-50"
      >
        <div className="text-right">
          <div className="text-sm font-medium">{user.first_name}</div>
          {customerProfile?.is_vip && (
            <div className="text-xs text-yellow-600">VIP</div>
          )}
        </div>
        <ChevronDownIcon className={`h-4 w-4 transition-transform ${isOpen ? 'rotate-180' : ''}`} />
      </button>

      {isOpen && (
        <div className="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-50 border border-gray-200">
          <div className="py-1">
            {/* User Header */}
            <div className="px-4 py-3 border-b border-gray-100 bg-gray-50">
              <p className="font-medium text-navy-900">{user.first_name} {user.last_name}</p>
              <p className="text-sm text-navy-600">{user.email}</p>
              {customerProfile && (
                <div className="flex items-center gap-2 mt-2">
                  {customerProfile.is_vip && (
                    <span className="inline-block px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full">
                      VIP
                    </span>
                  )}
                  {customerProfile.total_spent_dollars > 0 && (
                    <span className="text-xs text-navy-600">
                      ${customerProfile.total_spent_dollars} spent
                    </span>
                  )}
                </div>
              )}
            </div>

            {/* Menu Items */}
            {menuItems.map((item, index) => {
              const Icon = item.icon;
              return (
                <button
                  key={item.label}
                  onClick={item.onClick}
                  className={`w-full flex items-center px-4 py-2 text-left hover:bg-gray-50 transition-colors ${
                    item.primary 
                      ? 'text-blue-600 hover:text-blue-700 font-medium' 
                      : item.danger 
                      ? 'text-red-600 hover:text-red-700' 
                      : 'text-navy-700 hover:text-navy-900'
                  } ${index === menuItems.length - 1 ? 'border-t border-gray-100 mt-1' : ''}`}
                >
                  <Icon className="h-5 w-5 mr-3" />
                  {item.label}
                </button>
              );
            })}
          </div>
        </div>
      )}
    </div>
  );
}
```

# ==== src/components/booking/address-step.tsx ====

```
// frontend/src/components/booking/address-step.tsx
'use client';

import { useBookingWizard, type BookingAddress } from '@/stores/booking-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

const STATES = [
  { value: 'NY', label: 'New York' },
  { value: 'CT', label: 'Connecticut' },
  { value: 'NJ', label: 'New Jersey' },
];

interface AddressFormProps {
  title: string;
  address: BookingAddress | undefined;
  onAddressChange: (address: BookingAddress) => void;
  errors: Record<string, string>;
}

function AddressForm({ title, address, onAddressChange, errors }: AddressFormProps) {
  const handleFieldChange = (field: keyof BookingAddress, value: string) => {
    onAddressChange({
      ...address,
      [field]: value
    } as BookingAddress);
  };

  return (
    <Card variant="elevated">
      <CardHeader>
        <h3 className="text-lg font-medium text-navy-900">{title}</h3>
      </CardHeader>
      
      <CardContent>
        <div className="space-y-4">
          <Input
            label="Street Address"
            value={address?.address_line_1 || ''}
            onChange={(e) => handleFieldChange('address_line_1', e.target.value)}
            error={errors.address_line_1}
            placeholder="123 Main Street"
            required
          />
          
          <Input
            label="Apartment, Suite, etc. (Optional)"
            value={address?.address_line_2 || ''}
            onChange={(e) => handleFieldChange('address_line_2', e.target.value)}
            placeholder="Apt 4B, Suite 200"
          />
          
          <div className="grid grid-cols-2 gap-4">
            <Input
              label="City"
              value={address?.city || ''}
              onChange={(e) => handleFieldChange('city', e.target.value)}
              error={errors.city}
              placeholder="New York"
              required
            />
            
            <div>
              <label className="block text-sm font-medium text-navy-900 mb-1">
                State <span className="text-red-500">*</span>
              </label>
              <select
                value={address?.state || ''}
                onChange={(e) => handleFieldChange('state', e.target.value as 'NY' | 'CT' | 'NJ')}
                className="w-full px-4 py-3 text-base border border-gray-300 rounded-md shadow-sm focus:border-navy-500 focus:ring-navy-500 text-gray-900 bg-white"
                required
              >
                <option value="" className="text-gray-400">Select State</option>
                {STATES.map(state => (
                  <option key={state.value} value={state.value} className="text-gray-900">
                    {state.label}
                  </option>
                ))}
              </select>
            </div>
          </div>
          
          <Input
            label="ZIP Code"
            value={address?.zip_code || ''}
            onChange={(e) => handleFieldChange('zip_code', e.target.value)}
            error={errors.zip_code}
            placeholder="10001"
            required
          />
        </div>
      </CardContent>
    </Card>
  );
}

export function AddressStep() {
  const { bookingData, updateBookingData, nextStep, errors, setError, clearError } = useBookingWizard();

  const handlePickupChange = (address: BookingAddress) => {
    updateBookingData({ pickup_address: address });
    // Clear errors when user starts typing
    if (address.address_line_1) clearError('pickup_address');
    if (address.city) clearError('pickup_city');
    if (address.zip_code) clearError('pickup_zip');
  };

  const handleDeliveryChange = (address: BookingAddress) => {
    updateBookingData({ delivery_address: address });
    // Clear errors when user starts typing
    if (address.address_line_1) clearError('delivery_address');
    if (address.city) clearError('delivery_city');
    if (address.zip_code) clearError('delivery_zip');
  };

  const handleContinue = () => {
    let hasErrors = false;

    // Validate pickup address
    if (!bookingData.pickup_address?.address_line_1) {
      setError('pickup_address', 'Pickup address is required');
      hasErrors = true;
    }
    if (!bookingData.pickup_address?.city) {
      setError('pickup_city', 'City is required');
      hasErrors = true;
    }
    if (!bookingData.pickup_address?.state) {
      setError('pickup_state', 'State is required');
      hasErrors = true;
    }
    if (!bookingData.pickup_address?.zip_code) {
      setError('pickup_zip', 'ZIP code is required');
      hasErrors = true;
    }

    // Validate delivery address
    if (!bookingData.delivery_address?.address_line_1) {
      setError('delivery_address', 'Delivery address is required');
      hasErrors = true;
    }
    if (!bookingData.delivery_address?.city) {
      setError('delivery_city', 'City is required');
      hasErrors = true;
    }
    if (!bookingData.delivery_address?.state) {
      setError('delivery_state', 'State is required');
      hasErrors = true;
    }
    if (!bookingData.delivery_address?.zip_code) {
      setError('delivery_zip', 'ZIP code is required');
      hasErrors = true;
    }

    if (!hasErrors) {
      nextStep();
    }
  };

  const canContinue = 
    bookingData.pickup_address?.address_line_1 &&
    bookingData.pickup_address?.city &&
    bookingData.pickup_address?.state &&
    bookingData.pickup_address?.zip_code &&
    bookingData.delivery_address?.address_line_1 &&
    bookingData.delivery_address?.city &&
    bookingData.delivery_address?.state &&
    bookingData.delivery_address?.zip_code;

  return (
    <div className="space-y-6">
      {/* Instructions */}
      <div className="text-center py-4">
        <p className="text-navy-700">
          Where should we pick up and deliver your items?
        </p>
        <p className="text-sm text-navy-600 mt-1">
          We service Manhattan, Brooklyn, the Hamptons, and surrounding areas.
        </p>
      </div>

      {/* Pickup Address */}
      <AddressForm
        title="Pickup Address"
        address={bookingData.pickup_address}
        onAddressChange={handlePickupChange}
        errors={{
          address_line_1: errors.pickup_address || '',
          city: errors.pickup_city || '',
          state: errors.pickup_state || '',
          zip_code: errors.pickup_zip || ''
        }}
      />

      {/* Delivery Address */}
      <AddressForm
        title="Delivery Address"
        address={bookingData.delivery_address}
        onAddressChange={handleDeliveryChange}
        errors={{
          address_line_1: errors.delivery_address || '',
          city: errors.delivery_city || '',
          state: errors.delivery_state || '',
          zip_code: errors.delivery_zip || ''
        }}
      />

      {/* Special Instructions */}
      <Card variant="default">
        <CardContent>
          <label className="block text-sm font-medium text-navy-900 mb-2">
            Special Instructions (Optional)
          </label>
          <textarea
            value={bookingData.special_instructions || ''}
            onChange={(e) => updateBookingData({ special_instructions: e.target.value })}
            placeholder="Any special delivery instructions, building access codes, or notes for our team..."
            rows={3}
            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-navy-500 focus:border-navy-500 text-gray-900 placeholder:text-gray-400 bg-white"
          />
          <p className="text-sm text-navy-600 mt-1">
            Include building access codes, doorman instructions, or any special handling requests.
          </p>
        </CardContent>
      </Card>

      {/* Continue Button */}
      <div className="flex justify-end pt-4">
        <Button
          onClick={handleContinue}
          disabled={!canContinue}
          size="lg"
        >
          Continue to Your Info â†’
        </Button>
      </div>
    </div>
  );
}
```

# ==== src/components/booking/auth-choice-step.tsx ====

```
'use client';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useAuthStore } from '@/stores/auth-store';
import { useBookingWizard } from '@/stores/booking-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

export function AuthChoiceStep() {
  const [mode, setMode] = useState<'guest' | 'login' | 'register' | null>(null);
  const [loginData, setLoginData] = useState({ email: '', password: '' });
  const [registerData, setRegisterData] = useState({
    first_name: '', last_name: '', email: '', password: '', phone: ''
  });
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState('');

  const { login, register } = useAuthStore();
  const { nextStep, initializeForUser } = useBookingWizard();
  const router = useRouter();

  const handleGuestContinue = () => {
    initializeForUser('guest', true);
    nextStep();
  };

  const handleLogin = async () => {
    setIsLoading(true);
    setError('');
    
    try {
      const result = await login(loginData.email, loginData.password);
      if (result.success) {
        initializeForUser(result.user?.id?.toString(), false);
        nextStep();
      } else {
        setError(result.error || 'Login failed');
      }
    } catch (err) {
      setError('Login failed. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  const handleRegister = async () => {
    setIsLoading(true);
    setError('');
    
    try {
      const result = await register({
        email: registerData.email,
        password: registerData.password,
        first_name: registerData.first_name,
        last_name: registerData.last_name,
        phone: registerData.phone
      });
      
      if (result.success) {
        // Auto-login after registration
        const loginResult = await login(registerData.email, registerData.password);
        if (loginResult.success) {
          initializeForUser(loginResult.user?.id?.toString(), false);
          nextStep();
        }
      } else {
        setError(result.error || 'Registration failed');
      }
    } catch (err) {
      setError('Registration failed. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  if (!mode) {
    return (
      <div className="space-y-6">
        <div className="text-center">
          <h3 className="text-lg font-medium text-navy-900 mb-2">How would you like to continue?</h3>
          <p className="text-navy-700">Choose your preferred booking method</p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {/* Guest Option */}
          <Card className="cursor-pointer hover:ring-2 hover:ring-navy-500 transition-all">
            <CardContent className="p-6 text-center">
              <div className="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg className="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <h4 className="font-medium text-navy-900 mb-2">Continue as Guest</h4>
              <p className="text-sm text-navy-700 mb-4">Quick checkout without creating an account</p>
              <Button 
                variant="outline" 
                onClick={handleGuestContinue}
                className="w-full"
              >
                Continue as Guest
              </Button>
            </CardContent>
          </Card>

          {/* Login Option */}
          <Card className="cursor-pointer hover:ring-2 hover:ring-navy-500 transition-all">
            <CardContent className="p-6 text-center">
              <div className="w-12 h-12 bg-navy-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg className="w-6 h-6 text-navy-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
                </svg>
              </div>
              <h4 className="font-medium text-navy-900 mb-2">Sign In</h4>
              <p className="text-sm text-navy-700 mb-4">Access your saved addresses and booking history</p>
              <Button 
                variant="outline" 
                onClick={() => setMode('login')}
                className="w-full"
              >
                Sign In
              </Button>
            </CardContent>
          </Card>

          {/* Register Option */}
          <Card className="cursor-pointer hover:ring-2 hover:ring-navy-500 transition-all">
            <CardContent className="p-6 text-center">
              <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg className="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
                </svg>
              </div>
              <h4 className="font-medium text-navy-900 mb-2">Create Account</h4>
              <p className="text-sm text-navy-700 mb-4">Save preferences and earn VIP benefits</p>
              <Button 
                variant="primary" 
                onClick={() => setMode('register')}
                className="w-full"
              >
                Create Account
              </Button>
            </CardContent>
          </Card>
        </div>
      </div>
    );
  }

  if (mode === 'login') {
    return (
      <div className="space-y-6">
        <div className="flex items-center justify-between">
          <h3 className="text-lg font-medium text-navy-900">Sign In to Your Account</h3>
          <Button variant="ghost" onClick={() => setMode(null)}>â† Back</Button>
        </div>

        {error && (
          <div className="bg-red-50 border border-red-200 rounded-md p-4">
            <p className="text-red-800 text-sm">{error}</p>
          </div>
        )}

        <div className="space-y-4">
          <Input
            label="Email"
            type="email"
            value={loginData.email}
            onChange={(e) => setLoginData(prev => ({ ...prev, email: e.target.value }))}
            placeholder="your@email.com"
            required
          />
          
          <Input
            label="Password"
            type="password"
            value={loginData.password}
            onChange={(e) => setLoginData(prev => ({ ...prev, password: e.target.value }))}
            placeholder="Your password"
            required
          />
        </div>

        <div className="flex gap-3">
          <Button 
            variant="primary" 
            onClick={handleLogin}
            disabled={isLoading || !loginData.email || !loginData.password}
            className="flex-1"
          >
            {isLoading ? 'Signing In...' : 'Sign In & Continue'}
          </Button>
          <Button 
            variant="outline" 
            onClick={handleGuestContinue}
            className="flex-1"
          >
            Continue as Guest Instead
          </Button>
        </div>
      </div>
    );
  }

  if (mode === 'register') {
    return (
      <div className="space-y-6">
        <div className="flex items-center justify-between">
          <h3 className="text-lg font-medium text-navy-900">Create Your Account</h3>
          <Button variant="ghost" onClick={() => setMode(null)}>â† Back</Button>
        </div>

        {error && (
          <div className="bg-red-50 border border-red-200 rounded-md p-4">
            <p className="text-red-800 text-sm">{error}</p>
          </div>
        )}

        <div className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <Input
              label="First Name"
              value={registerData.first_name}
              onChange={(e) => setRegisterData(prev => ({ ...prev, first_name: e.target.value }))}
              placeholder="John"
              required
            />
            
            <Input
              label="Last Name"
              value={registerData.last_name}
              onChange={(e) => setRegisterData(prev => ({ ...prev, last_name: e.target.value }))}
              placeholder="Doe"
              required
            />
          </div>
          
          <Input
            label="Email"
            type="email"
            value={registerData.email}
            onChange={(e) => setRegisterData(prev => ({ ...prev, email: e.target.value }))}
            placeholder="your@email.com"
            required
          />
          
          <Input
            label="Phone"
            type="tel"
            value={registerData.phone}
            onChange={(e) => setRegisterData(prev => ({ ...prev, phone: e.target.value }))}
            placeholder="(555) 123-4567"
          />
          
          <Input
            label="Password"
            type="password"
            value={registerData.password}
            onChange={(e) => setRegisterData(prev => ({ ...prev, password: e.target.value }))}
            placeholder="Create a secure password"
            required
          />
        </div>

        <div className="flex gap-3">
          <Button 
            variant="primary" 
            onClick={handleRegister}
            disabled={isLoading || !registerData.email || !registerData.password || !registerData.first_name || !registerData.last_name}
            className="flex-1"
          >
            {isLoading ? 'Creating Account...' : 'Create Account & Continue'}
          </Button>
          <Button 
            variant="outline" 
            onClick={handleGuestContinue}
            className="flex-1"
          >
            Continue as Guest Instead
          </Button>
        </div>
      </div>
    );
  }

  return null;
}
```

# ==== src/components/booking/booking-wizard.tsx ====

```
'use client';
import { useEffect, useState } from 'react';
import { useRouter } from 'next/navigation';
import { useBookingWizard } from '@/stores/booking-store';
import { useAuthStore } from '@/stores/auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { AuthChoiceStep } from './auth-choice-step';
import { ServiceSelectionStep } from './service-selection-step';
import { DateTimeStep } from './date-time-step';
import { AddressStep } from './address-step';
import { CustomerInfoStep } from './customer-info-step';
import { ReviewPaymentStep } from './review-payment-step';

const STEPS = [
  { number: 0, title: 'Get Started', component: AuthChoiceStep },
  { number: 1, title: 'Select Service', component: ServiceSelectionStep },
  { number: 2, title: 'Date & Time', component: DateTimeStep },
  { number: 3, title: 'Addresses', component: AddressStep },
  { number: 4, title: 'Your Info', component: CustomerInfoStep },
  { number: 5, title: 'Review & Pay', component: ReviewPaymentStep },
];

interface BookingWizardProps {
  onComplete?: () => void;
}

export function BookingWizard({ onComplete }: BookingWizardProps) {
  const [mounted, setMounted] = useState(false);
  const {
    currentStep,
    nextStep,
    previousStep,
    canProceedToStep,
    resetWizard,
    initializeForUser,
    isGuestMode,
    isBookingComplete,
    completedBookingNumber
  } = useBookingWizard();
  
  const { isAuthenticated, user, logout, clearSessionIfIncognito } = useAuthStore();

  // Fix hydration issue
  useEffect(() => {
    setMounted(true);
  }, []);

  // Handle booking completion
  useEffect(() => {
    if (isBookingComplete && completedBookingNumber) {
      // Show success message for a moment, then close
      setTimeout(() => {
        if (onComplete) {
          onComplete();
        }
      }, 2000);
    }
  }, [isBookingComplete, completedBookingNumber, onComplete]);

  // Check for incognito/fresh sessions
  useEffect(() => {
    if (!mounted) return;
    clearSessionIfIncognito();
  }, [mounted, clearSessionIfIncognito]);

  // Initialize for user but DON'T auto-skip auth step
  useEffect(() => {
    if (!mounted) return;
    
    if (isAuthenticated && user?.id) {
      initializeForUser(user.id.toString(), false);
    } else {
      // Always start at step 0 for guests/new sessions
      initializeForUser('guest', true);
    }
  }, [mounted, user?.id, isAuthenticated, initializeForUser]);

  if (!mounted) {
    return (
      <div className="flex items-center justify-center p-8">
        <div className="text-navy-900">Loading...</div>
      </div>
    );
  }

  // Show completion screen
  if (isBookingComplete && completedBookingNumber) {
    return (
      <div className="text-center py-12">
        <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg className="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
          </svg>
        </div>
        <h3 className="text-xl font-serif font-bold text-navy-900 mb-2">
          Booking Confirmed!
        </h3>
        <p className="text-navy-700 mb-4">
          Your booking {completedBookingNumber} has been created successfully.
        </p>
        <p className="text-sm text-navy-600">
          You'll receive a confirmation email shortly.
        </p>
      </div>
    );
  }

  const CurrentStepComponent = STEPS.find(step => step.number === currentStep)?.component;

  // Get display steps (skip customer info for authenticated users, hide auth step from progress)
  const getDisplaySteps = () => {
    let steps = STEPS.slice(1); // Remove auth choice step from display
    
    if (!isGuestMode && isAuthenticated) {
      steps = steps.filter(step => step.number !== 4); // Remove customer info step
    }
    
    return steps.map((step, index) => ({
      ...step,
      displayNumber: index + 1,
      actualStep: step.number
    }));
  };

  const displaySteps = getDisplaySteps();
  const maxSteps = isGuestMode ? 5 : 4;

  const handleStartOver = () => {
    logout();
    resetWizard();
  };

  const getStepTitle = () => {
    const step = STEPS.find(s => s.number === currentStep);
    return step?.title || 'Unknown Step';
  };

  const getCurrentDisplayStep = () => {
    if (currentStep === 0) return 0;
    if (!isGuestMode && currentStep > 4) return currentStep - 1;
    return currentStep;
  };

  return (
    <div className="bg-gradient-to-br from-cream-50 to-cream-100 p-8 min-h-full">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-3xl font-serif font-bold text-navy-900 mb-2">
            Book Your Luxury Move
          </h1>
          <p className="text-navy-700">
            From Manhattan to the Hamptons with premium care
          </p>
          {isAuthenticated && currentStep > 0 && (
            <p className="text-sm text-green-600 mt-2">
              âœ“ Logged in as {user?.first_name} {user?.last_name}
            </p>
          )}
        </div>

        {/* Progress Steps - Only show if past auth step */}
        {currentStep > 0 && (
          <div className="mb-8">
            <div className="flex items-center justify-between">
              {displaySteps.map((step, index) => (
                <div key={step.actualStep} className="flex items-center">
                  <div className={`
                    w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium
                    ${currentStep === step.actualStep 
                      ? 'bg-navy-900 text-white' 
                      : currentStep > step.actualStep
                      ? 'bg-green-500 text-white'
                      : 'bg-gray-200 text-gray-500'
                    }
                  `}>
                    {currentStep > step.actualStep ? 'âœ“' : step.displayNumber}
                  </div>
                  
                  <span className={`
                    ml-2 text-sm font-medium
                    ${currentStep === step.actualStep ? 'text-navy-900' : 'text-navy-600'}
                  `}>
                    {step.title}
                  </span>
                  
                  {index < displaySteps.length - 1 && (
                    <div className={`
                      h-0.5 w-12 mx-4
                      ${currentStep > step.actualStep ? 'bg-green-500' : 'bg-gray-200'}
                    `} />
                  )}
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Main Content */}
        <Card variant="elevated" className="mb-8">
          <CardHeader>
            <h2 className="text-xl font-serif font-bold text-navy-900">
              {currentStep === 0 ? 'Get Started' : `Step ${getCurrentDisplayStep()}: ${getStepTitle()}`}
            </h2>
          </CardHeader>
          <CardContent>
            {CurrentStepComponent && <CurrentStepComponent />}
          </CardContent>
        </Card>

        {/* Navigation - Only show if past auth step */}
        {currentStep > 0 && (
          <div className="flex justify-between items-center">
            <div>
              {currentStep > 1 && (
                <Button 
                  variant="outline" 
                  onClick={previousStep}
                  className="mr-4"
                >
                  â† Previous
                </Button>
              )}
              <Button 
                variant="ghost" 
                onClick={handleStartOver}
                className="text-navy-600"
              >
                Start Over
              </Button>
            </div>
            
            <div>
              {currentStep < maxSteps && canProceedToStep(currentStep + 1) && (
                <Button 
                  variant="primary" 
                  onClick={nextStep}
                >
                  Continue â†’
                </Button>
              )}
            </div>
            </div>
          )}
        </div>
      </div>
    );
  }
```

# ==== src/components/booking/customer-info-step.tsx ====

```
// frontend/src/components/booking/customer-info-step.tsx
'use client';

import { useBookingWizard } from '@/stores/booking-store';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

export function CustomerInfoStep() {
  const { bookingData, updateBookingData, nextStep, errors, setError, clearError } = useBookingWizard();

  const handleFieldChange = (field: string, value: string) => {
    updateBookingData({
      customer_info: {
        first_name: bookingData.customer_info?.first_name || '',
        last_name: bookingData.customer_info?.last_name || '',
        email: bookingData.customer_info?.email || '',
        phone: bookingData.customer_info?.phone || '',
        ...bookingData.customer_info,
        [field]: value
      }
    });
    clearError(field);
  };

  const validateAndContinue = () => {
    let hasErrors = false;

    // Validate required fields
    if (!bookingData.customer_info?.first_name) {
      setError('first_name', 'First name is required');
      hasErrors = true;
    }
    if (!bookingData.customer_info?.last_name) {
      setError('last_name', 'Last name is required');
      hasErrors = true;
    }
    if (!bookingData.customer_info?.email) {
      setError('email', 'Email is required');
      hasErrors = true;
    } else if (!/\S+@\S+\.\S+/.test(bookingData.customer_info.email)) {
      setError('email', 'Please enter a valid email address');
      hasErrors = true;
    }
    if (!bookingData.customer_info?.phone) {
      setError('phone', 'Phone number is required');
      hasErrors = true;
    } else if (!/^[\+]?[1]?[-\s\.]?[\(]?[0-9]{3}[\)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4}$/.test(bookingData.customer_info.phone)) {
      setError('phone', 'Please enter a valid phone number');
      hasErrors = true;
    }

    if (!hasErrors) {
      nextStep();
    }
  };

  const canContinue = 
    bookingData.customer_info?.first_name &&
    bookingData.customer_info?.last_name &&
    bookingData.customer_info?.email &&
    bookingData.customer_info?.phone;

  return (
    <div className="space-y-6">
      {/* Information Card */}
      <div className="text-center py-4">
        <h3 className="text-lg font-medium text-navy-900 mb-2">Contact Information</h3>
        <p className="text-navy-700">
          We'll use this information to coordinate your pickup and delivery.
        </p>
      </div>

      {/* Customer Info Form */}
      <Card variant="elevated">
        <CardContent>
          <div className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="First Name"
                value={bookingData.customer_info?.first_name || ''}
                onChange={(e) => handleFieldChange('first_name', e.target.value)}
                error={errors.first_name}
                placeholder="John"
                required
              />
              
              <Input
                label="Last Name"
                value={bookingData.customer_info?.last_name || ''}
                onChange={(e) => handleFieldChange('last_name', e.target.value)}
                error={errors.last_name}
                placeholder="Smith"
                required
              />
            </div>
            
            <Input
              label="Email Address"
              type="email"
              value={bookingData.customer_info?.email || ''}
              onChange={(e) => handleFieldChange('email', e.target.value)}
              error={errors.email}
              placeholder="john.smith@email.com"
              helper="We'll send confirmation and tracking updates to this email"
              required
            />
            
            <Input
              label="Phone Number"
              type="tel"
              value={bookingData.customer_info?.phone || ''}
              onChange={(e) => handleFieldChange('phone', e.target.value)}
              error={errors.phone}
              placeholder="(555) 123-4567"
              helper="For pickup and delivery coordination"
              required
            />
          </div>
        </CardContent>
      </Card>

      {/* Privacy Notice */}
      <Card variant="default" className="border-gold-200 bg-gold-50">
        <CardContent>
          <div className="flex items-start">
            <div className="text-gold-600 mr-3 mt-1">ðŸ”’</div>
            <div>
              <h4 className="font-medium text-navy-900 mb-1">Privacy & Security</h4>
              <p className="text-sm text-navy-700">
                Your information is encrypted and secure. We'll only use it to provide your ToteTaxi service 
                and send important updates about your booking. We never sell or share your personal data.
              </p>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* VIP Program Signup */}
      <Card variant="luxury">
        <CardContent>
          <div className="text-center">
            <h4 className="font-serif text-lg font-bold text-navy-900 mb-2">
              Join ToteTaxi VIP
            </h4>
            <p className="text-navy-700 text-sm mb-4">
              Get priority scheduling, exclusive pricing, and seasonal storage benefits.
            </p>
            <label className="flex items-center justify-center">
              <input
                type="checkbox"
                className="mr-2"
                // This could be stored in booking data if you want to track VIP signups
              />
              <span className="text-sm text-navy-900">
                Yes, I want to join ToteTaxi VIP (free to join)
              </span>
            </label>
          </div>
        </CardContent>
      </Card>

      {/* Account Creation Notice */}
      <div className="text-center text-sm text-navy-600">
        <p>
          Already have an account? 
          <button className="text-navy-900 hover:underline ml-1">
            Sign in for faster checkout
          </button>
        </p>
      </div>

      {/* Continue Button */}
      <div className="flex justify-end">
        <Button 
          variant="primary" 
          onClick={validateAndContinue}
          disabled={!canContinue}
        >
          Continue to Review & Payment â†’
        </Button>
      </div>
    </div>
  );
}
```

# ==== src/components/booking/date-time-step.tsx ====

```
// frontend/src/components/booking/date-time-step.tsx
'use client';

import { useState, useEffect } from 'react';
import { useQuery, useMutation } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { useBookingWizard } from '@/stores/booking-store';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

interface AvailabilityDay {
  date: string;
  available: boolean;
  is_weekend: boolean;
  specialty_items_allowed: boolean;
  capacity_used: number;
  max_capacity: number;
  surcharges: Array<{
    name: string;
    type: string;
    description: string;
  }>;
}

interface PricingPreview {
  service_type: string;
  pricing: {
    base_price_dollars: number;
    surcharge_dollars: number;
    coi_fee_dollars: number;
    organizing_total_dollars: number;
    total_price_dollars: number;
  };
  details: any;
  pickup_date: string;
}

type PickupTime = 'morning' | 'afternoon' | 'evening';

export function DateTimeStep() {
  const { bookingData, updateBookingData, nextStep } = useBookingWizard();
  const [selectedDate, setSelectedDate] = useState<string>(bookingData.pickup_date || '');
  const [selectedTime, setSelectedTime] = useState<PickupTime>(bookingData.pickup_time || 'morning');

  // Get calendar availability
  const { data: availability } = useQuery({
    queryKey: ['availability', 'calendar'],
    queryFn: async () => {
      const response = await apiClient.get('/api/public/availability/');
      return response.data.availability as AvailabilityDay[];
    }
  });

  // Get pricing preview
  const pricingMutation = useMutation({
    mutationFn: async (): Promise<PricingPreview> => {
      const response = await apiClient.post('/api/public/pricing-preview/', {
        service_type: bookingData.service_type,
        mini_move_package_id: bookingData.mini_move_package_id,
        include_packing: bookingData.include_packing,
        include_unpacking: bookingData.include_unpacking,
        standard_delivery_item_count: bookingData.standard_delivery_item_count,
        is_same_day_delivery: bookingData.is_same_day_delivery,
        specialty_item_ids: bookingData.specialty_item_ids,
        pickup_date: selectedDate,
        coi_required: bookingData.coi_required || false
      });
      return response.data;
    }
  });

  // Update pricing when date/service changes
  useEffect(() => {
    if (selectedDate && bookingData.service_type) {
      pricingMutation.mutate();
    }
  }, [selectedDate, bookingData.service_type, bookingData.mini_move_package_id, bookingData.include_packing, bookingData.include_unpacking, bookingData.standard_delivery_item_count, bookingData.is_same_day_delivery]);

  const handleDateSelect = (date: string) => {
    setSelectedDate(date);
    updateBookingData({ pickup_date: date });
  };

  const handleTimeSelect = (time: PickupTime) => {
    setSelectedTime(time);
    updateBookingData({ pickup_time: time });
  };

  const handleContinue = () => {
    // Store pricing data
    if (pricingMutation.data?.pricing) {
      updateBookingData({ pricing_data: pricingMutation.data.pricing });
    }
    nextStep();
  };

  // Simple calendar view - next 30 days
  const getNext30Days = () => {
    const days = [];
    const today = new Date();
    for (let i = 0; i < 30; i++) {
      const date = new Date(today);
      date.setDate(today.getDate() + i);
      days.push(date);
    }
    return days;
  };

  const formatDate = (date: Date) => {
    return date.toISOString().split('T')[0];
  };

  const getDayInfo = (date: Date) => {
    const dateStr = formatDate(date);
    return availability?.find(day => day.date === dateStr);
  };

  const canContinue = selectedDate && selectedTime;

  return (
    <div className="space-y-6">
      {/* Calendar */}
      <div>
        <h3 className="text-lg font-medium text-navy-900 mb-4">Select Date</h3>
        <div className="grid grid-cols-7 gap-2">
          {getNext30Days().map((date) => {
            const dateStr = formatDate(date);
            const dayInfo = getDayInfo(date);
            const isSelected = selectedDate === dateStr;
            const isAvailable = dayInfo?.available !== false;
            const hasSurcharge = dayInfo?.surcharges && dayInfo.surcharges.length > 0;

            return (
              <button
                key={dateStr}
                onClick={() => isAvailable && handleDateSelect(dateStr)}
                disabled={!isAvailable}
                className={`
                  p-2 text-sm rounded-md border transition-all min-h-[60px] flex flex-col items-center justify-center
                  ${isSelected 
                    ? 'bg-navy-900 text-white border-navy-900' 
                    : isAvailable
                    ? 'bg-white text-navy-900 border-gray-200 hover:border-navy-300 hover:bg-navy-50'
                    : 'bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed'
                  }
                `}
              >
                <div className="font-medium">{date.getDate()}</div>
                <div className="text-xs opacity-75">
                  {date.toLocaleDateString('en-US', { weekday: 'short' })}
                </div>
                {hasSurcharge && (
                  <div className="text-xs text-orange-600 mt-1">â€¢</div>
                )}
              </button>
            );
          })}
        </div>
        
        {/* Legend */}
        <div className="flex items-center justify-center space-x-4 mt-3 text-sm">
          <div className="flex items-center">
            <div className="w-3 h-3 bg-white border border-gray-200 rounded mr-2"></div>
            <span className="text-navy-600">Available</span>
          </div>
          <div className="flex items-center">
            <div className="w-3 h-3 bg-gray-100 rounded mr-2"></div>
            <span className="text-navy-600">Unavailable</span>
          </div>
          <div className="flex items-center">
            <div className="w-3 h-3 bg-orange-100 rounded mr-2"></div>
            <span className="text-navy-600">Surcharge applies</span>
          </div>
        </div>
      </div>

      {/* Selected Date Info */}
      {selectedDate && (
        <Card variant="default">
          <CardContent>
            <div className="text-center">
              <h4 className="font-medium text-navy-900 mb-2">
                {new Date(selectedDate + 'T00:00:00').toLocaleDateString('en-US', { 
                  weekday: 'long', 
                  year: 'numeric', 
                  month: 'long', 
                  day: 'numeric' 
                })}
              </h4>
              <p className="text-sm text-navy-600">
                {getDayInfo(new Date(selectedDate + 'T00:00:00'))?.capacity_used || 0}/
                {getDayInfo(new Date(selectedDate + 'T00:00:00'))?.max_capacity || 10} booked
              </p>
              
              {/* Surcharge notices */}
              {getDayInfo(new Date(selectedDate + 'T00:00:00'))?.surcharges?.map((surcharge, index) => (
                <div key={index} className="mt-2 text-sm text-orange-600">
                  <strong>Additional charges apply:</strong>
                  <br />â€¢ {surcharge.description}
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      )}

      {/* Time Selection */}
      {selectedDate && (
        <div>
          <h3 className="text-lg font-medium text-navy-900 mb-4">Select Pickup Time</h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button
              onClick={() => handleTimeSelect('morning')}
              className={`p-4 rounded-lg border-2 text-center transition-all ${
                selectedTime === 'morning'
                  ? 'border-navy-500 bg-navy-50'
                  : 'border-gray-200 hover:border-gray-300'
              }`}
            >
              <div className="font-medium text-navy-900">8 AM - 11 AM</div>
              <div className="text-sm text-navy-600">Best availability</div>
            </button>

            <button
              onClick={() => handleTimeSelect('afternoon')}
              className={`p-4 rounded-lg border-2 text-center transition-all ${
                selectedTime === 'afternoon'
                  ? 'border-navy-500 bg-navy-50'
                  : 'border-gray-200 hover:border-gray-300'
              }`}
            >
              <div className="font-medium text-navy-900">12 PM - 3 PM</div>
              <div className="text-sm text-navy-600">Popular choice</div>
            </button>

            <button
              onClick={() => handleTimeSelect('evening')}
              className={`p-4 rounded-lg border-2 text-center transition-all ${
                selectedTime === 'evening'
                  ? 'border-navy-500 bg-navy-50'
                  : 'border-gray-200 hover:border-gray-300'
              }`}
            >
              <div className="font-medium text-navy-900">4 PM - 7 PM</div>
              <div className="text-sm text-navy-600">Limited availability</div>
            </button>
          </div>
        </div>
      )}

      {/* FIXED: Pricing Summary with dark text */}
      {pricingMutation.data?.pricing && (
        <Card variant="luxury">
          <CardContent>
            <h3 className="text-lg font-medium text-navy-900 mb-4">Pricing Summary</h3>
            <div className="space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-navy-900 font-medium">Base Price:</span>
                <span className="text-navy-900 font-semibold">${pricingMutation.data.pricing.base_price_dollars}</span>
              </div>

              {pricingMutation.data.pricing.surcharge_dollars > 0 && (
                <div className="flex justify-between items-center">
                  <span className="text-navy-900 font-medium">Date Surcharges:</span>
                  <span className="text-navy-900 font-semibold">+${pricingMutation.data.pricing.surcharge_dollars}</span>
                </div>
              )}

              {pricingMutation.data.pricing.coi_fee_dollars > 0 && (
                <div className="flex justify-between items-center">
                  <span className="text-navy-900 font-medium">COI Fee:</span>
                  <span className="text-navy-900 font-semibold">+${pricingMutation.data.pricing.coi_fee_dollars}</span>
                </div>
              )}

              {pricingMutation.data.pricing.organizing_total_dollars > 0 && (
                <div className="flex justify-between items-center">
                  <span className="text-navy-900 font-medium">Organizing Services:</span>
                  <span className="text-navy-900 font-semibold">+${pricingMutation.data.pricing.organizing_total_dollars}</span>
                </div>
              )}

              <div className="border-t border-gray-200 pt-3">
                <div className="flex justify-between items-center">
                  <span className="text-lg font-bold text-navy-900">Total:</span>
                  <span className="text-xl font-bold text-navy-900">${pricingMutation.data.pricing.total_price_dollars}</span>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      )}

      {/* COI Option */}
      {selectedDate && (
        <Card variant="default">
          <CardContent>
            <label className="flex items-center">
              <input
                type="checkbox"
                checked={bookingData.coi_required || false}
                onChange={(e) => updateBookingData({ coi_required: e.target.checked })}
                className="mr-3"
              />
              <div>
                <span className="font-medium text-navy-900">Certificate of Insurance (COI) Required</span>
                <p className="text-sm text-navy-600">
                  Required by some buildings. We'll handle the paperwork for you.
                </p>
              </div>
            </label>
          </CardContent>
        </Card>
      )}

      {/* Continue Button */}
      <div className="flex justify-end pt-4">
        <Button
          onClick={handleContinue}
          disabled={!canContinue || pricingMutation.isPending}
          size="lg"
        >
          {pricingMutation.isPending ? 'Calculating...' : 'Continue to Addresses â†’'}
        </Button>
      </div>
    </div>
  );
}
```

# ==== src/components/booking/index.ts ====

```
// frontend/src/components/booking/index.ts
export { BookingWizard } from './booking-wizard';
export { ServiceSelectionStep } from './service-selection-step';
export { DateTimeStep } from './date-time-step';
export { AddressStep } from './address-step';
export { CustomerInfoStep } from './customer-info-step';
export { ReviewPaymentStep } from './review-payment-step';
```

# ==== src/components/booking/review-payment-step.tsx ====

```
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useMutation, useQueryClient } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { useBookingWizard } from '@/stores/booking-store';
import { useAuthStore } from '@/stores/auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { AxiosError } from 'axios';

interface BookingResponse {
  message: string;
  booking: {
    id: string;
    booking_number: string;
    total_price_dollars: number;
  };
}

export function ReviewPaymentStep() {
  const { bookingData, resetWizard, setLoading, isLoading, setBookingComplete } = useBookingWizard();
  const { isAuthenticated } = useAuthStore();
  const queryClient = useQueryClient();
  const router = useRouter();
  const [bookingComplete, setBookingCompleteLocal] = useState(false);
  const [bookingNumber, setBookingNumber] = useState<string>('');
  const [termsAccepted, setTermsAccepted] = useState(false);

  // Create booking mutation
  const createBookingMutation = useMutation({
    mutationFn: async (): Promise<BookingResponse> => {
      // Use correct endpoint based on authentication status
      const endpoint = isAuthenticated 
        ? '/api/customer/bookings/create/'     // Updates customer stats
        : '/api/public/guest-booking/';        // Guest booking

      console.log(`Creating ${isAuthenticated ? 'authenticated' : 'guest'} booking at:`, endpoint);

      let bookingRequest;

      if (isAuthenticated) {
        // Generate unique nicknames with timestamp
        const timestamp = new Date().toISOString().slice(11, 16); // HH:MM format
        const dateStr = new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        
        // Authenticated booking format - different structure
        bookingRequest = {
          // Service selection
          service_type: bookingData.service_type,
          mini_move_package_id: bookingData.mini_move_package_id,
          include_packing: bookingData.include_packing,
          include_unpacking: bookingData.include_unpacking,
          standard_delivery_item_count: bookingData.standard_delivery_item_count,
          is_same_day_delivery: bookingData.is_same_day_delivery,
          specialty_item_ids: bookingData.specialty_item_ids,
          
          // Date and time
          pickup_date: bookingData.pickup_date,
          pickup_time: bookingData.pickup_time,
          
          // Addresses - use new_pickup_address format for authenticated users
          new_pickup_address: bookingData.pickup_address,
          new_delivery_address: bookingData.delivery_address,
          save_pickup_address: true,  // Save addresses for future use
          save_delivery_address: true,
          pickup_address_nickname: `Pickup ${dateStr} ${timestamp}`,  // Unique nickname
          delivery_address_nickname: `Delivery ${dateStr} ${timestamp}`, // Unique nickname
          
          // Additional info
          special_instructions: bookingData.special_instructions,
          coi_required: bookingData.coi_required,
          create_payment_intent: false, // Disable for demo
        };
      } else {
        // Guest booking format - original structure
        bookingRequest = {
          // Customer info
          first_name: bookingData.customer_info?.first_name,
          last_name: bookingData.customer_info?.last_name,
          email: bookingData.customer_info?.email,
          phone: bookingData.customer_info?.phone,
          
          // Service selection
          service_type: bookingData.service_type,
          mini_move_package_id: bookingData.mini_move_package_id,
          include_packing: bookingData.include_packing,
          include_unpacking: bookingData.include_unpacking,
          standard_delivery_item_count: bookingData.standard_delivery_item_count,
          is_same_day_delivery: bookingData.is_same_day_delivery,
          specialty_item_ids: bookingData.specialty_item_ids,
          
          // Date and time
          pickup_date: bookingData.pickup_date,
          pickup_time: bookingData.pickup_time,
          
          // Addresses
          pickup_address: bookingData.pickup_address,
          delivery_address: bookingData.delivery_address,
          
          // Additional info
          special_instructions: bookingData.special_instructions,
          coi_required: bookingData.coi_required,
        };
      }

      const response = await apiClient.post(endpoint, bookingRequest);
      return response.data;
    },
    onSuccess: (data) => {
      setBookingNumber(data.booking.booking_number);
      setBookingCompleteLocal(true);
      setBookingComplete(data.booking.booking_number); // Update store
      setLoading(false);
      
      // Invalidate dashboard cache for authenticated users
      if (isAuthenticated) {
        queryClient.invalidateQueries({ queryKey: ['customer', 'dashboard'] });
        queryClient.invalidateQueries({ queryKey: ['customer', 'bookings'] });
      }
    },
    onError: (error: AxiosError | Error) => {
      setLoading(false);
      console.error('Booking creation failed:', error);
      
      // Check if it's an AxiosError before accessing response
      if ('response' in error && error.response) {
        console.error('Error response:', error.response.data);
      }
    }
  });

  const handleSubmitBooking = () => {
    if (!termsAccepted) {
      alert('Please accept the Terms of Service to continue.');
      return;
    }
    
    setLoading(true);
    createBookingMutation.mutate();
  };

  const handleStartOver = () => {
    console.log('ðŸ”„ Starting over - resetting wizard and navigating to fresh booking page');
    resetWizard();
    setBookingCompleteLocal(false);
    setBookingNumber('');
    
    // Force navigation to fresh booking page with reset flag
    router.push('/book?reset=true');
  };

  const handleGoToDashboard = () => {
    if (isAuthenticated) {
      router.push('/dashboard');
    } else {
      router.push('/');
    }
  };

  if (bookingComplete) {
    return (
      <div className="text-center space-y-6">
        <div className="text-6xl mb-4">âœ…</div>
        
        <Card variant="luxury">
          <CardContent>
            <h3 className="text-2xl font-serif font-bold text-navy-900 mb-4">
              Booking Confirmed!
            </h3>
            
            <div className="space-y-3">
              <div className="bg-gold-50 border border-gold-200 rounded-lg p-4">
                <span className="text-sm text-gold-700">Your Booking Number</span>
                <div className="text-2xl font-bold text-navy-900">{bookingNumber}</div>
              </div>
              
              <p className="text-navy-700">
                Your luxury move is confirmed. 
                {isAuthenticated ? (
                  ' Check your dashboard for booking details.'
                ) : (
                  <>
                    We'll send a confirmation email to{' '}
                    <strong>{bookingData.customer_info?.email}</strong> with all the details.
                  </>
                )}
              </p>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div className="text-left">
                  <span className="font-medium text-navy-900">Pickup:</span>
                  <p className="text-navy-700">
                    {new Date(bookingData.pickup_date!).toLocaleDateString()} at{' '}
                    {bookingData.pickup_time === 'morning' ? '8-11 AM' : 
                     bookingData.pickup_time === 'afternoon' ? '12-3 PM' : '4-7 PM'}
                  </p>
                  <p className="text-navy-600">
                    {bookingData.pickup_address?.address_line_1}, {bookingData.pickup_address?.city}
                  </p>
                </div>
                
                <div className="text-left">
                  <span className="font-medium text-navy-900">Total:</span>
                  <p className="text-2xl font-bold text-navy-900">
                    ${bookingData.pricing_data?.total_price_dollars}
                  </p>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        <div className="space-y-4">
          <h4 className="text-lg font-medium text-navy-900">What's Next?</h4>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
            <Card variant="default">
              <CardContent>
                <div className="text-center">
                  <div className="text-2xl mb-2">ðŸ“§</div>
                  <h5 className="font-medium text-navy-900 mb-1">Confirmation Email</h5>
                  <p className="text-navy-600">Check your email for booking details and our team contact info.</p>
                </div>
              </CardContent>
            </Card>
            
            <Card variant="default">
              <CardContent>
                <div className="text-center">
                  <div className="text-2xl mb-2">ðŸ“ž</div>
                  <h5 className="font-medium text-navy-900 mb-1">Coordination Call</h5>
                  <p className="text-navy-600">We'll call 24 hours before pickup to confirm timing.</p>
                </div>
              </CardContent>
            </Card>
            
            <Card variant="default">
              <CardContent>
                <div className="text-center">
                  <div className="text-2xl mb-2">ðŸš›</div>
                  <h5 className="font-medium text-navy-900 mb-1">White Glove Service</h5>
                  <p className="text-navy-600">Our professional team handles everything with care.</p>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>

        <div className="flex flex-col sm:flex-row justify-center gap-4">
          <Button 
            variant="outline" 
            onClick={handleStartOver}
            className="w-full sm:w-auto"
          >
            Book Another Move
          </Button>
          <Button 
            variant="primary" 
            onClick={handleGoToDashboard}
            className="w-full sm:w-auto"
          >
            {isAuthenticated ? 'Back to Dashboard' : 'Back to Home'}
          </Button>
        </div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Booking Summary */}
      <Card variant="luxury">
        <CardHeader>
          <h3 className="text-xl font-serif font-bold text-navy-900">Booking Summary</h3>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {/* Service Details */}
            <div>
              <h4 className="font-medium text-navy-900 mb-2">Service</h4>
              <p className="text-navy-700">
                {bookingData.service_type === 'mini_move' && 'Mini Move'}
                {bookingData.service_type === 'standard_delivery' && 'Standard Delivery'}
                {bookingData.service_type === 'specialty_item' && 'Specialty Items'}
              </p>
              
              {bookingData.include_packing && (
                <p className="text-sm text-navy-600">+ Professional Packing</p>
              )}
              {bookingData.include_unpacking && (
                <p className="text-sm text-navy-600">+ Professional Unpacking</p>
              )}
            </div>

            {/* Date & Time */}
            <div>
              <h4 className="font-medium text-navy-900 mb-2">Pickup Schedule</h4>
              <p className="text-navy-700">
                {new Date(bookingData.pickup_date!).toLocaleDateString('en-US', {
                  weekday: 'long',
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric'
                })}
              </p>
              <p className="text-navy-600">
                {bookingData.pickup_time === 'morning' && '8:00 AM - 11:00 AM'}
                {bookingData.pickup_time === 'afternoon' && '12:00 PM - 3:00 PM'}
                {bookingData.pickup_time === 'evening' && '4:00 PM - 7:00 PM'}
              </p>
            </div>

            {/* Addresses */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <h4 className="font-medium text-navy-900 mb-2">Pickup Address</h4>
                <div className="text-navy-700 text-sm">
                  <div>{bookingData.pickup_address?.address_line_1}</div>
                  {bookingData.pickup_address?.address_line_2 && (
                    <div>{bookingData.pickup_address.address_line_2}</div>
                  )}
                  <div>
                    {bookingData.pickup_address?.city}, {bookingData.pickup_address?.state} {bookingData.pickup_address?.zip_code}
                  </div>
                </div>
              </div>
              
              <div>
                <h4 className="font-medium text-navy-900 mb-2">Delivery Address</h4>
                <div className="text-navy-700 text-sm">
                  <div>{bookingData.delivery_address?.address_line_1}</div>
                  {bookingData.delivery_address?.address_line_2 && (
                    <div>{bookingData.delivery_address.address_line_2}</div>
                  )}
                  <div>
                    {bookingData.delivery_address?.city}, {bookingData.delivery_address?.state} {bookingData.delivery_address?.zip_code}
                  </div>
                </div>
              </div>
            </div>

            {/* Customer Info - only show for guest bookings */}
            {!isAuthenticated && (
              <div>
                <h4 className="font-medium text-navy-900 mb-2">Contact Information</h4>
                <div className="text-navy-700">
                  <div>
                    {bookingData.customer_info?.first_name} {bookingData.customer_info?.last_name}
                  </div>
                  <div>{bookingData.customer_info?.email}</div>
                  <div>{bookingData.customer_info?.phone}</div>
                </div>
              </div>
            )}

            {/* Special Instructions */}
            {bookingData.special_instructions && (
              <div>
                <h4 className="font-medium text-navy-900 mb-2">Special Instructions</h4>
                <p className="text-navy-700 text-sm bg-gray-50 p-3 rounded">
                  {bookingData.special_instructions}
                </p>
              </div>
            )}
          </div>
        </CardContent>
      </Card>

      {/* Pricing Breakdown */}
      {bookingData.pricing_data && (
        <Card variant="elevated">
          <CardHeader>
            <h3 className="text-xl font-serif font-bold text-navy-900">Pricing</h3>
          </CardHeader>
          <CardContent>
            <div className="space-y-2">
              <div className="flex justify-between">
                <span className="text-navy-700">Base Price:</span>
                <span className="font-medium">${bookingData.pricing_data.base_price_dollars}</span>
              </div>
              
              {bookingData.pricing_data.surcharge_dollars > 0 && (
                <div className="flex justify-between">
                  <span className="text-navy-700">Date Surcharges:</span>
                  <span className="font-medium">+${bookingData.pricing_data.surcharge_dollars}</span>
                </div>
              )}
              
              {bookingData.pricing_data.coi_fee_dollars > 0 && (
                <div className="flex justify-between">
                  <span className="text-navy-700">COI Fee:</span>
                  <span className="font-medium">+${bookingData.pricing_data.coi_fee_dollars}</span>
                </div>
              )}
              
              {bookingData.pricing_data.organizing_total_dollars > 0 && (
                <div className="flex justify-between">
                  <span className="text-navy-700">Organizing Services:</span>
                  <span className="font-medium">+${bookingData.pricing_data.organizing_total_dollars}</span>
                </div>
              )}
              
              <hr className="border-gray-200" />
              
              <div className="flex justify-between text-xl font-bold">
                <span className="text-navy-900">Total:</span>
                <span className="text-navy-900">${bookingData.pricing_data.total_price_dollars}</span>
              </div>
            </div>
          </CardContent>
        </Card>
      )}

      {/* Terms of Service Agreement */}
      <Card variant="default" className="border-navy-200">
        <CardHeader>
          <h3 className="text-lg font-medium text-navy-900">Terms of Service Agreement</h3>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            <div className="max-h-40 overflow-y-auto p-3 bg-gray-50 rounded text-xs text-navy-700 border">
              <p className="font-medium mb-2">PLEASE READ THESE TERMS AND CONDITIONS CAREFULLY</p>
              <p className="mb-2">
                By using Tote Taxi and/or the Tote Taxi Website, you are agreeing to be bound by these terms and conditions. 
                If you do not agree to the terms and conditions, do not use Tote Taxi's services or the Tote Taxi Website.
              </p>
              <p className="mb-2">
                Tote Taxi LLC ("Tote Taxi") may revise and update these Terms and Conditions at any time without notice. 
                Your continued usage of the Tote Taxi Website after any such change or update will mean you accept those changes or updates.
              </p>
              <p className="mb-2">
                Tote Taxi will not accept for transport luggage or packages in excess of $150.00 in value. 
                Tote Taxi's inadvertent acceptance of any luggage or package in excess of $150.00 shall not negate 
                Tote Taxi's limitation of liability stated herein.
              </p>
              <p className="mb-2">
                By delivering luggage or package to, or causing luggage or package to be delivered to, Tote Taxi for transport, 
                you represent that the luggage or package does not contain any illegal substances, any liquids, or any hazardous materials, 
                and does not exceed $150.00 in value.
              </p>
              <p className="text-xs text-navy-500 mt-4">
                [Complete terms available at totetaxi.com/terms]
              </p>
            </div>
            
            <label className="flex items-start space-x-3 cursor-pointer">
              <input
                type="checkbox"
                checked={termsAccepted}
                onChange={(e) => setTermsAccepted(e.target.checked)}
                className="mt-1 h-4 w-4 text-navy-600 rounded border-gray-300 focus:ring-navy-500"
              />
              <div className="text-sm">
                <span className="text-navy-900 font-medium">
                  I acknowledge that I have read, understood, and agree to be bound by the Terms of Service.
                </span>
                <p className="text-navy-600 mt-1">
                  By checking this box, you confirm your acceptance of all terms and conditions, 
                  including the $150 liability limit and item restrictions.
                </p>
              </div>
            </label>
          </div>
        </CardContent>
      </Card>

      {/* Payment Notice */}
      <Card variant="default" className="border-gold-200 bg-gold-50">
        <CardContent>
          <div className="text-center">
            <h4 className="font-medium text-navy-900 mb-2">Payment</h4>
            <p className="text-navy-700 text-sm">
              For this demo, we'll create your booking without payment processing. 
              In production, this would integrate with Stripe for secure payment.
            </p>
          </div>
        </CardContent>
      </Card>

      {/* Submit Button */}
      <div className="flex justify-center">
        <Button 
          variant="primary" 
          size="lg"
          onClick={handleSubmitBooking}
          disabled={isLoading || createBookingMutation.isPending || !termsAccepted}
          className="w-full sm:w-auto"
        >
          {isLoading || createBookingMutation.isPending ? 'Creating Booking...' : 'Confirm Booking'}
        </Button>
      </div>
    </div>
  );
}
```

# ==== src/components/booking/service-selection-step.tsx ====

```
'use client';
// bookings/service-selection-step.tsx
import { useState } from 'react';
import { useQuery, useMutation } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { useBookingWizard } from '@/stores/booking-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { ChevronDownIcon, ChevronUpIcon } from '@heroicons/react/24/outline';
import type { ServiceCatalog } from '@/types';

// NYC tax rate
const TAX_RATE = 0.0825;

// Organizing service details by tier
const ORGANIZING_SERVICES = {
  petite: {
    packing: {
      name: 'Petite Packing',
      description: '1/2 day (up to 4 hours) with 2 organizers. Includes garment bags, moving bags + additional packing supplies upon request (up to $250).',
      price: 1400,
      duration: 4,
      organizers: 2,
      supplies: 250
    },
    unpacking: {
      name: 'Petite Unpacking', 
      description: '1/2 day (up to 4 hours) with 2 organizers. Organizing light (no supplies).',
      price: 1130,
      duration: 4,
      organizers: 2,
      supplies: 0
    }
  },
  standard: {
    packing: {
      name: 'Standard Packing',
      description: '1 day (up to 8 hours) with 2 organizers. Includes garment bags, moving bags + additional packing supplies upon request (up to $250).',
      price: 2535,
      duration: 8,
      organizers: 2,
      supplies: 250
    },
    unpacking: {
      name: 'Standard Unpacking',
      description: '1 day (up to 8 hours) with 2 organizers. Organizing light (no supplies).',
      price: 2265,
      duration: 8,
      organizers: 2,
      supplies: 0
    }
  },
  full: {
    packing: {
      name: 'Full Packing',
      description: '1 day (up to 8 hours) with 4 organizers. Includes garment bags, moving bags + additional packing supplies upon request (up to $500).',
      price: 5070,
      duration: 8,
      organizers: 4,
      supplies: 500
    },
    unpacking: {
      name: 'Full Unpacking',
      description: '1 day (up to 8 hours) with 4 organizers. Organizing light (no supplies).',
      price: 4530,
      duration: 8,
      organizers: 4,
      supplies: 0
    }
  }
};

function calculateWithTax(price: number) {
  const tax = price * TAX_RATE;
  return {
    subtotal: price,
    tax: tax,
    total: price + tax
  };
}

export function ServiceSelectionStep() {
  const { bookingData, updateBookingData, nextStep } = useBookingWizard();
  const [packingExpanded, setPackingExpanded] = useState(false);
  const [unpackingExpanded, setUnpackingExpanded] = useState(false);

  const { data: services, isLoading } = useQuery({
    queryKey: ['services', 'catalog'],
    queryFn: async (): Promise<ServiceCatalog> => {
      const response = await apiClient.get('/api/public/services/');
      return response.data;
    }
  });

  const handleMiniMoveSelect = (packageId: string) => {
    updateBookingData({
      service_type: 'mini_move',
      mini_move_package_id: packageId,
      // Clear other service selections
      standard_delivery_item_count: undefined,
      specialty_item_ids: undefined,
    });
  };

  const handleOrganizingServiceToggle = (serviceType: 'packing' | 'unpacking', enabled: boolean) => {
    updateBookingData({
      [serviceType === 'packing' ? 'include_packing' : 'include_unpacking']: enabled
    });
    
    // Auto-expand when selected
    if (enabled) {
      if (serviceType === 'packing') {
        setPackingExpanded(true);
      } else {
        setUnpackingExpanded(true);
      }
    }
  };

  const canContinue = () => {
    return (
      (bookingData.service_type === 'mini_move' && bookingData.mini_move_package_id) ||
      (bookingData.service_type === 'standard_delivery' && bookingData.standard_delivery_item_count && bookingData.standard_delivery_item_count >= (services?.standard_delivery?.minimum_items || 3)) ||
      (bookingData.service_type === 'specialty_item' && bookingData.specialty_item_ids?.length)
    );
  };

  if (isLoading) {
    return (
      <div className="space-y-4">
        {[1, 2, 3].map(i => (
          <div key={i} className="animate-pulse">
            <div className="h-32 bg-navy-200 rounded-lg"></div>
          </div>
        ))}
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Service Type Selector */}
      <div>
        <h3 className="text-lg font-medium text-navy-900 mb-4">Choose Your Service</h3>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <button
            onClick={() => updateBookingData({ service_type: 'mini_move' })}
            className={`p-4 rounded-lg border-2 text-left transition-all ${
              bookingData.service_type === 'mini_move'
                ? 'border-navy-500 bg-navy-50'
                : 'border-gray-200 hover:border-gray-300'
            }`}
          >
            <h4 className="font-medium text-navy-900 mb-2">Mini Moves</h4>
            <p className="text-sm text-navy-600">Complete packages for seasonal relocation</p>
          </button>

          <button
            onClick={() => updateBookingData({ service_type: 'standard_delivery' })}
            className={`p-4 rounded-lg border-2 text-left transition-all ${
              bookingData.service_type === 'standard_delivery'
                ? 'border-navy-500 bg-navy-50'
                : 'border-gray-200 hover:border-gray-300'
            }`}
          >
            <h4 className="font-medium text-navy-900 mb-2">Standard Delivery</h4>
            <p className="text-sm text-navy-600">Individual items, priced per piece</p>
          </button>

          <button
            onClick={() => updateBookingData({ service_type: 'specialty_item' })}
            className={`p-4 rounded-lg border-2 text-left transition-all ${
              bookingData.service_type === 'specialty_item'
                ? 'border-navy-500 bg-navy-50'
                : 'border-gray-200 hover:border-gray-300'
            }`}
          >
            <h4 className="font-medium text-navy-900 mb-2">Specialty Items</h4>
            <p className="text-sm text-navy-600">Pelotons, surfboards, and more</p>
          </button>
        </div>
      </div>

      {/* Mini Moves */}
      {bookingData.service_type === 'mini_move' && services?.mini_move_packages && (
        <div>
          <h3 className="text-lg font-medium text-navy-900 mb-4">Select Package</h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {services.mini_move_packages.map((pkg) => (
              <Card 
                key={pkg.id} 
                variant={bookingData.mini_move_package_id === pkg.id ? "luxury" : "default"}
                className="cursor-pointer"
                onClick={() => handleMiniMoveSelect(pkg.id)}
              >
                <CardHeader>
                  <div className="text-center">
                    <h4 className="font-medium text-navy-900">{pkg.name}</h4>
                    {pkg.is_most_popular && (
                      <span className="inline-block bg-gold-100 text-gold-800 text-xs px-2 py-1 rounded-full mt-1">
                        Most Popular
                      </span>
                    )}
                  </div>
                </CardHeader>
                <CardContent>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-navy-900 mb-2">
                      ${pkg.base_price_dollars}
                    </div>
                    <p className="text-navy-600 text-sm mb-3">{pkg.description}</p>
                    <p className="text-xs text-navy-500">
                      {pkg.max_items ? `Up to ${pkg.max_items} items` : 'Unlimited items'}
                    </p>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>

          {/* Collapsible Organizing Services */}
          {bookingData.mini_move_package_id && (
            <div>
              <h4 className="text-lg font-medium text-navy-900 mb-3">Professional Organizing Services</h4>
              <p className="text-sm text-navy-600 mb-4">
                Add professional packing and unpacking services. Click to view details and pricing.
              </p>
              
              {(() => {
                const selectedPackage = services.mini_move_packages.find(p => p.id === bookingData.mini_move_package_id);
                const tier = selectedPackage?.package_type;
                const organizingOptions = tier ? ORGANIZING_SERVICES[tier] : null;
                
                if (!organizingOptions) return null;

                return (
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {/* Collapsible Packing Service */}
                    <Card 
                      variant={bookingData.include_packing ? "luxury" : "default"}
                      className="transition-all"
                    >
                      <CardHeader>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <input
                              type="checkbox"
                              checked={bookingData.include_packing || false}
                              onChange={(e) => handleOrganizingServiceToggle('packing', e.target.checked)}
                              className="h-4 w-4 text-navy-600 rounded"
                            />
                            <h5 className="font-semibold text-navy-900">{organizingOptions.packing.name}</h5>
                          </div>
                          <button
                            onClick={() => setPackingExpanded(!packingExpanded)}
                            className="text-navy-600 hover:text-navy-900"
                          >
                            {packingExpanded || bookingData.include_packing ? (
                              <ChevronUpIcon className="h-5 w-5" />
                            ) : (
                              <ChevronDownIcon className="h-5 w-5" />
                            )}
                          </button>
                        </div>
                        
                        {/* Collapsed Preview */}
                        {!packingExpanded && !bookingData.include_packing && (
                          <p className="text-sm text-navy-600 mt-2">
                            {organizingOptions.packing.duration} hours â€¢ {organizingOptions.packing.organizers} organizers â€¢ Supplies included
                          </p>
                        )}
                      </CardHeader>
                      
                      {/* Expanded Content */}
                      {(packingExpanded || bookingData.include_packing) && (
                        <CardContent>
                          <p className="text-sm text-navy-600 mb-4">{organizingOptions.packing.description}</p>
                          
                          <div className="space-y-2 text-sm">
                            <div className="flex justify-between">
                              <span className="text-navy-700">Duration:</span>
                              <span className="font-medium text-navy-900">{organizingOptions.packing.duration} hours</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-navy-700">Organizers:</span>
                              <span className="font-medium text-navy-900">{organizingOptions.packing.organizers} professionals</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-navy-700">Supplies:</span>
                              <span className="font-medium text-navy-900">${organizingOptions.packing.supplies} allowance</span>
                            </div>
                          </div>
                          
                          <div className="mt-4 pt-3 border-t border-gray-100">
                            {(() => {
                              const pricing = calculateWithTax(organizingOptions.packing.price);
                              return (
                                <div className="space-y-1">
                                  <div className="flex justify-between text-sm text-navy-900">
                                    <span>Service:</span>
                                    <span className="font-medium">${pricing.subtotal.toFixed(2)}</span>
                                  </div>
                                  <div className="flex justify-between text-sm text-navy-900">
                                    <span>Tax:</span>
                                    <span className="font-medium">${pricing.tax.toFixed(2)}</span>
                                  </div>
                                  <div className="flex justify-between font-bold text-navy-900 text-base">
                                    <span>Total:</span>
                                    <span>${pricing.total.toFixed(2)}</span>
                                  </div>
                                </div>
                              );
                            })()}
                          </div>
                        </CardContent>
                      )}
                    </Card>

                    {/* Collapsible Unpacking Service */}
                    <Card 
                      variant={bookingData.include_unpacking ? "luxury" : "default"}
                      className="transition-all"
                    >
                      <CardHeader>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <input
                              type="checkbox"
                              checked={bookingData.include_unpacking || false}
                              onChange={(e) => handleOrganizingServiceToggle('unpacking', e.target.checked)}
                              className="h-4 w-4 text-navy-600 rounded"
                            />
                            <h5 className="font-semibold text-navy-900">{organizingOptions.unpacking.name}</h5>
                          </div>
                          <button
                            onClick={() => setUnpackingExpanded(!unpackingExpanded)}
                            className="text-navy-600 hover:text-navy-900"
                          >
                            {unpackingExpanded || bookingData.include_unpacking ? (
                              <ChevronUpIcon className="h-5 w-5" />
                            ) : (
                              <ChevronDownIcon className="h-5 w-5" />
                            )}
                          </button>
                        </div>
                        
                        {/* Collapsed Preview */}
                        {!unpackingExpanded && !bookingData.include_unpacking && (
                          <p className="text-sm text-navy-600 mt-2">
                            {organizingOptions.unpacking.duration} hours â€¢ {organizingOptions.unpacking.organizers} organizers â€¢ Organizing only
                          </p>
                        )}
                      </CardHeader>
                      
                      {/* Expanded Content */}
                      {(unpackingExpanded || bookingData.include_unpacking) && (
                        <CardContent>
                          <p className="text-sm text-navy-600 mb-4">{organizingOptions.unpacking.description}</p>
                          
                          <div className="space-y-2 text-sm">
                            <div className="flex justify-between">
                              <span className="text-navy-700">Duration:</span>
                              <span className="font-medium text-navy-900">{organizingOptions.unpacking.duration} hours</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-navy-700">Organizers:</span>
                              <span className="font-medium text-navy-900">{organizingOptions.unpacking.organizers} professionals</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-navy-700">Supplies:</span>
                              <span className="font-medium text-navy-900">Organizing only</span>
                            </div>
                          </div>
                          
                          <div className="mt-4 pt-3 border-t border-gray-100">
                            {(() => {
                              const pricing = calculateWithTax(organizingOptions.unpacking.price);
                              return (
                                <div className="space-y-1">
                                  <div className="flex justify-between text-sm text-navy-900">
                                    <span>Service:</span>
                                    <span className="font-medium">${pricing.subtotal.toFixed(2)}</span>
                                  </div>
                                  <div className="flex justify-between text-sm text-navy-900">
                                    <span>Tax:</span>
                                    <span className="font-medium">${pricing.tax.toFixed(2)}</span>
                                  </div>
                                  <div className="flex justify-between font-bold text-navy-900 text-base">
                                    <span>Total:</span>
                                    <span>${pricing.total.toFixed(2)}</span>
                                  </div>
                                </div>
                              );
                            })()}
                          </div>
                        </CardContent>
                      )}
                    </Card>
                  </div>
                );
              })()}
            </div>
          )}
        </div>
      )}

      {/* Standard Delivery - unchanged */}
      {bookingData.service_type === 'standard_delivery' && services?.standard_delivery && (
        <div>
          <h3 className="text-lg font-medium text-navy-900 mb-4">Standard Delivery Details</h3>
          <Card variant="elevated">
            <CardContent>
              <div className="space-y-4">
                <Input
                  label="Number of Items"
                  type="number"
                  min={services.standard_delivery.minimum_items}
                  value={bookingData.standard_delivery_item_count?.toString() || ''}
                  onChange={(e) => updateBookingData({ 
                    standard_delivery_item_count: parseInt(e.target.value) || undefined 
                  })}
                  placeholder={`Minimum ${services.standard_delivery.minimum_items} items`}
                  helper={`$${services.standard_delivery.price_per_item_dollars} per item â€¢ $${services.standard_delivery.minimum_charge_dollars} minimum`}
                />

                <label className="flex items-center">
                  <input
                    type="checkbox"
                    checked={bookingData.is_same_day_delivery || false}
                    onChange={(e) => updateBookingData({ is_same_day_delivery: e.target.checked })}
                    className="mr-3"
                  />
                  <span className="text-navy-900 font-medium">
                    Same-Day Delivery (+$${services.standard_delivery.same_day_flat_rate_dollars})
                  </span>
                </label>
              </div>
            </CardContent>
          </Card>
        </div>
      )}

      {/* Specialty Items - unchanged */}
      {bookingData.service_type === 'specialty_item' && services?.specialty_items && (
        <div>
          <h3 className="text-lg font-medium text-navy-900 mb-4">Select Specialty Items</h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {services.specialty_items.map((item) => (
              <label 
                key={item.id}
                className="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"
              >
                <input
                  type="checkbox"
                  checked={bookingData.specialty_item_ids?.includes(item.id) || false}
                  onChange={(e) => {
                    const currentIds = bookingData.specialty_item_ids || [];
                    const newIds = e.target.checked
                      ? [...currentIds, item.id]
                      : currentIds.filter(id => id !== item.id);
                    updateBookingData({ specialty_item_ids: newIds });
                  }}
                  className="mr-4"
                />
                <div className="flex-1">
                  <h4 className="font-medium text-navy-900">{item.name}</h4>
                  <p className="text-sm text-navy-600 mb-1">{item.description}</p>
                  <div className="text-lg font-bold text-navy-900">${item.price_dollars}</div>
                </div>
              </label>
            ))}
          </div>
        </div>
      )}

      {/* Continue Button */}
      <div className="flex justify-end pt-4">
        <Button
          onClick={nextStep}
          disabled={!canContinue()}
          size="lg"
        >
          Continue to Date & Time â†’
        </Button>
      </div>
    </div>
  );
}
```

# ==== src/components/dashboard/booking-history.tsx ====

```
// frontend/src/components/dashboard/booking-history.tsx
'use client';

import { useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { useAuthStore } from '@/stores/auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Select } from '@/components/ui/select';

interface Booking {
  id: string;
  booking_number: string;
  service_type: string;
  status: string;
  pickup_date: string;
  pickup_time?: string;
  pickup_address?: {
    address_line_1: string;
    city: string;
    state: string;
  };
  delivery_address?: {
    address_line_1: string;
    city: string;
    state: string;
  };
  total_price: number;
  created_at: string;
}

interface BookingHistoryResponse {
  bookings: Booking[];
  total_count: number;
}

export function BookingHistory() {
  const { user } = useAuthStore();
  const [searchTerm, setSearchTerm] = useState('');
  const [statusFilter, setStatusFilter] = useState('');

  const { data, isLoading, error, refetch } = useQuery({
    queryKey: ['customer', 'bookings', searchTerm, statusFilter],
    queryFn: async (): Promise<BookingHistoryResponse> => {
      const params = new URLSearchParams();
      if (searchTerm) params.append('search', searchTerm);
      if (statusFilter) params.append('status', statusFilter);
      
      const response = await apiClient.get(`/api/customer/bookings/?${params}`);
      return response.data;
    },
    enabled: !!user,
  });

  const getStatusColor = (status: string) => {
    switch (status.toLowerCase()) {
      case 'completed':
        return 'bg-green-100 text-green-800';
      case 'confirmed':
        return 'bg-blue-100 text-blue-800';
      case 'pending':
        return 'bg-yellow-100 text-yellow-800';
      case 'cancelled':
        return 'bg-red-100 text-red-800';
      default:
        return 'bg-gray-100 text-gray-800';
    }
  };

  const formatAddress = (address?: Booking['pickup_address']) => {
    if (!address) return 'Address not available';
    return `${address.address_line_1}, ${address.city}, ${address.state}`;
  };

  if (isLoading) {
    return (
      <Card>
        <CardHeader>
          <h2 className="text-xl font-semibold">Booking History</h2>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {[...Array(3)].map((_, i) => (
              <div key={i} className="animate-pulse border border-gray-200 rounded-lg p-4">
                <div className="h-4 bg-gray-200 rounded mb-2"></div>
                <div className="h-3 bg-gray-200 rounded w-1/2"></div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="p-6 text-center">
          <p className="text-red-600 mb-4">Failed to load booking history</p>
          <Button variant="outline" onClick={() => refetch()}>
            Retry
          </Button>
        </CardContent>
      </Card>
    );
  }

  return (
    <Card>
      <CardHeader>
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <h2 className="text-xl font-semibold text-navy-900">Booking History</h2>
          <div className="text-sm text-navy-600">
            {data?.total_count || 0} total bookings
          </div>
        </div>

        <div className="flex flex-col sm:flex-row gap-4 mt-4">
          <div className="flex-1">
            <Input
              placeholder="Search bookings..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
          <Select
            value={statusFilter}
            onChange={(e) => setStatusFilter(e.target.value)}
            options={[
              { value: '', label: 'All Status' },
              { value: 'pending', label: 'Pending' },
              { value: 'confirmed', label: 'Confirmed' },
              { value: 'completed', label: 'Completed' },
              { value: 'cancelled', label: 'Cancelled' },
            ]}
          />
        </div>
      </CardHeader>

      <CardContent>
        {!data?.bookings || data.bookings.length === 0 ? (
          <div className="text-center py-8">
            <div className="text-6xl mb-4">ðŸ“¦</div>
            <h3 className="text-lg font-medium text-navy-900 mb-2">No bookings yet</h3>
            <p className="text-navy-600 mb-4">
              Start your ToteTaxi experience by booking your first move
            </p>
            <Button variant="primary">
              Book Your First Move
            </Button>
          </div>
        ) : (
          <div className="space-y-4">
            {data.bookings.map((booking) => (
              <div
                key={booking.id}
                className="border border-cream-200 rounded-lg p-6 hover:shadow-md transition-shadow"
              >
                <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                  <div className="flex-1">
                    <div className="flex items-center gap-4 mb-3">
                      <h3 className="font-semibold text-navy-900">
                        #{booking.booking_number}
                      </h3>
                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(booking.status)}`}>
                        {booking.status}
                      </span>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                      <div>
                        <p className="font-medium text-navy-700">Service</p>
                        <p className="text-navy-600">{booking.service_type}</p>
                      </div>
                      <div>
                        <p className="font-medium text-navy-700">Date & Time</p>
                        <p className="text-navy-600">
                          {new Date(booking.pickup_date).toLocaleDateString()}
                          {booking.pickup_time && ` - ${booking.pickup_time}`}
                        </p>
                      </div>
                      {booking.pickup_address && (
                        <div>
                          <p className="font-medium text-navy-700">From</p>
                          <p className="text-navy-600">{formatAddress(booking.pickup_address)}</p>
                        </div>
                      )}
                      {booking.delivery_address && (
                        <div>
                          <p className="font-medium text-navy-700">To</p>
                          <p className="text-navy-600">{formatAddress(booking.delivery_address)}</p>
                        </div>
                      )}
                    </div>
                  </div>

                  <div className="text-right">
                    <div className="text-2xl font-bold text-navy-900 mb-2">
                      ${booking.total_price}
                    </div>
                    <div className="space-y-2">
                      <Button
                        variant="outline"
                        size="sm"
                        onClick={() => alert('Booking details coming soon!')}
                      >
                        View Details
                      </Button>
                      {booking.status === 'completed' && (
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => alert('Rebook functionality coming soon!')}
                        >
                          Book Again
                        </Button>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

# ==== src/components/dashboard/dashboard-overview.tsx ====

```
// src/components/dashboard/dashboard-overview.tsx
'use client';

import { useQuery, useQueryClient } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { useAuthStore } from '@/stores/auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { useRouter } from 'next/navigation';

interface DashboardData {
  customer_profile: {
    name: string;
    email: string;
    phone: string;
    is_vip: boolean;
    total_bookings: number;
    total_spent_dollars: number;
    last_booking_at: string | null;
  };
  booking_summary: {
    pending_bookings: number;
    completed_bookings: number;
    total_bookings: number;
  };
  recent_bookings: Array<{
    id: string;
    booking_number: string;
    customer_name: string;
    service_type: string;
    status: string;
    pickup_date: string;
    pickup_time: string;
    total_price_dollars: number;
    can_rebook: boolean;
    created_at: string;
  }>;
  saved_addresses_count: number;
  payment_methods_count: number;
}

export function DashboardOverview() {
  const { user } = useAuthStore();
  const router = useRouter();

  const { data: dashboardData, isLoading, error, refetch } = useQuery({
    queryKey: ['customer', 'dashboard'],
    queryFn: async (): Promise<DashboardData> => {
      const response = await apiClient.get('/api/customer/dashboard/');
      return response.data;
    },
    enabled: !!user,
    staleTime: 0,
    gcTime: 0,
  });

  if (isLoading) {
    return (
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {[...Array(3)].map((_, i) => (
          <Card key={i} className="animate-pulse">
            <CardContent className="p-6">
              <div className="h-4 bg-gray-200 rounded mb-2"></div>
              <div className="h-8 bg-gray-200 rounded"></div>
            </CardContent>
          </Card>
        ))}
      </div>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="p-6 text-center">
          <p className="text-red-600">Failed to load dashboard data</p>
          <Button 
            variant="outline" 
            onClick={() => refetch()}
            className="mt-4"
          >
            Retry
          </Button>
        </CardContent>
      </Card>
    );
  }

  const profile = dashboardData?.customer_profile;
  const bookingSummary = dashboardData?.booking_summary;

  return (
    <div className="space-y-6">
      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">Total Bookings</h3>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-navy-900">
              {profile?.total_bookings || 0}
            </div>
            <p className="text-xs text-navy-600">
              {profile?.last_booking_at 
                ? `Last booking: ${new Date(profile.last_booking_at).toLocaleDateString()}`
                : 'No bookings yet'
              }
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">Total Spent</h3>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-navy-900">
              ${profile?.total_spent_dollars || 0}
            </div>
            <p className="text-xs text-navy-600">Lifetime value</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">Account Status</h3>
          </CardHeader>
          <CardContent>
            <div className="flex items-center">
              {profile?.is_vip ? (
                <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gold-100 text-gold-800">
                  VIP Member
                </span>
              ) : (
                <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-navy-100 text-navy-800">
                  Standard
                </span>
              )}
            </div>
            <p className="text-xs text-navy-600 mt-1">
              {profile?.is_vip 
                ? 'Priority scheduling & exclusive benefits'
                : 'Book 3+ moves to unlock VIP status'
              }
            </p>
          </CardContent>
        </Card>
      </div>

      {/* Booking Summary */}
      {bookingSummary && (
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-lg font-semibold text-navy-900">{bookingSummary.pending_bookings}</div>
              <div className="text-sm text-navy-600">Pending Bookings</div>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-lg font-semibold text-navy-900">{bookingSummary.completed_bookings}</div>
              <div className="text-sm text-navy-600">Completed Bookings</div>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-lg font-semibold text-navy-900">{bookingSummary.total_bookings}</div>
              <div className="text-sm text-navy-600">Total Bookings</div>
            </CardContent>
          </Card>
        </div>
      )}

      {/* Recent Bookings */}
      {dashboardData?.recent_bookings && dashboardData.recent_bookings.length > 0 && (
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <h3 className="text-lg font-medium text-navy-900">Recent Bookings</h3>
            <Button 
              variant="ghost" 
              onClick={() => router.push('/dashboard/bookings')}
            >
              View All
            </Button>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {dashboardData.recent_bookings.slice(0, 3).map((booking) => (
                <div key={booking.id} className="flex items-center justify-between p-4 border border-cream-200 rounded-lg">
                  <div>
                    <p className="font-medium text-navy-900">#{booking.booking_number}</p>
                    <p className="text-sm text-navy-600">{booking.service_type}</p>
                    <p className="text-xs text-navy-500">
                      {new Date(booking.pickup_date).toLocaleDateString()}
                    </p>
                  </div>
                  <div className="text-right">
                    <p className="font-medium text-navy-900">${booking.total_price_dollars}</p>
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                      booking.status === 'completed' 
                        ? 'bg-green-100 text-green-800'
                        : booking.status === 'pending'
                        ? 'bg-yellow-100 text-yellow-800' 
                        : 'bg-blue-100 text-blue-800'
                    }`}>
                      {booking.status}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      )}

      {/* Quick Stats Summary */}
      <Card>
        <CardContent className="p-6">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
            <div>
              <div className="text-xl font-bold text-navy-900">{dashboardData?.saved_addresses_count || 0}</div>
              <div className="text-sm text-navy-600">Saved Addresses</div>
            </div>
            <div>
              <div className="text-xl font-bold text-navy-900">{dashboardData?.payment_methods_count || 0}</div>
              <div className="text-sm text-navy-600">Payment Methods</div>
            </div>
            <div>
              <div className="text-xl font-bold text-navy-900">{bookingSummary?.pending_bookings || 0}</div>
              <div className="text-sm text-navy-600">Upcoming</div>
            </div>
            <div>
              <div className="text-xl font-bold text-navy-900">{bookingSummary?.completed_bookings || 0}</div>
              <div className="text-sm text-navy-600">Complete</div>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
```

# ==== src/components/dashboard/quick-actions.tsx ====

```

```

# ==== src/components/layout/main-layout.tsx ====

```
// frontend/src/components/layout/main-layout.tsx
'use client';

import { cn } from '@/utils/cn';
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { UserMenu } from '@/components/auth/user-menu';
import { useAuthStore } from '@/stores/auth-store';
import { useState } from 'react';
import { Bars3Icon, XMarkIcon } from '@heroicons/react/24/outline';

interface MainLayoutProps {
  children: React.ReactNode;
  className?: string;
  onBookNowClick?: () => void;
}

export function MainLayout({ children, className, onBookNowClick }: MainLayoutProps) {
  const { isAuthenticated, user } = useAuthStore();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  return (
    <div className={cn(
      'min-h-screen bg-gradient-to-br from-cream-50 to-cream-100',
      className
    )}>
      {/* Header */}
      <header className="border-b border-cream-200 bg-white/80 backdrop-blur-sm sticky top-0 z-40">
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            {/* Logo */}
            <Link href="/" className="text-2xl font-serif font-bold text-navy-900 hover:text-navy-700 transition-colors">
              ToteTaxi
            </Link>
            
            {/* Desktop Navigation */}
            <nav className="hidden lg:flex items-center space-x-8">
              <Link href="/services" className="text-navy-700 hover:text-navy-900 transition-colors font-medium">
                Services
              </Link>
              <Link href="/about" className="text-navy-700 hover:text-navy-900 transition-colors font-medium">
                About
              </Link>
              <Link href="/faq" className="text-navy-700 hover:text-navy-900 transition-colors font-medium">
                FAQ
              </Link>
              <Link href="/contact" className="text-navy-700 hover:text-navy-900 transition-colors font-medium">
                Contact
              </Link>
              
              {/* Auth-Aware Navigation */}
              {isAuthenticated ? (
                <div className="flex items-center space-x-4">
                  <Link href="/dashboard" className="text-navy-700 hover:text-navy-900 transition-colors font-medium">
                    Dashboard
                  </Link>
                  <UserMenu />
                </div>
              ) : (
                <div className="flex items-center space-x-4">
                  <Link href="/login">
                    <Button variant="ghost">
                      Sign In
                    </Button>
                  </Link>
                  {onBookNowClick ? (
                    <Button variant="primary" onClick={onBookNowClick}>
                      Book Now
                    </Button>
                  ) : (
                    <Link href="/book">
                      <Button variant="primary">
                        Book Now
                      </Button>
                    </Link>
                  )}
                </div>
              )}
            </nav>

            {/* Mobile Menu Button */}
            <div className="lg:hidden">
              <button
                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                className="text-navy-700 hover:text-navy-900"
              >
                {mobileMenuOpen ? (
                  <XMarkIcon className="h-6 w-6" />
                ) : (
                  <Bars3Icon className="h-6 w-6" />
                )}
              </button>
            </div>
          </div>

          {/* Mobile Menu */}
          {mobileMenuOpen && (
            <div className="lg:hidden mt-4 pb-4 border-t border-cream-200">
              <nav className="flex flex-col space-y-4 mt-4">
                <Link 
                  href="/services" 
                  className="text-navy-700 hover:text-navy-900 transition-colors font-medium"
                  onClick={() => setMobileMenuOpen(false)}
                >
                  Services
                </Link>
                <Link 
                  href="/about" 
                  className="text-navy-700 hover:text-navy-900 transition-colors font-medium"
                  onClick={() => setMobileMenuOpen(false)}
                >
                  About
                </Link>
                <Link 
                  href="/faq" 
                  className="text-navy-700 hover:text-navy-900 transition-colors font-medium"
                  onClick={() => setMobileMenuOpen(false)}
                >
                  FAQ
                </Link>
                <Link 
                  href="/contact" 
                  className="text-navy-700 hover:text-navy-900 transition-colors font-medium"
                  onClick={() => setMobileMenuOpen(false)}
                >
                  Contact
                </Link>
                
                {/* Mobile Auth Section */}
                {isAuthenticated ? (
                  <>
                    <Link 
                      href="/dashboard" 
                      className="text-navy-700 hover:text-navy-900 transition-colors font-medium"
                      onClick={() => setMobileMenuOpen(false)}
                    >
                      Dashboard
                    </Link>
                    <UserMenu variant="mobile" />
                  </>
                ) : (
                  <div className="flex flex-col space-y-2 pt-4 border-t border-cream-200">
                    <Link href="/login" onClick={() => setMobileMenuOpen(false)}>
                      <Button variant="ghost" className="w-full justify-start">
                        Sign In
                      </Button>
                    </Link>
                    <Link href="/register" onClick={() => setMobileMenuOpen(false)}>
                      <Button variant="outline" className="w-full justify-start">
                        Create Account
                      </Button>
                    </Link>
                    {onBookNowClick ? (
                      <Button 
                        variant="primary" 
                        onClick={() => {
                          onBookNowClick();
                          setMobileMenuOpen(false);
                        }}
                        className="w-full"
                      >
                        Book Now
                      </Button>
                    ) : (
                      <Link href="/book" onClick={() => setMobileMenuOpen(false)}>
                        <Button variant="primary" className="w-full">
                          Book Now
                        </Button>
                      </Link>
                    )}
                  </div>
                )}
              </nav>
            </div>
          )}
        </div>
      </header>

      {/* Main content */}
      <main className="flex-1">
        {children}
      </main>

      {/* Footer remains the same */}
      <footer className="bg-navy-900 text-white py-12">
        <div className="container mx-auto px-4">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <div className="text-xl font-serif mb-4">ToteTaxi</div>
              <p className="text-navy-300 text-sm">
                Luxury delivery service for Manhattan to Hamptons transport
              </p>
            </div>
            <div>
              <h4 className="font-medium mb-4">Services</h4>
              <ul className="space-y-2 text-navy-300 text-sm">
                <li><Link href="/services#mini-moves" className="hover:text-white transition-colors">Mini Moves</Link></li>
                <li><Link href="/services#standard-delivery" className="hover:text-white transition-colors">Standard Delivery</Link></li>
                <li><Link href="/services#specialty-items" className="hover:text-white transition-colors">Specialty Items</Link></li>
                <li><Link href="/services#organizing" className="hover:text-white transition-colors">Organizing Services</Link></li>
              </ul>
            </div>
            <div>
              <h4 className="font-medium mb-4">Company</h4>
              <ul className="space-y-2 text-navy-300 text-sm">
                <li><Link href="/about" className="hover:text-white transition-colors">About Us</Link></li>
                <li><Link href="/faq" className="hover:text-white transition-colors">FAQ</Link></li>
                <li><Link href="/contact" className="hover:text-white transition-colors">Contact</Link></li>
              </ul>
            </div>
            <div>
              <h4 className="font-medium mb-4">Contact</h4>
              <div className="text-navy-300 text-sm space-y-1">
                <p>(555) TOTE-TAXI</p>
                <p>hello@totetaxi.com</p>
                <p>Manhattan to Hamptons</p>
              </div>
            </div>
          </div>
          <div className="border-t border-navy-800 mt-8 pt-8 text-center text-navy-400 text-sm">
            <p>&copy; 2024 ToteTaxi. All rights reserved. | Premium delivery service for discerning clients.</p>
          </div>
        </div>
      </footer>
    </div>
  );
}
```

# ==== src/components/marketing/service-showcase.tsx ====

```
// frontend/src/components/marketing/service-showcase.tsx
'use client';

import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { Card, CardHeader, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import type { ServiceCatalog } from '@/types';

export function ServiceShowcase() {
  const { data: services, isLoading, error } = useQuery({
    queryKey: ['services', 'catalog'],
    queryFn: async (): Promise<ServiceCatalog> => {
      const response = await apiClient.get('/api/public/services/');
      return response.data;
    }
  });

  if (isLoading) {
    return (
      <section className="py-16 bg-cream-50">
        <div className="container mx-auto px-4">
          <div className="text-center">
            <div className="animate-pulse">
              <div className="h-8 bg-navy-200 rounded w-64 mx-auto mb-4"></div>
              <div className="h-4 bg-navy-100 rounded w-96 mx-auto"></div>
            </div>
          </div>
        </div>
      </section>
    );
  }

  if (error) {
    return (
      <section className="py-16 bg-cream-50">
        <div className="container mx-auto px-4 text-center">
          <p className="text-red-600">Unable to load services</p>
        </div>
      </section>
    );
  }

  return (
    <section className="py-16 bg-cream-50">
      <div className="container mx-auto px-4">
        {/* Section Header */}
        <div className="text-center mb-12">
          <h2 className="text-3xl font-serif font-bold text-navy-900 mb-4">
            Our Luxury Services
          </h2>
          <p className="text-lg text-navy-700 max-w-2xl mx-auto">
            From weekend getaways to seasonal relocations, we handle your Hamptons transport with premium care.
          </p>
        </div>

        {/* Mini Move Packages */}
        <div className="mb-16">
          <h3 className="text-2xl font-serif font-bold text-navy-900 text-center mb-8">
            Mini Moves
          </h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {services?.mini_move_packages?.map((pkg) => (
              <Card 
                key={pkg.id} 
                variant={pkg.is_most_popular ? "luxury" : "elevated"}
                className="relative"
              >
                {pkg.is_most_popular && (
                  <div className="absolute -top-3 left-1/2 transform -translate-x-1/2">
                    <span className="bg-gold-500 text-navy-900 px-4 py-1 rounded-full text-sm font-medium">
                      Most Popular
                    </span>
                  </div>
                )}
                
                <CardHeader>
                  <div className="text-center">
                    <h4 className="text-xl font-serif font-bold text-navy-900 mb-2">
                      {pkg.name}
                    </h4>
                    <div className="text-3xl font-bold text-navy-900 mb-2">
                      ${pkg.base_price_dollars}
                    </div>
                    {pkg.max_items && (
                      <p className="text-navy-600 text-sm">
                        Up to {pkg.max_items} items
                      </p>
                    )}
                  </div>
                </CardHeader>
                
                <CardContent>
                  <p className="text-navy-700 text-sm mb-4">{pkg.description}</p>
                  
                  <ul className="space-y-2 mb-6">
                    {pkg.coi_included && (
                      <li className="flex items-center text-sm text-navy-700">
                        <span className="text-green-500 mr-2">âœ“</span>
                        COI Included
                      </li>
                    )}
                    {pkg.priority_scheduling && (
                      <li className="flex items-center text-sm text-navy-700">
                        <span className="text-green-500 mr-2">âœ“</span>
                        Priority Scheduling
                      </li>
                    )}
                    {pkg.protective_wrapping && (
                      <li className="flex items-center text-sm text-navy-700">
                        <span className="text-green-500 mr-2">âœ“</span>
                        Protective Wrapping
                      </li>
                    )}
                  </ul>
                  
                  <Button 
                    variant={pkg.is_most_popular ? "primary" : "outline"} 
                    className="w-full"
                  >
                    Select {pkg.name}
                  </Button>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>

        {/* Standard Delivery */}
        {services?.standard_delivery && (
          <div className="mb-16">
            <h3 className="text-2xl font-serif font-bold text-navy-900 text-center mb-8">
              Standard Delivery
            </h3>
            <div className="max-w-2xl mx-auto">
              <Card variant="elevated">
                <CardContent>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-navy-900 mb-2">
                      ${services.standard_delivery.price_per_item_dollars} per item
                    </div>
                    <p className="text-navy-600 mb-4">
                      Minimum {services.standard_delivery.minimum_items} items â€¢ ${services.standard_delivery.minimum_charge_dollars} minimum
                    </p>
                    <p className="text-sm text-navy-700 mb-4">
                      Perfect for individual items under {services.standard_delivery.max_weight_per_item_lbs} lbs each
                    </p>
                    <div className="bg-gold-50 border border-gold-200 rounded-lg p-4 mb-4">
                      <p className="text-gold-800 font-medium">
                        Same-Day Delivery: ${services.standard_delivery.same_day_flat_rate_dollars}
                      </p>
                    </div>
                    <Button variant="outline" className="w-full">
                      Calculate Your Delivery
                    </Button>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        )}

        {/* Specialty Items */}
        {services?.specialty_items && services.specialty_items.length > 0 && (
          <div>
            <h3 className="text-2xl font-serif font-bold text-navy-900 text-center mb-8">
              Specialty Items
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
              {services.specialty_items.map((item) => (
                <Card key={item.id} variant="default">
                  <CardContent>
                    <div className="text-center">
                      <h4 className="font-medium text-navy-900 mb-2">{item.name}</h4>
                      <div className="text-xl font-bold text-navy-900 mb-2">
                        ${item.price_dollars}
                      </div>
                      <p className="text-navy-600 text-sm mb-3">{item.description}</p>
                      {item.special_handling && (
                        <span className="inline-block bg-gold-100 text-gold-800 text-xs px-2 py-1 rounded">
                          Special Handling
                        </span>
                      )}
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </div>
        )}
      </div>
    </section>
  );
}
```

# ==== src/components/providers/query-provider.tsx ====

```
// frontend/src/components/providers/query-provider.tsx
'use client';

import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';
import { useState } from 'react';
import { queryClient } from '@/lib/query-client';

interface QueryProviderProps {
  children: React.ReactNode;
}

export function QueryProvider({ children }: QueryProviderProps) {
  // Use the pre-configured client
  const [client] = useState(() => queryClient);

  return (
    <QueryClientProvider client={client}>
      {children}
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  );
}
```

# ==== src/components/staff/booking-calendar.tsx ====

```
'use client';

import { useState } from 'react';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Select } from '@/components/ui/select';

interface CalendarBooking {
  id: string;
  booking_number: string;
  customer_name: string;
  service_type: string;
  pickup_time: string;
  status: string;
  total_price_dollars: number;
  coi_required: boolean;
}

interface CalendarDay {
  date: string;
  available: boolean;
  is_weekend: boolean;
  capacity_used: number;
  max_capacity: number;
  bookings: CalendarBooking[];
  surcharges: Array<{ name: string; type: string; description: string }>;
}

interface CalendarData {
  availability: CalendarDay[];
  start_date: string;
  end_date: string;
}

const MONTHS = [
  'January', 'February', 'March', 'April', 'May', 'June',
  'July', 'August', 'September', 'October', 'November', 'December'
];

const WEEKDAYS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

export function BookingCalendar() {
  const [currentDate, setCurrentDate] = useState(new Date());
  const [selectedDate, setSelectedDate] = useState<string | null>(null);
  const queryClient = useQueryClient();

  // Get start of month for API call
  const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
  const endOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

  const { data: calendarData, isLoading } = useQuery({
    queryKey: ['calendar', 'availability', startOfMonth.toISOString().split('T')[0]],
    queryFn: async (): Promise<CalendarData> => {
      const response = await apiClient.get('/api/public/calendar/availability/', {
        params: {
          start_date: startOfMonth.toISOString().split('T')[0],
          end_date: endOfMonth.toISOString().split('T')[0]
        }
      });
      return response.data;
    }
  });

  const { data: bookingsData } = useQuery({
    queryKey: ['staff', 'bookings', 'calendar', startOfMonth.toISOString().split('T')[0]],
    queryFn: async () => {
      const response = await apiClient.get('/api/staff/bookings/', {
        params: {
          start_date: startOfMonth.toISOString().split('T')[0],
          end_date: endOfMonth.toISOString().split('T')[0]
        }
      });
      return response.data;
    }
  });

  // Navigate months
  const navigateMonth = (direction: 'prev' | 'next') => {
    const newDate = new Date(currentDate);
    if (direction === 'prev') {
      newDate.setMonth(newDate.getMonth() - 1);
    } else {
      newDate.setMonth(newDate.getMonth() + 1);
    }
    setCurrentDate(newDate);
  };

  // Get calendar grid
  const getCalendarDays = () => {
    if (!calendarData) return [];
    
    const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
    const lastDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
    const startDate = new Date(firstDayOfMonth);
    startDate.setDate(startDate.getDate() - firstDayOfMonth.getDay());
    
    const days = [];
    const currentDay = new Date(startDate);
    
    while (days.length < 42) { // 6 weeks Ã— 7 days
      const dateStr = currentDay.toISOString().split('T')[0];
      const dayData = calendarData.availability.find(day => day.date === dateStr);
      
      days.push({
        date: new Date(currentDay),
        dateStr,
        isCurrentMonth: currentDay.getMonth() === currentDate.getMonth(),
        isToday: dateStr === new Date().toISOString().split('T')[0],
        data: dayData
      });
      
      currentDay.setDate(currentDay.getDate() + 1);
    }
    
    return days;
  };

  const calendarDays = getCalendarDays();

  // Get capacity color
  const getCapacityColor = (day: any) => {
    if (!day.data) return 'bg-gray-100';
    const { capacity_used, max_capacity } = day.data;
    const utilization = capacity_used / max_capacity;
    
    if (utilization >= 1) return 'bg-red-100 border-red-300';
    if (utilization >= 0.8) return 'bg-amber-100 border-amber-300';
    if (utilization >= 0.5) return 'bg-yellow-100 border-yellow-300';
    return 'bg-green-100 border-green-300';
  };

  if (isLoading) {
    return (
      <div className="flex justify-center items-center h-96">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Calendar Header */}
      <div className="flex items-center justify-between">
        <div className="flex items-center space-x-4">
          <h1 className="text-2xl font-serif font-bold text-navy-900">
            Booking Calendar
          </h1>
          <div className="flex items-center space-x-2">
            <Button
              variant="outline"
              size="sm"
              onClick={() => navigateMonth('prev')}
            >
              â†
            </Button>
            <h2 className="text-lg font-medium min-w-[140px] text-center">
              {MONTHS[currentDate.getMonth()]} {currentDate.getFullYear()}
            </h2>
            <Button
              variant="outline"
              size="sm"
              onClick={() => navigateMonth('next')}
            >
              â†’
            </Button>
          </div>
        </div>
        
        <div className="flex items-center space-x-2">
          <Button variant="primary" size="sm">
            + New Booking
          </Button>
        </div>
      </div>

      {/* Calendar Legend */}
      <Card>
        <CardContent className="p-4">
          <div className="flex items-center space-x-6 text-sm">
            <div className="flex items-center space-x-2">
              <div className="w-4 h-4 bg-green-100 border border-green-300 rounded"></div>
              <span>Available</span>
            </div>
            <div className="flex items-center space-x-2">
              <div className="w-4 h-4 bg-yellow-100 border border-yellow-300 rounded"></div>
              <span>Moderate</span>
            </div>
            <div className="flex items-center space-x-2">
              <div className="w-4 h-4 bg-amber-100 border border-amber-300 rounded"></div>
              <span>Busy</span>
            </div>
            <div className="flex items-center space-x-2">
              <div className="w-4 h-4 bg-red-100 border border-red-300 rounded"></div>
              <span>Full</span>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Calendar Grid */}
      <Card>
        <CardContent className="p-0">
          <div className="grid grid-cols-7 gap-0">
            {/* Header row */}
            {WEEKDAYS.map(day => (
              <div key={day} className="bg-gray-50 px-3 py-2 text-sm font-medium text-gray-500 text-center border-b">
                {day}
              </div>
            ))}
            
            {/* Calendar days */}
            {calendarDays.map((day, index) => (
              <div
                key={index}
                className={`min-h-[120px] p-2 border-r border-b cursor-pointer hover:bg-gray-50 ${getCapacityColor(day)} ${
                  !day.isCurrentMonth ? 'opacity-30' : ''
                } ${day.isToday ? 'ring-2 ring-navy-500' : ''}`}
                onClick={() => setSelectedDate(day.dateStr)}
              >
                <div className="flex items-start justify-between">
                  <span className={`text-sm font-medium ${
                    day.isCurrentMonth ? 'text-gray-900' : 'text-gray-400'
                  }`}>
                    {day.date.getDate()}
                  </span>
                  
                  {day.data?.surcharges && day.data.surcharges.length > 0 && (
                    <span className="text-amber-600 text-xs">!</span>
                  )}
                </div>
                
                {day.data && (
                  <div className="mt-1 space-y-1">
                    <div className="text-xs text-gray-600">
                      {day.data.capacity_used}/{day.data.max_capacity} bookings
                    </div>
                    
                    {day.data.bookings?.slice(0, 2).map(booking => (
                      <div
                        key={booking.id}
                        className={`text-xs p-1 rounded truncate ${
                          booking.status === 'pending'
                            ? 'bg-amber-200 text-amber-800'
                            : booking.status === 'confirmed'
                            ? 'bg-blue-200 text-blue-800'
                            : 'bg-green-200 text-green-800'
                        }`}
                      >
                        {booking.booking_number}
                      </div>
                    ))}
                    
                    {day.data.bookings && day.data.bookings.length > 2 && (
                      <div className="text-xs text-gray-500">
                        +{day.data.bookings.length - 2} more
                      </div>
                    )}
                  </div>
                )}
              </div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Selected Date Details */}
      {selectedDate && (
        <SelectedDateDetails
          date={selectedDate}
          onClose={() => setSelectedDate(null)}
        />
      )}
    </div>
  );
}

function SelectedDateDetails({ date, onClose }: { date: string; onClose: () => void }) {
  return (
    <Card>
      <CardHeader className="flex flex-row items-center justify-between">
        <h3 className="text-lg font-medium">
          {new Date(date).toLocaleDateString('en-US', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
          })}
        </h3>
        <Button variant="ghost" onClick={onClose}>
          Ã—
        </Button>
      </CardHeader>
      <CardContent>
        <p className="text-gray-600">Detailed booking information for this date would appear here.</p>
      </CardContent>
    </Card>
  );
}
```

# ==== src/components/staff/booking-management.tsx ====

```
'use client';

import { useState } from 'react';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Select } from '@/components/ui/select';
import { useRouter } from 'next/navigation';

interface BookingListItem {
  id: string;
  booking_number: string;
  customer_name: string;
  customer_email: string;
  service_type: string;
  pickup_date: string;
  pickup_time: string;
  status: string;
  total_price_dollars: number;
  payment_status: string;
  created_at: string;
  coi_required: boolean;
}

interface BookingFilters {
  status?: string;
  date?: string;
  search?: string;
}

export function BookingManagement() {
  const router = useRouter();
  const queryClient = useQueryClient();
  const [filters, setFilters] = useState<BookingFilters>({});

  const { data: bookingData, isLoading, error } = useQuery({
    queryKey: ['staff', 'bookings', filters],
    queryFn: async () => {
      const params = new URLSearchParams();
      if (filters.status) params.append('status', filters.status);
      if (filters.date) params.append('date', filters.date);
      if (filters.search) params.append('search', filters.search);
      
      const response = await apiClient.get(`/api/staff/bookings/?${params}`);
      return response.data;
    },
  });

  const updateStatusMutation = useMutation({
    mutationFn: async ({ bookingId, status, notes }: { bookingId: string; status: string; notes?: string }) => {
      const response = await apiClient.patch(`/api/staff/bookings/${bookingId}/`, {
        status,
        staff_notes: notes
      });
      return response.data;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['staff', 'bookings'] });
      queryClient.invalidateQueries({ queryKey: ['staff', 'dashboard'] });
    }
  });

  const handleStatusUpdate = (bookingId: string, newStatus: string) => {
    const notes = prompt('Optional notes for this status change:');
    updateStatusMutation.mutate({ bookingId, status: newStatus, notes: notes || undefined });
  };

  const statusOptions = [
    { value: '', label: 'All Status' },
    { value: 'pending', label: 'Pending' },
    { value: 'confirmed', label: 'Confirmed' },
    { value: 'paid', label: 'Paid' },
    { value: 'completed', label: 'Completed' },
    { value: 'cancelled', label: 'Cancelled' },
  ];

  if (isLoading) {
    return (
      <div className="space-y-4">
        {[...Array(5)].map((_, i) => (
          <Card key={i} className="animate-pulse">
            <CardContent className="p-6">
              <div className="h-4 bg-gray-200 rounded mb-2"></div>
              <div className="h-8 bg-gray-200 rounded"></div>
            </CardContent>
          </Card>
        ))}
      </div>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="p-6 text-center">
          <p className="text-red-600">Failed to load bookings</p>
        </CardContent>
      </Card>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-serif font-bold text-navy-900">
          Booking Management
        </h1>
        <p className="text-navy-600">
          {bookingData?.total_count || 0} total bookings
        </p>
      </div>

      {/* Filters */}
      <Card>
        <CardContent className="p-4">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
            <Input
              placeholder="Search by booking #, name, or email"
              value={filters.search || ''}
              onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}
            />
            <Select
              options={statusOptions}
              value={filters.status || ''}
              onChange={(e) => setFilters(prev => ({ ...prev, status: e.target.value }))}
              placeholder="Filter by status"
            />
            <Input
              type="date"
              value={filters.date || ''}
              onChange={(e) => setFilters(prev => ({ ...prev, date: e.target.value }))}
            />
            <Button
              variant="outline"
              onClick={() => setFilters({})}
            >
              Clear Filters
            </Button>
          </div>
        </CardContent>
      </Card>

      {/* Bookings List */}
      <div className="space-y-4">
        {bookingData?.bookings?.map((booking: BookingListItem) => (
          <Card key={booking.id}>
            <CardContent className="p-6">
              <div className="flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0">
                {/* Booking Info */}
                <div className="flex-1">
                  <div className="flex items-center space-x-4 mb-2">
                    <h3 className="font-semibold text-navy-900">
                      #{booking.booking_number}
                    </h3>
                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                      booking.status === 'completed' 
                        ? 'bg-green-100 text-green-800'
                        : booking.status === 'paid'
                        ? 'bg-blue-100 text-blue-800'
                        : booking.status === 'confirmed'
                        ? 'bg-purple-100 text-purple-800'
                        : booking.status === 'pending'
                        ? 'bg-amber-100 text-amber-800'
                        : 'bg-red-100 text-red-800'
                    }`}>
                      {booking.status}
                    </span>
                    {booking.coi_required && (
                      <span className="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                        COI Required
                      </span>
                    )}
                  </div>
                  
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-navy-600">
                    <div>
                      <p><strong>Customer:</strong> {booking.customer_name}</p>
                      <p><strong>Email:</strong> {booking.customer_email}</p>
                      <p><strong>Service:</strong> {booking.service_type}</p>
                    </div>
                    <div>
                      <p><strong>Pickup Date:</strong> {new Date(booking.pickup_date).toLocaleDateString()}</p>
                      <p><strong>Pickup Time:</strong> {booking.pickup_time}</p>
                      <p><strong>Total:</strong> ${booking.total_price_dollars}</p>
                    </div>
                  </div>
                </div>

                {/* Actions */}
                <div className="flex flex-col space-y-2 lg:ml-6">
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => router.push(`/staff/bookings/${booking.id}`)}
                  >
                    View Details
                  </Button>
                  
                  {booking.status !== 'completed' && booking.status !== 'cancelled' && (
                    <div className="flex space-x-2">
                      {booking.status === 'pending' && (
                        <Button
                          variant="primary"
                          size="sm"
                          onClick={() => handleStatusUpdate(booking.id, 'confirmed')}
                          disabled={updateStatusMutation.isPending}
                        >
                          Confirm
                        </Button>
                      )}
                      {(booking.status === 'confirmed' || booking.status === 'paid') && (
                        <Button
                          variant="primary"
                          size="sm"
                          onClick={() => handleStatusUpdate(booking.id, 'completed')}
                          disabled={updateStatusMutation.isPending}
                        >
                          Complete
                        </Button>
                      )}
                    </div>
                  )}
                </div>
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      {bookingData?.bookings?.length === 0 && (
        <Card>
          <CardContent className="p-12 text-center">
            <p className="text-navy-600">No bookings found with current filters</p>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
```

# ==== src/components/staff/customer-management.tsx ====

```
'use client';

import { useState } from 'react';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Select } from '@/components/ui/select';
import { 
  MagnifyingGlassIcon,
  StarIcon,
  PhoneIcon,
  EnvelopeIcon,
  MapPinIcon,
  PencilIcon,
  CheckIcon,
  XMarkIcon
} from '@heroicons/react/24/outline';

interface CustomerProfile {
  id: string;
  name: string;
  email: string;
  phone: string;
  is_vip: boolean;
  total_bookings: number;
  total_spent_dollars: number;
  last_booking_at: string | null;
  created_at: string;
  notes: string;
  recent_bookings: Array<{
    id: string;
    booking_number: string;
    service_type: string;
    status: string;
    total_price_dollars: number;
    created_at: string;
  }>;
  saved_addresses: Array<{
    id: string;
    address_line_1: string;
    city: string;
    state: string;
    is_primary: boolean;
  }>;
}

export function CustomerManagement() {
  const [searchTerm, setSearchTerm] = useState('');
  const [vipFilter, setVipFilter] = useState('');
  const [selectedCustomer, setSelectedCustomer] = useState<string | null>(null);

  const { data: customersData, isLoading } = useQuery({
    queryKey: ['staff', 'customers', searchTerm, vipFilter],
    queryFn: async () => {
      const params = new URLSearchParams();
      if (searchTerm) params.append('search', searchTerm);
      if (vipFilter) params.append('vip', vipFilter);
      
      const response = await apiClient.get(`/api/staff/customers/?${params}`);
      return response.data;
    }
  });

  const { data: customerDetail } = useQuery({
    queryKey: ['staff', 'customer', selectedCustomer],
    queryFn: async (): Promise<CustomerProfile> => {
      const response = await apiClient.get(`/api/staff/customers/${selectedCustomer}/`);
      return response.data;
    },
    enabled: !!selectedCustomer
  });

  const vipOptions = [
    { value: '', label: 'All Customers' },
    { value: 'true', label: 'VIP Only' },
    { value: 'false', label: 'Standard Only' }
  ];

  if (isLoading) {
    return (
      <div className="flex justify-center items-center h-96">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-navy-900"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-serif font-bold text-navy-900">
          Customer Management
        </h1>
        <p className="text-navy-600">
          {customersData?.total_count || 0} customers
        </p>
      </div>

      {/* Search and Filters */}
      <Card>
        <CardContent className="p-4">
          <div className="flex space-x-4">
            <div className="flex-1 relative">
              <MagnifyingGlassIcon className="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" />
              <Input
                placeholder="Search customers by name or email"
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="pl-10"
              />
            </div>
            <Select
              options={vipOptions}
              value={vipFilter}
              onChange={(e) => setVipFilter(e.target.value)}
              className="w-48"
            />
          </div>
        </CardContent>
      </Card>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Customer List */}
        <div className="lg:col-span-2 space-y-4">
          {customersData?.customers?.map((customer: any) => (
            <Card 
              key={customer.id} 
              className={`cursor-pointer transition-all hover:shadow-md ${
                selectedCustomer === customer.id ? 'ring-2 ring-navy-500' : ''
              }`}
              onClick={() => setSelectedCustomer(customer.id)}
            >
              <CardContent className="p-6">
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <div className="flex items-center space-x-2 mb-2">
                      <h3 className="font-semibold text-navy-900">{customer.name}</h3>
                      {customer.is_vip && (
                        <StarIcon className="h-4 w-4 text-gold-500 fill-current" />
                      )}
                    </div>
                    
                    <div className="space-y-1 text-sm text-navy-600">
                      <div className="flex items-center space-x-2">
                        <EnvelopeIcon className="h-4 w-4" />
                        <span>{customer.email}</span>
                      </div>
                      {customer.phone && (
                        <div className="flex items-center space-x-2">
                          <PhoneIcon className="h-4 w-4" />
                          <span>{customer.phone}</span>
                        </div>
                      )}
                    </div>
                  </div>
                  
                  <div className="text-right">
                    <div className="text-lg font-semibold text-navy-900">
                      ${customer.total_spent_dollars?.toLocaleString() || 0}
                    </div>
                    <div className="text-sm text-navy-600">
                      {customer.total_bookings || 0} bookings
                    </div>
                    {customer.last_booking_at && (
                      <div className="text-xs text-navy-500">
                        Last: {new Date(customer.last_booking_at).toLocaleDateString()}
                      </div>
                    )}
                  </div>
                </div>
              </CardContent>
            </Card>
          ))}
        </div>

        {/* Customer Detail Panel */}
        <div className="space-y-6">
          {selectedCustomer && customerDetail ? (
            <CustomerDetailPanel customer={customerDetail} />
          ) : (
            <Card>
              <CardContent className="p-6 text-center text-gray-500">
                Select a customer to view details
              </CardContent>
            </Card>
          )}
        </div>
      </div>
    </div>
  );
}

function CustomerDetailPanel({ customer }: { customer: CustomerProfile }) {
  const [isEditingNotes, setIsEditingNotes] = useState(false);
  const [notesValue, setNotesValue] = useState(customer.notes || '');
  const queryClient = useQueryClient();

  const updateNotesMutation = useMutation({
    mutationFn: async (notes: string) => {
      const response = await apiClient.patch(`/api/customer/${customer.id}/notes/`, {
        notes
      });
      return response.data;
    },
    onSuccess: () => {
      // Refresh customer detail
      queryClient.invalidateQueries({ queryKey: ['staff', 'customer', customer.id] });
      setIsEditingNotes(false);
    },
    onError: (error) => {
      console.error('Failed to update notes:', error);
      alert('Failed to update notes. Please try again.');
    }
  });

  const handleSaveNotes = () => {
    updateNotesMutation.mutate(notesValue);
  };

  const handleCancelNotes = () => {
    setNotesValue(customer.notes || '');
    setIsEditingNotes(false);
  };

  return (
    <div className="space-y-6">
      {/* Customer Overview */}
      <Card>
        <CardHeader>
          <div className="flex items-center justify-between">
            <h3 className="text-lg font-medium">Customer Details</h3>
            {customer.is_vip && (
              <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gold-100 text-gold-800">
                <StarIcon className="h-3 w-3 mr-1 fill-current" />
                VIP Member
              </span>
            )}
          </div>
        </CardHeader>
        <CardContent className="space-y-4">
          <div>
            <h4 className="font-medium text-navy-900">{customer.name}</h4>
            <p className="text-sm text-navy-600">{customer.email}</p>
            {customer.phone && <p className="text-sm text-navy-600">{customer.phone}</p>}
          </div>
          
          <div className="grid grid-cols-2 gap-4 text-center">
            <div>
              <div className="text-2xl font-bold text-navy-900">{customer.total_bookings}</div>
              <div className="text-sm text-navy-600">Total Bookings</div>
            </div>
            <div>
              <div className="text-2xl font-bold text-green-600">
                ${customer.total_spent_dollars?.toLocaleString() || 0}
              </div>
              <div className="text-sm text-navy-600">Total Spent</div>
            </div>
          </div>
          
          <div className="text-sm text-navy-600">
            <strong>Member since:</strong> {new Date(customer.created_at).toLocaleDateString()}
          </div>
        </CardContent>
      </Card>

      {/* Staff Notes - NEW */}
      <Card>
        <CardHeader>
          <div className="flex items-center justify-between">
            <h3 className="text-lg font-medium">Staff Notes</h3>
            {!isEditingNotes && (
              <Button
                variant="ghost"
                size="sm"
                onClick={() => setIsEditingNotes(true)}
              >
                <PencilIcon className="h-4 w-4 mr-1" />
                Edit
              </Button>
            )}
          </div>
        </CardHeader>
        <CardContent>
          {isEditingNotes ? (
            <div className="space-y-3">
              <textarea
                value={notesValue}
                onChange={(e) => setNotesValue(e.target.value)}
                placeholder="Add notes about customer preferences, special requests, VIP details, etc."
                className="w-full p-3 border border-gray-300 rounded-lg resize-vertical min-h-[100px] text-navy-900"
                rows={4}
              />
              <div className="flex space-x-2">
                <Button
                  variant="primary"
                  size="sm"
                  onClick={handleSaveNotes}
                  disabled={updateNotesMutation.isPending}
                >
                  <CheckIcon className="h-4 w-4 mr-1" />
                  {updateNotesMutation.isPending ? 'Saving...' : 'Save'}
                </Button>
                <Button
                  variant="outline"
                  size="sm"
                  onClick={handleCancelNotes}
                  disabled={updateNotesMutation.isPending}
                >
                  <XMarkIcon className="h-4 w-4 mr-1" />
                  Cancel
                </Button>
              </div>
            </div>
          ) : (
            <div className="min-h-[60px]">
              {customer.notes ? (
                <p className="text-navy-700 whitespace-pre-wrap">{customer.notes}</p>
              ) : (
                <p className="text-gray-500 italic">No notes added yet. Click Edit to add customer notes.</p>
              )}
            </div>
          )}
        </CardContent>
      </Card>

      {/* Recent Bookings */}
      <Card>
        <CardHeader>
          <h3 className="text-lg font-medium">Recent Bookings</h3>
        </CardHeader>
        <CardContent>
          <div className="space-y-3">
            {customer.recent_bookings?.slice(0, 5).map(booking => (
              <div key={booking.id} className="flex justify-between items-center p-3 bg-cream-50 rounded-lg">
                <div>
                  <div className="font-medium text-navy-900">#{booking.booking_number}</div>
                  <div className="text-sm text-navy-600">{booking.service_type}</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">${booking.total_price_dollars}</div>
                  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                    booking.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-amber-100 text-amber-800'
                  }`}>
                    {booking.status}
                  </span>
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Saved Addresses */}
      {customer.saved_addresses?.length > 0 && (
        <Card>
          <CardHeader>
            <h3 className="text-lg font-medium">Saved Addresses</h3>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {customer.saved_addresses.map(address => (
                <div key={address.id} className="flex items-start space-x-3 p-3 bg-cream-50 rounded-lg">
                  <MapPinIcon className="h-4 w-4 text-navy-600 mt-1 flex-shrink-0" />
                  <div>
                    <div className="font-medium text-navy-900">{address.address_line_1}</div>
                    <div className="text-sm text-navy-600">
                      {address.city}, {address.state}
                    </div>
                    {address.is_primary && (
                      <span className="inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-navy-100 text-navy-800 mt-1">
                        Primary
                      </span>
                    )}
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
```

# ==== src/components/staff/index.ts ====

```
// Staff component exports
// frontend/src/components/staff/index.ts
export { StaffLoginForm } from './staff-login-form';
export { StaffDashboardOverview } from './staff-dashboard-overview';
export { BookingManagement } from './booking-management';
export { BookingCalendar } from './booking-calendar';
export { CustomerManagement } from './customer-management';
export { StaffLayout } from './staff-layout';
```

# ==== src/components/staff/staff-dashboard-overview.tsx ====

```
'use client';
// frontend/src/components/staff/staff-dashboard-overview.tsx
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { useRouter } from 'next/navigation';

interface StaffDashboardData {
  staff_info: {
    name: string;
    role: string;
    permissions: {
      can_approve_refunds: boolean;
      can_manage_staff: boolean;
      can_view_financial_reports: boolean;
    };
  };
  booking_stats: {
    total_bookings: number;
    pending_bookings: number;
    confirmed_bookings: number;
    paid_bookings: number;
    completed_bookings: number;
  };
  payment_stats: {
    total_payments: number;
    pending_payments: number;
    failed_payments: number;
    total_revenue_dollars: number;
  };
  customer_stats: {
    total_customers: number;
    vip_customers: number;
  };
  urgent_bookings: Array<{
    id: string;
    booking_number: string;
    customer_name: string;
    customer_email: string;
    service_type: string;
    pickup_date: string;
    status: string;
    total_price_dollars: number;
    created_at: string;
  }>;
}

export function StaffDashboardOverview() {
  const { staffProfile } = useStaffAuthStore();
  const router = useRouter();

  const { data: dashboardData, isLoading, error, refetch } = useQuery({
    queryKey: ['staff', 'dashboard'],
    queryFn: async (): Promise<StaffDashboardData> => {
      const response = await apiClient.get('/api/staff/dashboard/');
      return response.data;
    },
    enabled: !!staffProfile,
    refetchInterval: 30000, // Refresh every 30 seconds
  });

  if (isLoading) {
    return (
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {[...Array(8)].map((_, i) => (
          <Card key={i} className="animate-pulse">
            <CardContent className="p-6">
              <div className="h-4 bg-gray-200 rounded mb-2"></div>
              <div className="h-8 bg-gray-200 rounded"></div>
            </CardContent>
          </Card>
        ))}
      </div>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="p-6 text-center">
          <p className="text-red-600">Failed to load dashboard data</p>
          <Button 
            variant="outline" 
            onClick={() => refetch()}
            className="mt-4"
          >
            Retry
          </Button>
        </CardContent>
      </Card>
    );
  }

  const bookingStats = dashboardData?.booking_stats;
  const paymentStats = dashboardData?.payment_stats;
  const customerStats = dashboardData?.customer_stats;

  // Helper function for payment success rate calculation
  const calculateSuccessRate = () => {
    if (!paymentStats) return '0%';
    const { total_payments = 0, failed_payments = 0 } = paymentStats;
    if (total_payments === 0 && failed_payments === 0) return '0%';
    const successRate = Math.round((total_payments / (total_payments + failed_payments)) * 100);
    return `${successRate}%`;
  };

  return (
    <div className="space-y-6">
      {/* Welcome Header */}
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-2xl font-serif font-bold text-navy-900">
            Operations Dashboard
          </h1>
          <p className="text-navy-600">
            Welcome back, {dashboardData?.staff_info?.name || 'Staff'} ({dashboardData?.staff_info?.role || 'staff'})
          </p>
        </div>
        <div className="flex space-x-2">
          <Button 
            variant="outline"
            onClick={() => router.push('/staff/bookings')}
          >
            All Bookings
          </Button>
          <Button 
            variant="primary"
            onClick={() => refetch()}
          >
            Refresh Data
          </Button>
        </div>
      </div>

      {/* Key Metrics */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {/* Booking Metrics */}
        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">Total Bookings</h3>
          </CardHeader>
          <CardContent>
            <div className="text-3xl font-bold text-navy-900">
              {bookingStats?.total_bookings || 0}
            </div>
            <p className="text-xs text-navy-600">All time</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">Pending Actions</h3>
          </CardHeader>
          <CardContent>
            <div className="text-3xl font-bold text-amber-600">
              {(bookingStats?.pending_bookings || 0) + (bookingStats?.confirmed_bookings || 0)}
            </div>
            <p className="text-xs text-navy-600">Need attention</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">Revenue</h3>
          </CardHeader>
          <CardContent>
            <div className="text-3xl font-bold text-green-600">
              ${paymentStats?.total_revenue_dollars?.toLocaleString() || 0}
            </div>
            <p className="text-xs text-navy-600">Total processed</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <h3 className="text-sm font-medium text-navy-600">VIP Customers</h3>
          </CardHeader>
          <CardContent>
            <div className="text-3xl font-bold text-gold-600">
              {customerStats?.vip_customers || 0}
            </div>
            <p className="text-xs text-navy-600">
              of {customerStats?.total_customers || 0} total
            </p>
          </CardContent>
        </Card>
      </div>

      {/* Detailed Stats Grid */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {/* Booking Status Breakdown */}
        <Card>
          <CardHeader>
            <h3 className="text-lg font-medium text-navy-900">Booking Status</h3>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Pending</span>
                <span className="font-medium text-amber-600">
                  {bookingStats?.pending_bookings || 0}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Confirmed</span>
                <span className="font-medium text-blue-600">
                  {bookingStats?.confirmed_bookings || 0}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Paid</span>
                <span className="font-medium text-green-600">
                  {bookingStats?.paid_bookings || 0}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Completed</span>
                <span className="font-medium text-navy-900">
                  {bookingStats?.completed_bookings || 0}
                </span>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Payment Status */}
        <Card>
          <CardHeader>
            <h3 className="text-lg font-medium text-navy-900">Payment Status</h3>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Processed</span>
                <span className="font-medium text-green-600">
                  {paymentStats?.total_payments || 0}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Pending</span>
                <span className="font-medium text-amber-600">
                  {paymentStats?.pending_payments || 0}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Failed</span>
                <span className="font-medium text-red-600">
                  {paymentStats?.failed_payments || 0}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-navy-600">Success Rate</span>
                <span className="font-medium text-navy-900">
                  {calculateSuccessRate()}
                </span>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Urgent Bookings */}
      {dashboardData?.urgent_bookings && dashboardData.urgent_bookings.length > 0 && (
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <h3 className="text-lg font-medium text-navy-900">Bookings Needing Attention</h3>
            <Button 
              variant="ghost" 
              onClick={() => router.push('/staff/bookings?filter=urgent')}
            >
              View All
            </Button>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {dashboardData.urgent_bookings.slice(0, 5).map((booking) => (
                <div 
                  key={booking.id} 
                  className="flex items-center justify-between p-3 border border-cream-200 rounded-lg hover:bg-cream-50 cursor-pointer"
                  onClick={() => router.push(`/staff/bookings/${booking.id}`)}
                >
                  <div>
                    <p className="font-medium text-navy-900">
                      #{booking.booking_number}
                    </p>
                    <p className="text-sm text-navy-600">
                      {booking.customer_name} - {booking.service_type}
                    </p>
                    <p className="text-xs text-navy-500">
                      Pickup: {new Date(booking.pickup_date).toLocaleDateString()}
                    </p>
                  </div>
                  <div className="text-right">
                    <p className="font-medium text-navy-900">
                      ${booking.total_price_dollars}
                    </p>
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                      booking.status === 'pending' 
                        ? 'bg-amber-100 text-amber-800'
                        : 'bg-blue-100 text-blue-800'
                    }`}>
                      {booking.status}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
```

# ==== src/components/staff/staff-layout.tsx ====

```
'use client';

import { useState } from 'react';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { useRouter, usePathname } from 'next/navigation';
import { apiClient } from '@/lib/api-client';
import { useMutation } from '@tanstack/react-query';
import Link from 'next/link';

interface StaffLayoutProps {
  children: React.ReactNode;
}

const navigation = [
  { name: 'Dashboard', href: '/staff/dashboard' },
  { name: 'Calendar', href: '/staff/calendar' },
  { name: 'Bookings', href: '/staff/bookings' },
  { name: 'Customers', href: '/staff/customers' },
  { name: 'Logistics', href: '/staff/logistics' },
  { name: 'Reports', href: '/staff/reports' }
];

export function StaffLayout({ children }: StaffLayoutProps) {
  const { staffProfile, clearAuth } = useStaffAuthStore();
  const router = useRouter();
  const pathname = usePathname();
  const [sidebarOpen, setSidebarOpen] = useState(false);

  const logoutMutation = useMutation({
    mutationFn: async () => {
      await apiClient.post('/api/staff/auth/logout/');
    },
    onSuccess: () => {
      clearAuth();
      router.push('/staff/login');
    },
    onError: () => {
      clearAuth();
      router.push('/staff/login');
    }
  });

  const handleLogout = () => {
    logoutMutation.mutate();
  };

  return (
    <div className="min-h-screen bg-cream-50 flex">
      {/* Mobile sidebar overlay */}
      {sidebarOpen && (
        <div className="fixed inset-0 z-40 lg:hidden">
          <div 
            className="fixed inset-0 bg-gray-600 bg-opacity-75" 
            onClick={() => setSidebarOpen(false)} 
          />
          <div className="relative flex w-full max-w-xs flex-1 flex-col bg-navy-900">
            <div className="absolute top-0 right-0 -mr-12 pt-2">
              <button
                type="button"
                className="ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white text-white"
                onClick={() => setSidebarOpen(false)}
              >
                Ã—
              </button>
            </div>
            <SidebarContent navigation={navigation} pathname={pathname} />
          </div>
        </div>
      )}

      {/* Desktop sidebar */}
      <div className="hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0 lg:bg-navy-900">
        <SidebarContent navigation={navigation} pathname={pathname} />
      </div>

      {/* Main content */}
      <div className="lg:pl-64 flex flex-1 flex-col">
        {/* Top navigation */}
        <div className="sticky top-0 z-10 flex h-16 flex-shrink-0 bg-white shadow">
          <button
            type="button"
            className="border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-navy-500 lg:hidden"
            onClick={() => setSidebarOpen(true)}
          >
            â˜°
          </button>

          <div className="flex flex-1 justify-between px-4">
            <div className="flex flex-1">
              {/* Breadcrumb or page title can go here */}
            </div>
            <div className="ml-4 flex items-center space-x-4">
              <span className="text-sm text-gray-700">
                {staffProfile?.full_name || 'Staff User'}
              </span>
              <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-navy-100 text-navy-800">
                {staffProfile?.role || 'staff'}
              </span>
              <button
                onClick={handleLogout}
                disabled={logoutMutation.isPending}
                className="text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-navy-500 disabled:opacity-50"
              >
                {logoutMutation.isPending ? 'Logging out...' : 'Logout'}
              </button>
            </div>
          </div>
        </div>

        {/* Page content */}
        <main className="flex-1 overflow-y-auto">
          <div className="py-6">
            <div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
              {children}
            </div>
          </div>
        </main>
      </div>
    </div>
  );
}

function SidebarContent({ navigation, pathname }: { 
  navigation: Array<{ name: string; href: string }>;
  pathname: string;
}) {
  return (
    <div className="flex flex-1 flex-col min-h-0">
      <div className="flex items-center h-16 flex-shrink-0 px-4 bg-navy-800">
        <h1 className="text-lg font-bold text-white">ToteTaxi Operations</h1>
      </div>
      <div className="flex-1 flex flex-col overflow-y-auto">
        <nav className="flex-1 px-2 py-4 space-y-1">
          {navigation.map((item) => {
            const isActive = pathname === item.href || pathname.startsWith(item.href + '/');
            return (
              <Link
                key={item.name}
                href={item.href}
                className={`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${
                  isActive
                    ? 'bg-navy-800 text-white'
                    : 'text-navy-100 hover:bg-navy-700 hover:text-white'
                }`}
              >
                {item.name}
              </Link>
            );
          })}
        </nav>
      </div>
    </div>
  );
}
```

# ==== src/components/staff/staff-login-form.tsx ====

```
'use client';
// frontend/src/components/staff/staff-login-form.tsx
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useMutation } from '@tanstack/react-query';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { useStaffAuthStore } from '@/stores/staff-auth-store';
import { apiClient } from '@/lib/api-client';

const staffLoginSchema = z.object({
  username: z.string().min(1, 'Username is required'),
  password: z.string().min(1, 'Password is required'),
});

type StaffLoginForm = z.infer<typeof staffLoginSchema>;

export function StaffLoginForm() {
  const router = useRouter();
  const { setAuth, setLoading } = useStaffAuthStore();
  const [apiError, setApiError] = useState<string>('');

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting }
  } = useForm<StaffLoginForm>({
    resolver: zodResolver(staffLoginSchema)
  });

  const loginMutation = useMutation({
    mutationFn: async (data: StaffLoginForm) => {
      const response = await apiClient.post('/api/staff/auth/login/', data);
      return response.data;
    },
    onSuccess: (data) => {
      setAuth(data.user, data.staff_profile);
      router.push('/staff/dashboard');
    },
    onError: (error: any) => {
      const message = error.response?.data?.error || 'Login failed. Please try again.';
      setApiError(message);
    }
  });

  const onSubmit = (data: StaffLoginForm) => {
    setApiError('');
    setLoading(true);
    loginMutation.mutate(data);
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-cream-50 py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8">
        <div className="text-center">
          <h2 className="text-3xl font-serif font-bold text-navy-900">
            Staff Login
          </h2>
          <p className="mt-2 text-sm text-navy-600">
            ToteTaxi Operations Dashboard
          </p>
        </div>

        <Card variant="elevated">
          <CardContent className="p-6">
            <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
              <div>
                <label htmlFor="username" className="block text-sm font-medium text-navy-900 mb-1">
                  Username *
                </label>
                <Input
                  id="username"
                  {...register('username')}
                  placeholder="Enter your username"
                  className={errors.username ? 'border-red-500' : ''}
                />
                {errors.username && (
                  <p className="text-red-600 text-sm mt-1">{errors.username.message}</p>
                )}
              </div>

              <div>
                <label htmlFor="password" className="block text-sm font-medium text-navy-900 mb-1">
                  Password *
                </label>
                <Input
                  id="password"
                  type="password"
                  {...register('password')}
                  placeholder="Enter your password"
                  className={errors.password ? 'border-red-500' : ''}
                />
                {errors.password && (
                  <p className="text-red-600 text-sm mt-1">{errors.password.message}</p>
                )}
              </div>

              {apiError && (
                <div className="bg-red-50 border border-red-200 rounded-md p-3">
                  <p className="text-red-700 text-sm">{apiError}</p>
                </div>
              )}

              <Button
                type="submit"
                variant="primary"
                size="lg"
                className="w-full"
                disabled={isSubmitting || loginMutation.isPending}
              >
                {isSubmitting || loginMutation.isPending ? 'Signing In...' : 'Sign In'}
              </Button>
            </form>
          </CardContent>
        </Card>

        <div className="text-center text-xs text-navy-600">
          <p>
            Need access? Contact your administrator.<br/>
            This system logs all authentication attempts.
          </p>
        </div>
      </div>
    </div>
  );
}
```

# ==== src/components/test-api-connection.tsx ====

```
// frontend/src/components/test-api-connection.tsx
'use client';

import { useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/lib/api-client';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

export function TestAPIConnection() {
  const [testResults, setTestResults] = useState<Record<string, any>>({});

  // Test services endpoint
  const { data: services, isLoading: servicesLoading, error: servicesError } = useQuery({
    queryKey: ['test', 'services'],
    queryFn: async () => {
      const response = await apiClient.get('/api/public/services/');
      return response.data;
    }
  });

  // Test availability endpoint
  const testAvailability = async () => {
    try {
      const response = await apiClient.get('/api/public/availability/');
      setTestResults(prev => ({ ...prev, availability: { success: true, data: response.data } }));
    } catch (error) {
      setTestResults(prev => ({ ...prev, availability: { success: false, error: error.message } }));
    }
  };

  // Test pricing preview endpoint
  const testPricing = async () => {
    try {
      const response = await apiClient.post('/api/public/pricing-preview/', {
        service_type: 'mini_move',
        pickup_date: new Date().toISOString().split('T')[0],
        mini_move_package_id: services?.mini_move_packages?.[0]?.id,
        include_packing: false,
        include_unpacking: false,
        coi_required: false
      });
      setTestResults(prev => ({ ...prev, pricing: { success: true, data: response.data } }));
    } catch (error) {
      setTestResults(prev => ({ ...prev, pricing: { success: false, error: error.message } }));
    }
  };

  if (process.env.NODE_ENV === 'production') {
    return null; // Hide in production
  }

  return (
    <Card variant="elevated" className="mb-8">
      <CardHeader>
        <h3 className="text-lg font-medium text-navy-900">API Connection Test</h3>
      </CardHeader>
      <CardContent>
        <div className="space-y-4">
          {/* Services Test */}
          <div className="flex items-center justify-between p-3 bg-gray-50 rounded">
            <div>
              <span className="font-medium">Services Endpoint:</span>
              <div className="text-sm">
                {servicesLoading && <span className="text-blue-600">Loading...</span>}
                {servicesError && <span className="text-red-600">Error: {servicesError.message}</span>}
                {services && <span className="text-green-600">âœ“ Connected ({services.mini_move_packages?.length || 0} packages loaded)</span>}
              </div>
            </div>
          </div>

          {/* Availability Test */}
          <div className="flex items-center justify-between p-3 bg-gray-50 rounded">
            <div>
              <span className="font-medium">Availability Test:</span>
              <div className="text-sm">
                {testResults.availability?.success && <span className="text-green-600">âœ“ Working</span>}
                {testResults.availability?.success === false && (
                  <span className="text-red-600">âœ— Failed: {testResults.availability.error}</span>
                )}
              </div>
            </div>
            <Button size="sm" onClick={testAvailability}>Test</Button>
          </div>

          {/* Pricing Test */}
          <div className="flex items-center justify-between p-3 bg-gray-50 rounded">
            <div>
              <span className="font-medium">Pricing Test:</span>
              <div className="text-sm">
                {testResults.pricing?.success && (
                  <span className="text-green-600">
                    âœ“ Working (${testResults.pricing.data.pricing.total_price_dollars})
                  </span>
                )}
                {testResults.pricing?.success === false && (
                  <span className="text-red-600">âœ— Failed: {testResults.pricing.error}</span>
                )}
              </div>
            </div>
            <Button size="sm" onClick={testPricing} disabled={!services}>Test</Button>
          </div>

          <div className="text-xs text-gray-500 text-center">
            Backend URL: {process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8005'}
          </div>
        </div>
      </CardContent>
    </Card>
  );
}
```

# ==== src/components/ui/button.tsx ====

```
// frontend/src/components/ui/button.tsx
import { cn } from '@/utils/cn';
import { ButtonHTMLAttributes, forwardRef } from 'react';

// Easy to change - all styling in config objects
const buttonVariants = {
  variant: {
    primary: 'bg-navy-900 text-white hover:bg-navy-800 focus:ring-navy-500',
    secondary: 'bg-gold-500 text-navy-900 hover:bg-gold-600 focus:ring-gold-400',
    outline: 'border-2 border-navy-900 text-navy-900 hover:bg-navy-50 focus:ring-navy-300',
    ghost: 'text-navy-900 hover:bg-navy-100 focus:ring-navy-300',
  },
  size: {
    sm: 'px-3 py-2 text-sm',
    md: 'px-4 py-2 text-base',
    lg: 'px-6 py-3 text-lg',
    xl: 'px-8 py-4 text-xl',
  },
  rounded: {
    none: 'rounded-none',
    sm: 'rounded',
    md: 'rounded-md',
    lg: 'rounded-lg',
    full: 'rounded-full',
  }
};

// Base styles that rarely change
const baseStyles = 'inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: keyof typeof buttonVariants.variant;
  size?: keyof typeof buttonVariants.size;
  rounded?: keyof typeof buttonVariants.rounded;
  children: React.ReactNode;
}

export const Button = forwardRef<HTMLButtonElement, ButtonProps>(({
  variant = 'primary',
  size = 'md',
  rounded = 'md',
  className,
  children,
  ...props
}, ref) => {
  return (
    <button
      ref={ref}
      className={cn(
        baseStyles,
        buttonVariants.variant[variant],
        buttonVariants.size[size],
        buttonVariants.rounded[rounded],
        className
      )}
      {...props}
    >
      {children}
    </button>
  );
});

Button.displayName = 'Button';
```

# ==== src/components/ui/card.tsx ====

```
// frontend/src/components/ui/card.tsx
import { cn } from '@/utils/cn';
import { HTMLAttributes, forwardRef } from 'react';

// Easy to change card styling
const cardVariants = {
  variant: {
    default: 'bg-white border border-gray-200',
    elevated: 'bg-white shadow-lg shadow-navy-900/10',
    luxury: 'bg-white border border-gold-200 shadow-xl shadow-navy-900/20',
    ghost: 'bg-transparent border-0',
  },
  padding: {
    none: 'p-0',
    sm: 'p-4',
    md: 'p-6',
    lg: 'p-8',
  },
  rounded: {
    none: 'rounded-none',
    sm: 'rounded',
    md: 'rounded-md',
    lg: 'rounded-lg',
    xl: 'rounded-xl',
  }
};

const baseStyles = 'transition-all duration-200';

interface CardProps extends HTMLAttributes<HTMLDivElement> {
  variant?: keyof typeof cardVariants.variant;
  padding?: keyof typeof cardVariants.padding;
  rounded?: keyof typeof cardVariants.rounded;
  children: React.ReactNode;
}

export const Card = forwardRef<HTMLDivElement, CardProps>(({
  variant = 'default',
  padding = 'md',
  rounded = 'lg',
  className,
  children,
  ...props
}, ref) => {
  return (
    <div
      ref={ref}
      className={cn(
        baseStyles,
        cardVariants.variant[variant],
        cardVariants.padding[padding],
        cardVariants.rounded[rounded],
        className
      )}
      {...props}
    >
      {children}
    </div>
  );
});

Card.displayName = 'Card';

// Subcomponents for structured content
export const CardHeader = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(({
  className,
  children,
  ...props
}, ref) => (
  <div ref={ref} className={cn('pb-4 border-b border-gray-100', className)} {...props}>
    {children}
  </div>
));

CardHeader.displayName = 'CardHeader';

export const CardContent = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(({
  className,
  children,
  ...props
}, ref) => (
  <div ref={ref} className={cn('py-4', className)} {...props}>
    {children}
  </div>
));

CardContent.displayName = 'CardContent';

export const CardFooter = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(({
  className,
  children,
  ...props
}, ref) => (
  <div ref={ref} className={cn('pt-4 border-t border-gray-100', className)} {...props}>
    {children}
  </div>
));

CardFooter.displayName = 'CardFooter';
```

# ==== src/components/ui/index.ts ====

```
// frontend/src/components/ui/index.ts
export { Button } from './button';
export { Input } from './input';
export { Card, CardHeader, CardContent, CardFooter } from './card';
export { Modal } from './modal';
export { Select } from './select';
```

# ==== src/components/ui/input.tsx ====

```
// frontend/src/components/ui/input.tsx
import { cn } from '@/utils/cn';
import { InputHTMLAttributes, forwardRef } from 'react';

// Easy to change input styling
const inputVariants = {
  variant: {
    default: 'border-gray-300 focus:border-navy-500 focus:ring-navy-500',
    error: 'border-red-300 focus:border-red-500 focus:ring-red-500',
    success: 'border-green-300 focus:border-green-500 focus:ring-green-500',
  },
  size: {
    sm: 'px-3 py-2 text-sm',
    md: 'px-4 py-3 text-base',
    lg: 'px-4 py-4 text-lg',
  }
};

// Fixed: Added text-gray-900 for dark, readable text and placeholder styling
const baseStyles = 'block w-full rounded-md shadow-sm transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder:text-gray-400 bg-white';

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  variant?: keyof typeof inputVariants.variant;
  inputSize?: keyof typeof inputVariants.size;
  label?: string;
  error?: string;
  helper?: string;
}

export const Input = forwardRef<HTMLInputElement, InputProps>(({
  variant = 'default',
  inputSize = 'md',
  label,
  error,
  helper,
  className,
  ...props
}, ref) => {
  const actualVariant = error ? 'error' : variant;

  return (
    <div className="space-y-1">
      {label && (
        <label className="block text-sm font-medium text-navy-900">
          {label}
          {props.required && <span className="text-red-500 ml-1">*</span>}
        </label>
      )}
      <input
        ref={ref}
        className={cn(
          baseStyles,
          inputVariants.variant[actualVariant],
          inputVariants.size[inputSize],
          className
        )}
        {...props}
      />
      {error && (
        <p className="text-sm text-red-600">{error}</p>
      )}
      {helper && !error && (
        <p className="text-sm text-gray-500">{helper}</p>
      )}
    </div>
  );
});

Input.displayName = 'Input';
```

# ==== src/components/ui/modal.tsx ====

```
// frontend/src/components/ui/modal.tsx
'use client';

import { cn } from '@/utils/cn';
import { Dialog, Transition } from '@headlessui/react';
import { XMarkIcon } from '@heroicons/react/24/outline';
import { Fragment, ReactNode } from 'react';

// Easy to change modal styling
const modalVariants = {
  size: {
    sm: 'max-w-md',
    md: 'max-w-lg',
    lg: 'max-w-2xl',
    xl: 'max-w-4xl',
    full: 'max-w-7xl',
  },
  position: {
    center: 'items-center justify-center',
    top: 'items-start justify-center pt-16',
  }
};

const overlayStyles = 'fixed inset-0 bg-navy-900 bg-opacity-50 transition-opacity';
const panelStyles = 'relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  size?: keyof typeof modalVariants.size;
  position?: keyof typeof modalVariants.position;
  title?: string;
  description?: string;
  showCloseButton?: boolean;
  children: ReactNode;
  className?: string;
}

export function Modal({
  isOpen,
  onClose,
  size = 'md',
  position = 'center',
  title,
  description,
  showCloseButton = true,
  children,
  className
}: ModalProps) {
  return (
    <Transition appear show={isOpen} as={Fragment}>
      <Dialog as="div" className="relative z-50" onClose={onClose}>
        <Transition.Child
          as={Fragment}
          enter="ease-out duration-300"
          enterFrom="opacity-0"
          enterTo="opacity-100"
          leave="ease-in duration-200"
          leaveFrom="opacity-100"
          leaveTo="opacity-0"
        >
          <div className={overlayStyles} />
        </Transition.Child>

        <div className="fixed inset-0 overflow-y-auto">
          <div className={cn(
            'flex min-h-full p-4 text-center',
            modalVariants.position[position]
          )}>
            <Transition.Child
              as={Fragment}
              enter="ease-out duration-300"
              enterFrom="opacity-0 scale-95"
              enterTo="opacity-100 scale-100"
              leave="ease-in duration-200"
              leaveFrom="opacity-100 scale-100"
              leaveTo="opacity-0 scale-95"
            >
              <Dialog.Panel className={cn(
                panelStyles,
                modalVariants.size[size],
                'w-full',
                className
              )}>
                {/* Header */}
                {(title || showCloseButton) && (
                  <div className="flex items-center justify-between p-6 pb-4">
                    <div>
                      {title && (
                        <Dialog.Title className="text-lg font-serif font-medium text-navy-900">
                          {title}
                        </Dialog.Title>
                      )}
                      {description && (
                        <Dialog.Description className="mt-1 text-sm text-navy-600">
                          {description}
                        </Dialog.Description>
                      )}
                    </div>
                    {showCloseButton && (
                      <button
                        type="button"
                        className="rounded-md text-navy-400 hover:text-navy-600 focus:outline-none focus:ring-2 focus:ring-navy-500"
                        onClick={onClose}
                      >
                        <XMarkIcon className="h-6 w-6" />
                      </button>
                    )}
                  </div>
                )}

                {/* Content */}
                <div className={cn(
                  'px-6',
                  (title || showCloseButton) ? 'pb-6' : 'py-6'
                )}>
                  {children}
                </div>
              </Dialog.Panel>
            </Transition.Child>
          </div>
        </div>
      </Dialog>
    </Transition>
  );
}
```

# ==== src/components/ui/select.tsx ====

```
// frontend/src/components/ui/select.tsx
import { cn } from '@/utils/cn';
import { SelectHTMLAttributes, forwardRef } from 'react';

interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {
  label?: string;
  error?: string;
  options: Array<{ value: string; label: string }>;
  placeholder?: string;
}

export const Select = forwardRef<HTMLSelectElement, SelectProps>(({
  label,
  error,
  options,
  placeholder = 'Select an option',
  className,
  ...props
}, ref) => {
  return (
    <div className="space-y-1">
      {label && (
        <label className="block text-sm font-medium text-navy-900">
          {label}
          {props.required && <span className="text-red-500 ml-1">*</span>}
        </label>
      )}
      <select
        ref={ref}
        className={cn(
          'w-full px-4 py-3 text-base border border-gray-300 rounded-md shadow-sm transition-colors duration-200',
          'focus:border-navy-500 focus:ring-navy-500 text-gray-900 bg-white',
          'disabled:opacity-50 disabled:cursor-not-allowed',
          error && 'border-red-300 focus:border-red-500 focus:ring-red-500',
          className
        )}
        {...props}
      >
        <option value="" className="text-gray-400">{placeholder}</option>
        {options.map(option => (
          <option key={option.value} value={option.value} className="text-gray-900">
            {option.label}
          </option>
        ))}
      </select>
      {error && (
        <p className="text-sm text-red-600">{error}</p>
      )}
    </div>
  );
});

Select.displayName = 'Select';
```

# ==== src/hooks/use-click-away.ts ====

```
// frontend/src/hooks/use-click-away.ts
import { useEffect, RefObject } from 'react';

export function useClickAway<T extends HTMLElement>(
  ref: RefObject<T | null>, // ðŸ‘ˆ Add | null here
  handler: () => void
) {
  useEffect(() => {
    const listener = (event: MouseEvent | TouchEvent) => {
      if (!ref.current || ref.current.contains(event.target as Node)) {
        return;
      }
      handler();
    };

    document.addEventListener('mousedown', listener);
    document.addEventListener('touchstart', listener);

    return () => {
      document.removeEventListener('mousedown', listener);
      document.removeEventListener('touchstart', listener);
    };
  }, [ref, handler]);
}
```

# ==== src/lib/api-client.ts ====

```
// frontend/src/lib/api-client.ts
import axios from 'axios';

export const apiClient = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8005',
  withCredentials: true,
  headers: {
    'Content-Type': 'application/json',
  }
});

// Request interceptor for CSRF token
apiClient.interceptors.request.use(async (config) => {
  if (['post', 'put', 'patch', 'delete'].includes(config.method!)) {
    try {
      const csrfResponse = await axios.get(`${config.baseURL}/api/customer/csrf-token/`, {
        withCredentials: true
      });
      config.headers['X-CSRFToken'] = csrfResponse.data.csrf_token;
    } catch (error) {
      console.warn('Could not fetch CSRF token:', error);
    }
  }
  return config;
});

// Response interceptor for error handling
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      console.log('Auth error detected');
    }
    return Promise.reject(error);
  }
);
```

# ==== src/lib/query-client.ts ====

```
// frontend/src/lib/query-client.ts
import { QueryClient } from '@tanstack/react-query';

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5 minutes
      gcTime: 1000 * 60 * 30, // 30 minutes
      retry: (failureCount, error: any) => {
        if (error?.response?.status === 401) return false;
        return failureCount < 3;
      },
      refetchOnWindowFocus: false,
    },
    mutations: {
      retry: 1,
    }
  }
});
```

# ==== src/stores/auth-store.ts ====

```
// frontend/src/stores/auth-store.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import type { DjangoUser, CustomerProfile } from '@/types';

interface AuthState {
  user: DjangoUser | null;
  customerProfile: CustomerProfile | null;
  isAuthenticated: boolean;
  isLoading: boolean;
}

interface AuthActions {
  setAuth: (user: DjangoUser, profile: CustomerProfile) => void;
  clearAuth: () => void;
  setLoading: (loading: boolean) => void;
  updateProfile: (updates: Partial<CustomerProfile>) => void;
  login: (email: string, password: string) => Promise<{ success: boolean; user?: DjangoUser; error?: string }>;
  register: (data: RegisterData) => Promise<{ success: boolean; user?: DjangoUser; error?: string }>;
  logout: () => Promise<void>;
  clearSessionIfIncognito: () => void;
}

interface RegisterData {
  email: string;
  password: string;
  first_name: string;
  last_name: string;
  phone?: string;
}

const initialState: AuthState = {
  user: null,
  customerProfile: null,
  isAuthenticated: false,
  isLoading: false,
};

const API_BASE = process.env.NODE_ENV === 'production' 
  ? 'https://your-production-domain.com'
  : 'http://localhost:8005';

export const useAuthStore = create<AuthState & AuthActions>()(
  persist(
    (set, get) => ({
      // State
      ...initialState,

      // Actions
      setAuth: (user, profile) => {
        if (typeof window !== 'undefined') {
          localStorage.setItem('totetaxi-last-activity', Date.now().toString());
        }
        set({
          user,
          customerProfile: profile,
          isAuthenticated: true,
          isLoading: false
        });
      },

      clearAuth: () => {
        if (typeof window !== 'undefined') {
          localStorage.removeItem('totetaxi-last-activity');
        }
        set(initialState);
      },

      setLoading: (loading) => set({ isLoading: loading }),

      updateProfile: (updates) => set((state) => ({
        customerProfile: state.customerProfile 
          ? { ...state.customerProfile, ...updates }
          : null
      })),

      login: async (email: string, password: string) => {
        set({ isLoading: true });
        
        try {
          // Get CSRF token first
          const csrfResponse = await fetch(`${API_BASE}/api/customer/csrf-token/`, {
            credentials: 'include',
          });
          
          if (!csrfResponse.ok) {
            throw new Error('Failed to get CSRF token');
          }
          
          const { csrf_token } = await csrfResponse.json();

          // Login request
          const response = await fetch(`${API_BASE}/api/customer/auth/login/`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': csrf_token,
            },
            credentials: 'include',
            body: JSON.stringify({ email, password }),
          });

          const data = await response.json();

          if (response.ok) {
            get().setAuth(data.user, data.customer_profile);
            return { success: true, user: data.user };
          } else {
            set({ isLoading: false });
            return { success: false, error: data.error || 'Login failed' };
          }
        } catch (error) {
          set({ isLoading: false });
          return { success: false, error: 'Network error. Please try again.' };
        }
      },

      register: async (data: RegisterData) => {
        set({ isLoading: true });
        
        try {
          // Get CSRF token first
          const csrfResponse = await fetch(`${API_BASE}/api/customer/csrf-token/`, {
            credentials: 'include',
          });
          
          if (!csrfResponse.ok) {
            throw new Error('Failed to get CSRF token');
          }
          
          const { csrf_token } = await csrfResponse.json();

          // Registration request
          const response = await fetch(`${API_BASE}/api/customer/auth/register/`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': csrf_token,
            },
            credentials: 'include',
            body: JSON.stringify({
              ...data,
              password_confirm: data.password
            }),
          });

          const responseData = await response.json();

          if (response.ok) {
            set({ isLoading: false });
            return { success: true, user: responseData.user };
          } else {
            set({ isLoading: false });
            return { success: false, error: responseData.error || 'Registration failed' };
          }
        } catch (error) {
          set({ isLoading: false });
          return { success: false, error: 'Network error. Please try again.' };
        }
      },

      logout: async () => {
        try {
          await fetch(`${API_BASE}/api/customer/auth/logout/`, {
            method: 'POST',
            credentials: 'include',
          });
        } catch (error) {
          console.warn('Logout request failed:', error);
        } finally {
          get().clearAuth();
        }
      },

      clearSessionIfIncognito: () => {
        if (typeof window !== 'undefined') {
          const now = Date.now();
          const lastActivity = localStorage.getItem('totetaxi-last-activity');
          
          if (!lastActivity || (now - parseInt(lastActivity)) > 30 * 60 * 1000) {
            // More than 30 minutes of inactivity, clear session
            localStorage.clear();
            set(initialState);
          } else {
            localStorage.setItem('totetaxi-last-activity', now.toString());
          }
        }
      }
    }),
    {
      name: 'totetaxi-auth',
      partialize: (state) => ({
        user: state.user,
        customerProfile: state.customerProfile,
        isAuthenticated: state.isAuthenticated
      })
    }
  )
);
```

# ==== src/stores/booking-store.ts ====

```
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export interface BookingAddress {
  address_line_1: string;
  address_line_2?: string;
  city: string;
  state: 'NY' | 'CT' | 'NJ';
  zip_code: string;
}

export interface BookingData {
  service_type?: 'mini_move' | 'standard_delivery' | 'specialty_item';
  mini_move_package_id?: string;
  include_packing?: boolean;
  include_unpacking?: boolean;
  standard_delivery_item_count?: number;
  is_same_day_delivery?: boolean;
  specialty_item_ids?: string[];
  pickup_date?: string;
  pickup_time?: 'morning' | 'afternoon' | 'evening';
  pickup_address?: BookingAddress;
  delivery_address?: BookingAddress;
  customer_info?: {
    first_name: string;
    last_name: string;
    email: string;
    phone: string;
  };
  special_instructions?: string;
  coi_required?: boolean;
  pricing_data?: {
    base_price_dollars: number;
    surcharge_dollars: number;
    coi_fee_dollars: number;
    organizing_total_dollars: number;
    total_price_dollars: number;
  };
}

interface BookingWizardState {
  currentStep: number;
  isLoading: boolean;
  bookingData: BookingData;
  errors: Record<string, string>;
  isBookingComplete: boolean;
  completedBookingNumber?: string;
  userId?: string;
  isGuestMode: boolean;
}

interface BookingWizardActions {
  setCurrentStep: (step: number) => void;
  nextStep: () => void;
  previousStep: () => void;
  updateBookingData: (data: Partial<BookingData>) => void;
  setLoading: (loading: boolean) => void;
  setError: (field: string, message: string) => void;
  clearError: (field: string) => void;
  clearErrors: () => void;
  resetWizard: () => void;
  canProceedToStep: (step: number) => boolean;
  setBookingComplete: (bookingNumber: string) => void;
  initializeForUser: (userId?: string, isGuest?: boolean) => void;
}

const initialBookingData: BookingData = {
  service_type: 'mini_move',
  pickup_time: 'morning',
  coi_required: false,
  include_packing: false,
  include_unpacking: false,
  is_same_day_delivery: false,
};

export const useBookingWizard = create<BookingWizardState & BookingWizardActions>()(
  persist(
    (set, get) => ({
      // State - ALWAYS START AT STEP 0 (auth choice)
      currentStep: 0,
      isLoading: false,
      bookingData: initialBookingData,
      errors: {},
      isBookingComplete: false,
      completedBookingNumber: undefined,
      userId: undefined,
      isGuestMode: true,

      // Actions
      setCurrentStep: (step) => set({ currentStep: step }),
      
      nextStep: () => set((state) => {
        const maxStep = state.isGuestMode ? 5 : 4;
        return { currentStep: Math.min(state.currentStep + 1, maxStep) };
      }),
      
      previousStep: () => set((state) => ({ 
        currentStep: Math.max(state.currentStep - 1, 0) // Can go back to step 0
      })),
      
      updateBookingData: (data) => set((state) => ({
        bookingData: { ...state.bookingData, ...data }
      })),
      
      setLoading: (loading) => set({ isLoading: loading }),
      
      setError: (field, message) => set((state) => ({
        errors: { ...state.errors, [field]: message }
      })),
      
      clearError: (field) => set((state) => {
        const newErrors = { ...state.errors };
        delete newErrors[field];
        return { errors: newErrors };
      }),
      
      clearErrors: () => set({ errors: {} }),
      
      setBookingComplete: (bookingNumber) => set({
        isBookingComplete: true,
        completedBookingNumber: bookingNumber
      }),
      
      initializeForUser: (providedUserId?, isGuest?) => {
        const userId = providedUserId || 'guest';
        const guestMode = isGuest !== undefined ? isGuest : true;
        
        const state = get();
        
        console.log('ðŸ”„ Initializing booking wizard', { userId, guestMode, currentUserId: state.userId });
        
        // If switching between different users, reset but stay at current step
        if (state.userId && state.userId !== userId && state.userId !== 'guest') {
          console.log('ðŸ‘¤ Different user detected, resetting data');
          set({
            bookingData: { ...initialBookingData },
            errors: {},
            isBookingComplete: false,
            completedBookingNumber: undefined,
            userId: userId,
            isGuestMode: guestMode
          });
        } else {
          // Just update user info
          set({ 
            userId: userId,
            isGuestMode: guestMode
          });
        }
      },
      
      resetWizard: () => {
        console.log('ðŸ”„ Resetting booking wizard');
        
        const newState = {
          currentStep: 0, // Always reset to auth choice step
          isLoading: false,
          bookingData: { ...initialBookingData },
          errors: {},
          isBookingComplete: false,
          completedBookingNumber: undefined,
          userId: 'guest',
          isGuestMode: true
        };
        
        set(newState);
        
        // Force clear localStorage
        if (typeof window !== 'undefined') {
          try {
            localStorage.removeItem('totetaxi-booking-wizard');
            console.log('ðŸ—‘ï¸ Cleared booking wizard from localStorage');
          } catch (e) {
            console.warn('Could not clear localStorage:', e);
          }
        }
      },
      
      canProceedToStep: (step) => {
        const { bookingData, isGuestMode } = get();
        
        switch (step) {
          case 0: return true; // Auth choice always available
          case 1: return true; // Service selection always available after auth choice
          case 2: // Date/time step
            return !!bookingData.service_type && (
              (bookingData.service_type === 'mini_move' && !!bookingData.mini_move_package_id) ||
              (bookingData.service_type === 'standard_delivery' && !!bookingData.standard_delivery_item_count) ||
              (bookingData.service_type === 'specialty_item' && !!bookingData.specialty_item_ids?.length)
            );
          case 3: // Address step
            return !!bookingData.pickup_date;
          case 4: // Customer info step (required for guests only)
            return !!bookingData.pickup_address && !!bookingData.delivery_address;
          case 5: // Review/payment step
            if (isGuestMode) {
              return !!bookingData.customer_info?.email;
            } else {
              return !!bookingData.pickup_address && !!bookingData.delivery_address;
            }
          default:
            return false;
        }
      }
    }),
    {
      name: 'totetaxi-booking-wizard',
      partialize: (state) => ({
        bookingData: state.bookingData,
        currentStep: state.currentStep,
        isBookingComplete: state.isBookingComplete,
        completedBookingNumber: state.completedBookingNumber,
        userId: state.userId,
        isGuestMode: state.isGuestMode
      })
    }
  )
);
```

# ==== src/stores/staff-auth-store.ts ====

```
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface StaffUser {
  id: number;
  username: string;
  email: string;
  first_name: string;
  last_name: string;
}

interface StaffProfile {
  id: string;
  role: 'staff' | 'admin';
  department: string;
  full_name: string;
  permissions: {
    can_approve_refunds: boolean;
    can_manage_staff: boolean;
    can_view_financial_reports: boolean;
  };
}

interface StaffAuthState {
  user: StaffUser | null;
  staffProfile: StaffProfile | null;
  isAuthenticated: boolean;
  isLoading: boolean;
}

interface StaffAuthActions {
  setAuth: (user: StaffUser, profile: StaffProfile) => void;
  clearAuth: () => void;
  setLoading: (loading: boolean) => void;
}

export const useStaffAuthStore = create<StaffAuthState & StaffAuthActions>()(
  persist(
    (set, get) => ({
      // State
      user: null,
      staffProfile: null,
      isAuthenticated: false,
      isLoading: false,

      // Actions
      setAuth: (user, profile) => set({
        user,
        staffProfile: profile,
        isAuthenticated: true,
        isLoading: false
      }),

      clearAuth: () => set({
        user: null,
        staffProfile: null,
        isAuthenticated: false,
        isLoading: false
      }),

      setLoading: (loading) => set({ isLoading: loading }),
    }),
    {
      name: 'totetaxi-staff-auth',
      partialize: (state) => ({
        user: state.user,
        staffProfile: state.staffProfile,
        isAuthenticated: state.isAuthenticated
      }),
      version: 1, // Add version to force refresh if needed
    }
  )
);
```

# ==== src/stores/ui-store.ts ====

```
// frontend/src/stores/ui-store.ts
import { create } from 'zustand';

interface Notification {
  id: string;
  type: 'success' | 'error' | 'warning' | 'info';
  message: string;
  duration?: number;
}

interface UIState {
  sidebarOpen: boolean;
  theme: 'light' | 'dark';
  notifications: Notification[];
  modals: {
    login: boolean;
    register: boolean;
    addressForm: boolean;
    paymentMethod: boolean;
  };
}

interface UIActions {
  toggleSidebar: () => void;
  setSidebar: (open: boolean) => void;
  setTheme: (theme: 'light' | 'dark') => void;
  openModal: (modal: keyof UIState['modals']) => void;
  closeModal: (modal: keyof UIState['modals']) => void;
  addNotification: (notification: Omit<Notification, 'id'>) => void;
  removeNotification: (id: string) => void;
  clearNotifications: () => void;
}

export const useUIStore = create<UIState & UIActions>((set, get) => ({
  // State
  sidebarOpen: false,
  theme: 'light',
  notifications: [],
  modals: {
    login: false,
    register: false,
    addressForm: false,
    paymentMethod: false,
  },

  // Actions
  toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })),
  setSidebar: (open) => set({ sidebarOpen: open }),
  setTheme: (theme) => set({ theme }),

  openModal: (modal) => set((state) => ({
    modals: { ...state.modals, [modal]: true }
  })),

  closeModal: (modal) => set((state) => ({
    modals: { ...state.modals, [modal]: false }
  })),

  addNotification: (notification) => set((state) => ({
    notifications: [
      ...state.notifications,
      { ...notification, id: Math.random().toString(36).substr(2, 9) }
    ]
  })),

  removeNotification: (id) => set((state) => ({
    notifications: state.notifications.filter(n => n.id !== id)
  })),

  clearNotifications: () => set({ notifications: [] })
}));
```

# ==== src/types/index.ts ====

```
// frontend/src/types/index.ts
// Django User model interface
export interface DjangoUser {
  id: number;
  username: string;
  email: string;
  first_name: string;
  last_name: string;
  is_active: boolean;
  date_joined: string;
}

// CustomerProfile interface
export interface CustomerProfile {
  id: string;
  user: DjangoUser;
  phone: string;
  stripe_customer_id: string;
  total_bookings: number;
  total_spent_cents: number;
  total_spent_dollars: number;
  preferred_pickup_time: 'morning' | 'afternoon' | 'evening';
  email_notifications: boolean;
  sms_notifications: boolean;
  is_vip: boolean;
  last_booking_at: string | null;
}

// Authentication responses
export interface AuthResponse {
  message: string;
  user: DjangoUser;
  customer_profile: CustomerProfile;
  csrf_token: string;
}

export interface MiniMovePackage {
  id: string;
  package_type: 'petite' | 'standard' | 'full';
  name: string;
  description: string;
  base_price_dollars: number;
  max_items: number | null;
  coi_included: boolean;
  coi_fee_dollars: number;
  is_most_popular: boolean;
  priority_scheduling: boolean;  // Changed: moved out of features
  protective_wrapping: boolean;  // Changed: moved out of features
}
export interface SpecialtyItem {
  id: string;
  item_type: string;
  name: string;
  description: string;
  price_dollars: number;
  requires_van_schedule: boolean;
  special_handling: boolean;
}

export interface ServiceCatalog {
  mini_move_packages: MiniMovePackage[];
  standard_delivery: {
    price_per_item_dollars: number;
    minimum_items: number;
    minimum_charge_dollars: number;
    same_day_flat_rate_dollars: number;
    max_weight_per_item_lbs: number;
  } | null;
  specialty_items: SpecialtyItem[];
}

// API Error types
export interface APIError {
  message: string;
  field_errors?: Record<string, string[]>;
}

// Add these booking-related types to the existing file

export interface BookingWizardState {
  currentStep: number;
  isLoading: boolean;
  bookingData: BookingData;
  errors: Record<string, string>;
}

export interface BookingData {
  service_type: 'mini_move' | 'standard_delivery' | 'specialty_item';
  mini_move_package_id?: string;
  include_packing?: boolean;
  include_unpacking?: boolean;
  standard_delivery_item_count?: number;
  is_same_day_delivery?: boolean;
  specialty_item_ids?: string[];
  pickup_date?: string;
  pickup_time?: 'morning' | 'afternoon' | 'evening';
  pickup_address?: BookingAddress;
  delivery_address?: BookingAddress;
  customer_info?: {
    first_name: string;
    last_name: string;
    email: string;
    phone: string;
  };
  special_instructions?: string;
  coi_required?: boolean;
  pricing_data?: {
    base_price_dollars: number;
    surcharge_dollars: number;
    coi_fee_dollars: number;
    organizing_total_dollars: number;
    total_price_dollars: number;
  };
}

export interface BookingAddress {
  address_line_1: string;
  address_line_2?: string;
  city: string;
  state: 'NY' | 'CT' | 'NJ';
  zip_code: string;
}
```

# ==== src/utils/cn.ts ====

```
import { clsx, type ClassValue } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

# ==== tailwind.config.js ====

```
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        serif: ['var(--font-playfair)', 'serif'],
        sans: ['var(--font-inter)', 'sans-serif'],
      },
      colors: {
        navy: {
          50: '#f0f4f8',
          100: '#d9e2ec',
          200: '#bcccdc',
          300: '#9fb3c8',
          400: '#829ab1',
          500: '#627d98',
          600: '#486581',
          700: '#334e68',
          800: '#243b53',
          900: '#1a365d',
        },
        gold: {
          50: '#fffdf7',
          100: '#fef7e0',
          200: '#fdecc0',
          300: '#fbdb94',
          400: '#f7c365',
          500: '#d69e2e',
          600: '#b7791f',
          700: '#975a16',
          800: '#744210',
          900: '#5f370e',
        },
        cream: {
          50: '#fefcf3',
          100: '#fef7e0',
          200: '#fdecc0',
          300: '#fbdb94',
          400: '#f7c365',
          500: '#f1a545',
          600: '#d69e2e',
          700: '#b7791f',
          800: '#975a16',
          900: '#744210',
        }
      },
      container: {
        center: true,
        padding: "2rem",
        screens: {
          "2xl": "1400px",
        },
      },
    },
  },
  plugins: [],
}
```

# ==== tsconfig.json ====

```
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}

```

